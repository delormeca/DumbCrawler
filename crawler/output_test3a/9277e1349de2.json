{
  "url": "https://docs.python.org/3/library/unittest.mock.html",
  "status_code": 200,
  "depth": 1,
  "referrer": "https://docs.python.org/3/library/",
  "raw_html": "<!DOCTYPE html>\n\n<html lang=\"en\" data-content_root=\"../\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<meta property=\"og:title\" content=\"unittest.mock — mock object library\" />\n<meta property=\"og:type\" content=\"website\" />\n<meta property=\"og:url\" content=\"https://docs.python.org/3/library/unittest.mock.html\" />\n<meta property=\"og:site_name\" content=\"Python documentation\" />\n<meta property=\"og:description\" content=\"Source code: Lib/unittest/mock.py unittest.mock is a library for testing in Python. It allows you to replace parts of your system under test with mock objects and make assertions about how they hav...\" />\n<meta property=\"og:image:width\" content=\"1146\" />\n<meta property=\"og:image:height\" content=\"600\" />\n<meta property=\"og:image\" content=\"https://docs.python.org/3.14/_images/social_previews/summary_library_unittest.mock_4002ab0a.png\" />\n<meta property=\"og:image:alt\" content=\"Source code: Lib/unittest/mock.py unittest.mock is a library for testing in Python. It allows you to replace parts of your system under test with mock objects and make assertions about how they hav...\" />\n<meta name=\"description\" content=\"Source code: Lib/unittest/mock.py unittest.mock is a library for testing in Python. It allows you to replace parts of your system under test with mock objects and make assertions about how they hav...\" />\n<meta name=\"twitter:card\" content=\"summary_large_image\" />\n<meta name=\"theme-color\" content=\"#3776ab\">\n\n    <title>unittest.mock — mock object library &#8212; Python 3.14.0 documentation</title><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pygments.css?v=b86133f3\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/classic.css?v=234b1a7c\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pydoctheme.css?v=8cd84f99\" />\n    <link id=\"pygments_dark_css\" media=\"(prefers-color-scheme: dark)\" rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pygments_dark.css?v=5349f25f\" />\n    \n    <script src=\"../_static/documentation_options.js?v=e4f4b189\"></script>\n    <script src=\"../_static/doctools.js?v=9bcbadda\"></script>\n    <script src=\"../_static/sphinx_highlight.js?v=dc90522c\"></script>\n    \n    <script src=\"../_static/sidebar.js\"></script>\n    \n    <link rel=\"search\" type=\"application/opensearchdescription+xml\"\n          title=\"Search within Python 3.14.0 documentation\"\n          href=\"../_static/opensearch.xml\"/>\n    <link rel=\"author\" title=\"About these documents\" href=\"../about.html\" />\n    <link rel=\"index\" title=\"Index\" href=\"../genindex.html\" />\n    <link rel=\"search\" title=\"Search\" href=\"../search.html\" />\n    <link rel=\"copyright\" title=\"Copyright\" href=\"../copyright.html\" />\n    <link rel=\"next\" title=\"unittest.mock — getting started\" href=\"unittest.mock-examples.html\" />\n    <link rel=\"prev\" title=\"unittest — Unit testing framework\" href=\"unittest.html\" />\n    \n      \n      <script defer file-types=\"bz2,epub,zip\" data-domain=\"docs.python.org\" src=\"https://analytics.python.org/js/script.file-downloads.outbound-links.js\"></script>\n      \n      <link rel=\"canonical\" href=\"https://docs.python.org/3/library/unittest.mock.html\">\n      \n    \n\n    \n    <style>\n      @media only screen {\n        table.full-width-table {\n            width: 100%;\n        }\n      }\n    </style>\n<link rel=\"stylesheet\" href=\"../_static/pydoctheme_dark.css\" media=\"(prefers-color-scheme: dark)\" id=\"pydoctheme_dark_css\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"../_static/py.svg\">\n            <script type=\"text/javascript\" src=\"../_static/copybutton.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/menu.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/search-focus.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/themetoggle.js\"></script> \n            <script type=\"text/javascript\" src=\"../_static/rtd_switcher.js\"></script>\n            <meta name=\"readthedocs-addons-api-version\" content=\"1\">\n\n  </head>\n<body>\n<div class=\"mobile-nav\">\n    <input type=\"checkbox\" id=\"menuToggler\" class=\"toggler__input\" aria-controls=\"navigation\"\n           aria-pressed=\"false\" aria-expanded=\"false\" role=\"button\" aria-label=\"Menu\">\n    <nav class=\"nav-content\" role=\"navigation\">\n        <label for=\"menuToggler\" class=\"toggler__label\">\n            <span></span>\n        </label>\n        <span class=\"nav-items-wrapper\">\n            <a href=\"https://www.python.org/\" class=\"nav-logo\">\n                <img src=\"../_static/py.svg\" alt=\"Python logo\">\n            </a>\n            <span class=\"version_switcher_placeholder\"></span>\n            <form role=\"search\" class=\"search\" action=\"../search.html\" method=\"get\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" class=\"search-icon\">\n                    <path fill-rule=\"nonzero\" fill=\"currentColor\" d=\"M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\n                </svg>\n                <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\">\n                <input type=\"submit\" value=\"Go\">\n            </form>\n        </span>\n    </nav>\n    <div class=\"menu-wrapper\">\n        <nav class=\"menu\" role=\"navigation\" aria-label=\"main navigation\">\n            <div class=\"language_switcher_placeholder\"></div>\n            \n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label>\n  <div>\n    <h3><a href=\"../contents.html\">Table of Contents</a></h3>\n    <ul>\n<li><a class=\"reference internal\" href=\"#\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — mock object library</a><ul>\n<li><a class=\"reference internal\" href=\"#quick-guide\">Quick Guide</a></li>\n<li><a class=\"reference internal\" href=\"#the-mock-class\">The Mock Class</a><ul>\n<li><a class=\"reference internal\" href=\"#calling\">Calling</a></li>\n<li><a class=\"reference internal\" href=\"#deleting-attributes\">Deleting Attributes</a></li>\n<li><a class=\"reference internal\" href=\"#mock-names-and-the-name-attribute\">Mock names and the name attribute</a></li>\n<li><a class=\"reference internal\" href=\"#attaching-mocks-as-attributes\">Attaching Mocks as Attributes</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#the-patchers\">The patchers</a><ul>\n<li><a class=\"reference internal\" href=\"#patch\">patch</a></li>\n<li><a class=\"reference internal\" href=\"#patch-object\">patch.object</a></li>\n<li><a class=\"reference internal\" href=\"#patch-dict\">patch.dict</a></li>\n<li><a class=\"reference internal\" href=\"#patch-multiple\">patch.multiple</a></li>\n<li><a class=\"reference internal\" href=\"#patch-methods-start-and-stop\">patch methods: start and stop</a></li>\n<li><a class=\"reference internal\" href=\"#patch-builtins\">patch builtins</a></li>\n<li><a class=\"reference internal\" href=\"#test-prefix\">TEST_PREFIX</a></li>\n<li><a class=\"reference internal\" href=\"#nesting-patch-decorators\">Nesting Patch Decorators</a></li>\n<li><a class=\"reference internal\" href=\"#where-to-patch\">Where to patch</a></li>\n<li><a class=\"reference internal\" href=\"#patching-descriptors-and-proxy-objects\">Patching Descriptors and Proxy Objects</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#magicmock-and-magic-method-support\">MagicMock and magic method support</a><ul>\n<li><a class=\"reference internal\" href=\"#mocking-magic-methods\">Mocking Magic Methods</a></li>\n<li><a class=\"reference internal\" href=\"#magic-mock\">Magic Mock</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#helpers\">Helpers</a><ul>\n<li><a class=\"reference internal\" href=\"#sentinel\">sentinel</a></li>\n<li><a class=\"reference internal\" href=\"#default\">DEFAULT</a></li>\n<li><a class=\"reference internal\" href=\"#call\">call</a></li>\n<li><a class=\"reference internal\" href=\"#create-autospec\">create_autospec</a></li>\n<li><a class=\"reference internal\" href=\"#any\">ANY</a></li>\n<li><a class=\"reference internal\" href=\"#filter-dir\">FILTER_DIR</a></li>\n<li><a class=\"reference internal\" href=\"#mock-open\">mock_open</a></li>\n<li><a class=\"reference internal\" href=\"#autospeccing\">Autospeccing</a></li>\n<li><a class=\"reference internal\" href=\"#sealing-mocks\">Sealing mocks</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#order-of-precedence-of-side-effect-return-value-and-wraps\">Order of precedence of <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code>, <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code> and <em>wraps</em></a></li>\n</ul>\n</li>\n</ul>\n\n  </div>\n  <div>\n    <h4>Previous topic</h4>\n    <p class=\"topless\"><a href=\"unittest.html\"\n                          title=\"previous chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest</span></code> — Unit testing framework</a></p>\n  </div>\n  <div>\n    <h4>Next topic</h4>\n    <p class=\"topless\"><a href=\"unittest.mock-examples.html\"\n                          title=\"next chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — getting started</a></p>\n  </div>\n  <div role=\"note\" aria-label=\"source link\">\n    <h3>This page</h3>\n    <ul class=\"this-page-menu\">\n      <li><a href=\"../bugs.html\">Report a bug</a></li>\n      <li>\n        <a href=\"https://github.com/python/cpython/blob/main/Doc/library/unittest.mock.rst?plain=1\"\n            rel=\"nofollow\">Show source\n        </a>\n      </li>\n    </ul>\n  </div>\n        </nav>\n    </div>\n</div>\n\n  \n    <div class=\"related\" role=\"navigation\" aria-label=\"Related\">\n      <h3>Navigation</h3>\n      <ul>\n        <li class=\"right\" style=\"margin-right: 10px\">\n          <a href=\"../genindex.html\" title=\"General Index\"\n             accesskey=\"I\">index</a></li>\n        <li class=\"right\" >\n          <a href=\"../py-modindex.html\" title=\"Python Module Index\"\n             >modules</a> |</li>\n        <li class=\"right\" >\n          <a href=\"unittest.mock-examples.html\" title=\"unittest.mock — getting started\"\n             accesskey=\"N\">next</a> |</li>\n        <li class=\"right\" >\n          <a href=\"unittest.html\" title=\"unittest — Unit testing framework\"\n             accesskey=\"P\">previous</a> |</li>\n\n          <li><img src=\"../_static/py.svg\" alt=\"Python logo\" style=\"vertical-align: middle; margin-top: -1px\"></li>\n          <li><a href=\"https://www.python.org/\">Python</a> &#187;</li>\n          <li class=\"switchers\">\n            <div class=\"language_switcher_placeholder\"></div>\n            <div class=\"version_switcher_placeholder\"></div>\n          </li>\n          <li>\n              \n          </li>\n    <li id=\"cpython-language-and-version\">\n      <a href=\"../index.html\">3.14.0 Documentation</a> &#187;\n    </li>\n\n          <li class=\"nav-item nav-item-1\"><a href=\"index.html\" >The Python Standard Library</a> &#187;</li>\n          <li class=\"nav-item nav-item-2\"><a href=\"development.html\" accesskey=\"U\">Development Tools</a> &#187;</li>\n        <li class=\"nav-item nav-item-this\"><a href=\"\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — mock object library</a></li>\n                <li class=\"right\">\n                    \n\n    <div class=\"inline-search\" role=\"search\">\n        <form class=\"inline-search\" action=\"../search.html\" method=\"get\">\n          <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\" id=\"search-box\">\n          <input type=\"submit\" value=\"Go\">\n        </form>\n    </div>\n                     |\n                </li>\n            <li class=\"right\">\n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label> |</li>\n            \n      </ul>\n    </div>    \n\n    <div class=\"document\">\n      <div class=\"documentwrapper\">\n        <div class=\"bodywrapper\">\n          <div class=\"body\" role=\"main\">\n            \n  <section id=\"module-unittest.mock\">\n<span id=\"unittest-mock-mock-object-library\"></span><h1><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — mock object library<a class=\"headerlink\" href=\"#module-unittest.mock\" title=\"Link to this heading\">¶</a></h1>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.3.</span></p>\n</div>\n<p><strong>Source code:</strong> <a class=\"extlink-source reference external\" href=\"https://github.com/python/cpython/tree/3.14/Lib/unittest/mock.py\">Lib/unittest/mock.py</a></p>\n<hr class=\"docutils\" />\n<p><a class=\"reference internal\" href=\"#module-unittest.mock\" title=\"unittest.mock: Mock object library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code></a> is a library for testing in Python. It allows you to\nreplace parts of your system under test with mock objects and make assertions\nabout how they have been used.</p>\n<p><a class=\"reference internal\" href=\"#module-unittest.mock\" title=\"unittest.mock: Mock object library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code></a> provides a core <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> class removing the need to\ncreate a host of stubs throughout your test suite. After performing an\naction, you can make assertions about which methods / attributes were used\nand arguments they were called with. You can also specify return values and\nset needed attributes in the normal way.</p>\n<p>Additionally, mock provides a <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> decorator that handles patching\nmodule and class level attributes within the scope of a test, along with\n<a class=\"reference internal\" href=\"#unittest.mock.sentinel\" title=\"unittest.mock.sentinel\"><code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">sentinel</span></code></a> for creating unique objects. See the <a class=\"reference internal\" href=\"#quick-guide\">quick guide</a> for\nsome examples of how to use <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> and\n<a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>.</p>\n<p>Mock is designed for use with <a class=\"reference internal\" href=\"unittest.html#module-unittest\" title=\"unittest: Unit testing framework for Python.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest</span></code></a> and\nis based on the ‘action -&gt; assertion’ pattern instead of ‘record -&gt; replay’\nused by many mocking frameworks.</p>\n<p>There is a backport of <a class=\"reference internal\" href=\"#module-unittest.mock\" title=\"unittest.mock: Mock object library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code></a> for earlier versions of Python,\navailable as <a class=\"extlink-pypi reference external\" href=\"https://pypi.org/project/mock/\">mock</a> on PyPI.</p>\n<section id=\"quick-guide\">\n<h2>Quick Guide<a class=\"headerlink\" href=\"#quick-guide\" title=\"Link to this heading\">¶</a></h2>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> objects create all attributes and\nmethods as you access them and store details of how they have been used. You\ncan configure them, to specify return values or limit what attributes are\navailable, and then make assertions about how they have been used:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">MagicMock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">ProductionClass</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"s1\">&#39;value&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"s1\">&#39;value&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> allows you to perform side effects, including raising an\nexception when a mock is called:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Mock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"ne\">KeyError</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>: <span class=\"n\">&#39;foo&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">values</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">:</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">values</span><span class=\"p\">[</span><span class=\"n\">arg</span><span class=\"p\">]</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"n\">side_effect</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">),</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;b&#39;</span><span class=\"p\">),</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">(1, 2, 3)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(),</span> <span class=\"n\">mock</span><span class=\"p\">(),</span> <span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">(5, 4, 3)</span>\n</pre></div>\n</div>\n<p>Mock has many other ways you can configure it and control its behaviour. For\nexample the <em>spec</em> argument configures the mock to take its specification\nfrom another object. Attempting to access attributes or methods on the mock\nthat don’t exist on the spec will fail with an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p>\n<p>The <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> decorator / context manager makes it easy to mock classes or\nobjects in a module under test. The object you specify will be replaced with a\nmock (or other object) during the test and restored when the test ends:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">patch</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;module.ClassName2&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;module.ClassName1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">MockClass1</span><span class=\"p\">,</span> <span class=\"n\">MockClass2</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName1</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName2</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">MockClass1</span> <span class=\"ow\">is</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName1</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">MockClass2</span> <span class=\"ow\">is</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName2</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">MockClass1</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">MockClass2</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>When you nest patch decorators the mocks are passed in to the decorated\nfunction in the same order they applied (the normal <em>Python</em> order that\ndecorators are applied). This means from the bottom up, so in the example\nabove the mock for <code class=\"docutils literal notranslate\"><span class=\"pre\">module.ClassName1</span></code> is passed in first.</p>\n<p>With <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> it matters that you patch objects in the namespace where they\nare looked up. This is normally straightforward, but for a quick guide\nread <a class=\"reference internal\" href=\"#where-to-patch\"><span class=\"std std-ref\">where to patch</span></a>.</p>\n</div>\n<p>As well as a decorator <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> can be used as a context manager in a with\nstatement:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"p\">(</span><span class=\"n\">ProductionClass</span><span class=\"p\">,</span> <span class=\"s1\">&#39;method&#39;</span><span class=\"p\">,</span> <span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">mock_method</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">ProductionClass</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_method</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>There is also <a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> for setting values in a dictionary just\nduring a scope and restoring the dictionary to its original state when the test\nends:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">foo</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;key&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;value&#39;</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">original</span> <span class=\"o\">=</span> <span class=\"n\">foo</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"n\">foo</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">},</span> <span class=\"n\">clear</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">}</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"n\">original</span>\n</pre></div>\n</div>\n<p>Mock supports the mocking of Python <a class=\"reference internal\" href=\"#magic-methods\"><span class=\"std std-ref\">magic methods</span></a>. The\neasiest way of using magic methods is with the <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> class. It\nallows you to do things like:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;foobarbaz&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">&#39;foobarbaz&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Mock allows you to assign functions (or other Mock instances) to magic methods\nand they will be called appropriately. The <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> class is just a Mock\nvariant that has all of the magic methods pre-created for you (well, all the\nuseful ones anyway).</p>\n<p>The following is an example of using magic methods with the ordinary Mock\nclass:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"s1\">&#39;wheeeeee&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">&#39;wheeeeee&#39;</span>\n</pre></div>\n</div>\n<p>For ensuring that the mock objects in your tests have the same api as the\nobjects they are replacing, you can use <a class=\"reference internal\" href=\"#auto-speccing\"><span class=\"std std-ref\">auto-speccing</span></a>.\nAuto-speccing can be done through the <em>autospec</em> argument to patch, or the\n<a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> function. Auto-speccing creates mock objects that\nhave the same attributes and methods as the objects they are replacing, and\nany functions and methods (including constructors) have the same call\nsignature as the real object.</p>\n<p>This ensures that your mocks will fail in the same way as your production\ncode if they are used incorrectly:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">create_autospec</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">function</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_function</span> <span class=\"o\">=</span> <span class=\"n\">create_autospec</span><span class=\"p\">(</span><span class=\"n\">function</span><span class=\"p\">,</span> <span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"s1\">&#39;fishy&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_function</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"go\">&#39;fishy&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_function</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_function</span><span class=\"p\">(</span><span class=\"s1\">&#39;wrong arguments&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">TypeError</span>: <span class=\"n\">missing a required argument: &#39;b&#39;</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> can also be used on classes, where it copies the signature of\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">__init__</span></code> method, and on callable objects where it copies the signature of\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">__call__</span></code> method.</p>\n</section>\n<section id=\"the-mock-class\">\n<h2>The Mock Class<a class=\"headerlink\" href=\"#the-mock-class\" title=\"Link to this heading\">¶</a></h2>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> is a flexible mock object intended to replace the use of stubs and\ntest doubles throughout your code. Mocks are callable and create attributes as\nnew mocks when you access them <a class=\"footnote-reference brackets\" href=\"#id3\" id=\"id1\" role=\"doc-noteref\"><span class=\"fn-bracket\">[</span>1<span class=\"fn-bracket\">]</span></a>. Accessing the same attribute will always\nreturn the same mock. Mocks record how you use them, allowing you to make\nassertions about what your code has done to them.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> is a subclass of <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> with all the magic methods\npre-created and ready to use. There are also non-callable variants, useful\nwhen you are mocking out objects that aren’t callable:\n<a class=\"reference internal\" href=\"#unittest.mock.NonCallableMock\" title=\"unittest.mock.NonCallableMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">NonCallableMock</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.NonCallableMagicMock\" title=\"unittest.mock.NonCallableMagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">NonCallableMagicMock</span></code></a></p>\n<p>The <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> decorators makes it easy to temporarily replace classes\nin a particular module with a <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> object. By default <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> will create\na <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> for you. You can specify an alternative class of <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> using\nthe <em>new_callable</em> argument to <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">side_effect</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">return_value</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">DEFAULT</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">wraps</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">unsafe</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Create a new <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> object. <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> takes several optional arguments\nthat specify the behaviour of the Mock object:</p>\n<ul>\n<li><p><em>spec</em>: This can be either a list of strings or an existing object (a\nclass or instance) that acts as the specification for the mock object. If\nyou pass in an object then a list of strings is formed by calling dir on\nthe object (excluding unsupported magic attributes and methods).\nAccessing any attribute not in this list will raise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p>\n<p>If <em>spec</em> is an object (rather than a list of strings) then\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__class__\" title=\"object.__class__\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">__class__</span></code></a> returns the class of the spec object. This\nallows mocks to pass <a class=\"reference internal\" href=\"functions.html#isinstance\" title=\"isinstance\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">isinstance()</span></code></a> tests.</p>\n</li>\n<li><p><em>spec_set</em>: A stricter variant of <em>spec</em>. If used, attempting to <em>set</em>\nor get an attribute on the mock that isn’t on the object passed as\n<em>spec_set</em> will raise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p></li>\n<li><p><em>side_effect</em>: A function to be called whenever the Mock is called. See\nthe <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> attribute. Useful for raising exceptions or\ndynamically changing return values. The function is called with the same\narguments as the mock, and unless it returns <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a>, the return\nvalue of this function is used as the return value.</p>\n<p>Alternatively <em>side_effect</em> can be an exception class or instance. In\nthis case the exception will be raised when the mock is called.</p>\n<p>If <em>side_effect</em> is an iterable then each call to the mock will return\nthe next value from the iterable.</p>\n<p>A <em>side_effect</em> can be cleared by setting it to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>.</p>\n</li>\n<li><p><em>return_value</em>: The value returned when the mock is called. By default\nthis is a new Mock (created on first access). See the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> attribute.</p></li>\n<li><p><em>unsafe</em>: By default, accessing any attribute whose name starts with\n<em>assert</em>, <em>assret</em>, <em>asert</em>, <em>aseert</em> or <em>assrt</em> will raise an\n<a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>. Passing <code class=\"docutils literal notranslate\"><span class=\"pre\">unsafe=True</span></code> will allow access to\nthese attributes.</p>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.5.</span></p>\n</div>\n</li>\n<li><p><em>wraps</em>: Item for the mock object to wrap. If <em>wraps</em> is not <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> then\ncalling the Mock will pass the call through to the wrapped object\n(returning the real result). Attribute access on the mock will return a\nMock object that wraps the corresponding attribute of the wrapped\nobject (so attempting to access an attribute that doesn’t exist will\nraise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>).</p>\n<p>If the mock has an explicit <em>return_value</em> set then calls are not passed\nto the wrapped object and the <em>return_value</em> is returned instead.</p>\n</li>\n<li><p><em>name</em>: If the mock has a name then it will be used in the repr of the\nmock. This can be useful for debugging. The name is propagated to child\nmocks.</p></li>\n</ul>\n<p>Mocks can also be called with arbitrary keyword arguments. These will be\nused to set attributes on the mock after it is created. See the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.configure_mock\" title=\"unittest.mock.Mock.configure_mock\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">configure_mock()</span></code></a> method for details.</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_called\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_called</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_called\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was called at least once.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.method()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">assert_called</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.6.</span></p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_called_once\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_called_once</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_called_once\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was called exactly once.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.method()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">assert_called_once</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.method()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">assert_called_once</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected &#39;method&#39; to have been called once. Called 2 times.</span>\n<span class=\"x\">Calls: [call(), call()].</span>\n</pre></div>\n</div>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.6.</span></p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_called_with\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_called_with</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_called_with\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This method is a convenient way of asserting that the last call has been\nmade in a particular way:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"o\">=</span><span class=\"s1\">&#39;wow&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.method()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">test</span><span class=\"o\">=</span><span class=\"s1\">&#39;wow&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_called_once_with\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_called_once_with</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_called_once_with\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was called exactly once and that call was with the\nspecified arguments.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;baz&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;baz&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;values&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;values&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected &#39;mock&#39; to be called once. Called 2 times.</span>\n<span class=\"x\">Calls: [call(&#39;foo&#39;, bar=&#39;baz&#39;), call(&#39;other&#39;, bar=&#39;values&#39;)].</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_any_call\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_any_call</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_any_call\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>assert the mock has been called with the specified arguments.</p>\n<p>The assert passes if the mock has <em>ever</em> been called, unlike\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_with\" title=\"unittest.mock.Mock.assert_called_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_with()</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_once_with\" title=\"unittest.mock.Mock.assert_called_once_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_once_with()</span></code></a> that\nonly pass if the call is the most recent one, and in the case of\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_once_with\" title=\"unittest.mock.Mock.assert_called_once_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_once_with()</span></code></a> it must also be the only call.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;thing&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;some&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;thing&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;else&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_any_call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;thing&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_has_calls\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_has_calls</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">calls</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">any_order</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_has_calls\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>assert the mock has been called with the specified calls.\nThe <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> list is checked for the calls.</p>\n<p>If <em>any_order</em> is false then the calls must be\nsequential. There can be extra calls before or after the\nspecified calls.</p>\n<p>If <em>any_order</em> is true then the calls can be in any order, but\nthey must all appear in <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">calls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_has_calls</span><span class=\"p\">(</span><span class=\"n\">calls</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">calls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_has_calls</span><span class=\"p\">(</span><span class=\"n\">calls</span><span class=\"p\">,</span> <span class=\"n\">any_order</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.assert_not_called\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_not_called</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.assert_not_called\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert the mock was never called.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">hello</span><span class=\"o\">.</span><span class=\"n\">assert_not_called</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">obj</span> <span class=\"o\">=</span> <span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">hello</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">hello</span><span class=\"o\">.</span><span class=\"n\">assert_not_called</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected &#39;hello&#39; to not have been called. Called 1 times.</span>\n<span class=\"x\">Calls: [call()].</span>\n</pre></div>\n</div>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.5.</span></p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.reset_mock\">\n<span class=\"sig-name descname\"><span class=\"pre\">reset_mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"keyword-only-separator o\"><abbr title=\"Keyword-only parameters separator (PEP 3102)\"><span class=\"pre\">*</span></abbr></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">return_value</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">side_effect</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.reset_mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>The reset_mock method resets all the call attributes on a mock object:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">reset_mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"go\">False</span>\n</pre></div>\n</div>\n<p>This can be useful where you want to make a series of assertions that\nreuse the same object.</p>\n<p><em>return_value</em> parameter when set to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> resets <a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a>:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">5</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">reset_mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p><em>side_effect</em> parameter when set to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> resets <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"ne\">ValueError</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">ValueError</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">reset_mock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;Mock name=&#39;mock()&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p>Note that <a class=\"reference internal\" href=\"#unittest.mock.Mock.reset_mock\" title=\"unittest.mock.Mock.reset_mock\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">reset_mock()</span></code></a> <em>doesn’t</em> clear the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> or any child attributes you have\nset using normal assignment by default.</p>\n<p>Child mocks are reset as well.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.6: </span>Added two keyword-only arguments to the reset_mock function.</p>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.mock_add_spec\">\n<span class=\"sig-name descname\"><span class=\"pre\">mock_add_spec</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.mock_add_spec\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Add a spec to a mock. <em>spec</em> can either be an object or a\nlist of strings. Only attributes on the <em>spec</em> can be fetched as\nattributes from the mock.</p>\n<p>If <em>spec_set</em> is true then only attributes on the spec can be set.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.attach_mock\">\n<span class=\"sig-name descname\"><span class=\"pre\">attach_mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">mock</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">attribute</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.attach_mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Attach a mock as an attribute of this one, replacing its name and\nparent. Calls to the attached mock will be recorded in the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> attributes of this one.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.configure_mock\">\n<span class=\"sig-name descname\"><span class=\"pre\">configure_mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.configure_mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set attributes on the mock through keyword arguments.</p>\n<p>Attributes plus return values and side effects can be set on child\nmocks using standard dot notation and unpacking a dictionary in the\nmethod call:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;method.return_value&#39;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;other.side_effect&#39;</span><span class=\"p\">:</span> <span class=\"ne\">KeyError</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">configure_mock</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>\n</pre></div>\n</div>\n<p>The same thing can be achieved in the constructor call to mocks:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;method.return_value&#39;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;other.side_effect&#39;</span><span class=\"p\">:</span> <span class=\"ne\">KeyError</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">some_attribute</span><span class=\"o\">=</span><span class=\"s1\">&#39;eggs&#39;</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">some_attribute</span>\n<span class=\"go\">&#39;eggs&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock.configure_mock\" title=\"unittest.mock.Mock.configure_mock\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">configure_mock()</span></code></a> exists to make it easier to do configuration\nafter the mock has been created.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.__dir__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__dir__</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock.__dir__\" title=\"Link to this definition\">¶</a></dt>\n<dd><p><a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> objects limit the results of <code class=\"docutils literal notranslate\"><span class=\"pre\">dir(some_mock)</span></code> to useful results.\nFor mocks with a <em>spec</em> this includes all the permitted attributes\nfor the mock.</p>\n<p>See <a class=\"reference internal\" href=\"#unittest.mock.FILTER_DIR\" title=\"unittest.mock.FILTER_DIR\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">FILTER_DIR</span></code></a> for what this filtering does, and how to\nswitch it off.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock._get_child_mock\">\n<span class=\"sig-name descname\"><span class=\"pre\">_get_child_mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kw</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.Mock._get_child_mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Create the child mocks for attributes and return value.\nBy default child mocks will be the same type as the parent.\nSubclasses of Mock may want to override this to customize the way\nchild mocks are made.</p>\n<p>For non-callable mocks the callable variant will be used (rather than\nany custom subclass).</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.called\">\n<span class=\"sig-name descname\"><span class=\"pre\">called</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.called\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A boolean representing whether or not the mock object has been called:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"go\">False</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.call_count\">\n<span class=\"sig-name descname\"><span class=\"pre\">call_count</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.call_count\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>An integer telling you how many times the mock object has been called:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_count</span>\n<span class=\"go\">0</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_count</span>\n<span class=\"go\">2</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.return_value\">\n<span class=\"sig-name descname\"><span class=\"pre\">return_value</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.return_value\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set this to configure the value returned by calling the mock:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;fish&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;fish&#39;</span>\n</pre></div>\n</div>\n<p>The default return value is a mock object and you can configure it in\nthe normal way:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span><span class=\"o\">.</span><span class=\"n\">attribute</span> <span class=\"o\">=</span> <span class=\"n\">sentinel</span><span class=\"o\">.</span><span class=\"n\">Attribute</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock()()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> can also be set in the constructor:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.side_effect\">\n<span class=\"sig-name descname\"><span class=\"pre\">side_effect</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.side_effect\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This can either be a function to be called when the mock is called,\nan iterable or an exception (class or instance) to be raised.</p>\n<p>If you pass in a function it will be called with same arguments as the\nmock and unless the function returns the <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> singleton the\ncall to the mock will then return whatever the function returns. If the\nfunction returns <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> then the mock will return its normal\nvalue (from the <a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a>).</p>\n<p>If you pass in an iterable, it is used to retrieve an iterator which\nmust yield a value on every call.  This value can either be an exception\ninstance to be raised, or a value to be returned from the call to the\nmock (<a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> handling is identical to the function case).</p>\n<p>An example of a mock that raises an exception (to test exception\nhandling of an API):</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"ne\">Exception</span><span class=\"p\">(</span><span class=\"s1\">&#39;Boom!&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">Exception</span>: <span class=\"n\">Boom!</span>\n</pre></div>\n</div>\n<p>Using <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> to return a sequence of values:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(),</span> <span class=\"n\">mock</span><span class=\"p\">(),</span> <span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">(3, 2, 1)</span>\n</pre></div>\n</div>\n<p>Using a callable:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">DEFAULT</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"n\">side_effect</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> can be set in the constructor. Here’s an example that\nadds one to the value the mock is called with and returns it:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"k\">lambda</span> <span class=\"n\">value</span><span class=\"p\">:</span> <span class=\"n\">value</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"n\">side_effect</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"go\">4</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mi\">8</span><span class=\"p\">)</span>\n<span class=\"go\">-7</span>\n</pre></div>\n</div>\n<p>Setting <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> clears it:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"ne\">KeyError</span><span class=\"p\">,</span> <span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.call_args\">\n<span class=\"sig-name descname\"><span class=\"pre\">call_args</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.call_args\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This is either <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> (if the mock hasn’t been called), or the\narguments that the mock was last called with. This will be in the\nform of a tuple: the first member, which can also be accessed through\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code> property, is any positional arguments the mock was\ncalled with (or an empty tuple) and the second member, which can\nalso be accessed through the <code class=\"docutils literal notranslate\"><span class=\"pre\">kwargs</span></code> property, is any keyword\narguments (or an empty dictionary).</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span><span class=\"p\">)</span>\n<span class=\"go\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span>\n<span class=\"go\">call()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span> <span class=\"o\">==</span> <span class=\"p\">()</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span>\n<span class=\"go\">call(3, 4)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span> <span class=\"o\">==</span> <span class=\"p\">((</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">),)</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span><span class=\"o\">.</span><span class=\"n\">args</span>\n<span class=\"go\">(3, 4)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span><span class=\"o\">.</span><span class=\"n\">kwargs</span>\n<span class=\"go\">{}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"s1\">&#39;fish&#39;</span><span class=\"p\">,</span> <span class=\"nb\">next</span><span class=\"o\">=</span><span class=\"s1\">&#39;w00t!&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span>\n<span class=\"go\">call(3, 4, 5, key=&#39;fish&#39;, next=&#39;w00t!&#39;)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span><span class=\"o\">.</span><span class=\"n\">args</span>\n<span class=\"go\">(3, 4, 5)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args</span><span class=\"o\">.</span><span class=\"n\">kwargs</span>\n<span class=\"go\">{&#39;key&#39;: &#39;fish&#39;, &#39;next&#39;: &#39;w00t!&#39;}</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args</span></code></a>, along with members of the lists <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args_list</span></code></a>,\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> are <a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">call</span></code></a> objects.\nThese are tuples, so they can be unpacked to get at the individual\narguments and make more complex assertions. See\n<a class=\"reference internal\" href=\"#calls-as-tuples\"><span class=\"std std-ref\">calls as tuples</span></a>.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span>Added <code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">kwargs</span></code> properties.</p>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.call_args_list\">\n<span class=\"sig-name descname\"><span class=\"pre\">call_args_list</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.call_args_list\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This is a list of all the calls made to the mock object in sequence\n(so the length of the list is the number of times it has been\ncalled). Before any calls have been made it is an empty list. The\n<a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">call</span></code></a> object can be used for conveniently constructing lists of\ncalls to compare with <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args_list</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"o\">=</span><span class=\"s1\">&#39;fish&#39;</span><span class=\"p\">,</span> <span class=\"nb\">next</span><span class=\"o\">=</span><span class=\"s1\">&#39;w00t!&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args_list</span>\n<span class=\"go\">[call(), call(3, 4), call(key=&#39;fish&#39;, next=&#39;w00t!&#39;)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">expected</span> <span class=\"o\">=</span> <span class=\"p\">[(),</span> <span class=\"p\">((</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">),),</span> <span class=\"p\">({</span><span class=\"s1\">&#39;key&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;fish&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;next&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;w00t!&#39;</span><span class=\"p\">},)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">call_args_list</span> <span class=\"o\">==</span> <span class=\"n\">expected</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>Members of <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args_list</span></code></a> are <a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">call</span></code></a> objects. These can be\nunpacked as tuples to get at the individual arguments. See\n<a class=\"reference internal\" href=\"#calls-as-tuples\"><span class=\"std std-ref\">calls as tuples</span></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.method_calls\">\n<span class=\"sig-name descname\"><span class=\"pre\">method_calls</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.method_calls\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>As well as tracking calls to themselves, mocks also track calls to\nmethods and attributes, and <em>their</em> methods and attributes:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.method()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">property</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">attribute</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.property.method.attribute()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method_calls</span>\n<span class=\"go\">[call.method(), call.property.method.attribute()]</span>\n</pre></div>\n</div>\n<p>Members of <a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a> are <a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">call</span></code></a> objects. These can be\nunpacked as tuples to get at the individual arguments. See\n<a class=\"reference internal\" href=\"#calls-as-tuples\"><span class=\"std std-ref\">calls as tuples</span></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.mock_calls\">\n<span class=\"sig-name descname\"><span class=\"pre\">mock_calls</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.mock_calls\" title=\"Link to this definition\">¶</a></dt>\n<dd><p><a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> records <em>all</em> calls to the mock object, its methods,\nmagic methods <em>and</em> return value mocks.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.first()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">second</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.second()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock()()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">expected</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"o\">.</span><span class=\"n\">second</span><span class=\"p\">(),</span>\n<span class=\"gp\">... </span><span class=\"n\">call</span><span class=\"o\">.</span><span class=\"fm\">__int__</span><span class=\"p\">(),</span> <span class=\"n\">call</span><span class=\"p\">()(</span><span class=\"mi\">1</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span> <span class=\"o\">==</span> <span class=\"n\">expected</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>Members of <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> are <a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">call</span></code></a> objects. These can be\nunpacked as tuples to get at the individual arguments. See\n<a class=\"reference internal\" href=\"#calls-as-tuples\"><span class=\"std std-ref\">calls as tuples</span></a>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The way <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> are recorded means that where nested\ncalls are made, the parameters of ancestor calls are not recorded\nand so will always compare equal:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">top</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">bottom</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.top().bottom()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call.top(a=3), call.top().bottom()]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">call</span><span class=\"o\">.</span><span class=\"n\">top</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">bottom</span><span class=\"p\">()</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.Mock.__class__\">\n<span class=\"sig-name descname\"><span class=\"pre\">__class__</span></span><a class=\"headerlink\" href=\"#unittest.mock.Mock.__class__\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Normally the <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">__class__</span></code> attribute of an object will return its type.\nFor a mock object with a <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec</span></code>, <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">__class__</span></code> returns the spec class\ninstead. This allows mock objects to pass <a class=\"reference internal\" href=\"functions.html#isinstance\" title=\"isinstance\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">isinstance()</span></code></a> tests for the\nobject they are replacing / masquerading as:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">__class__</span></code> is assignable to, this allows a mock to pass an\n<a class=\"reference internal\" href=\"functions.html#isinstance\" title=\"isinstance\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">isinstance()</span></code></a> check without forcing you to use a spec:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"vm\">__class__</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"nb\">dict</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.NonCallableMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">NonCallableMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">wraps</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.NonCallableMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A non-callable version of <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>. The constructor parameters have the same\nmeaning of <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>, with the exception of <em>return_value</em> and <em>side_effect</em>\nwhich have no meaning on a non-callable mock.</p>\n</dd></dl>\n\n<p>Mock objects that use a class or an instance as a <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec</span></code> or\n<code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec_set</span></code> are able to pass <a class=\"reference internal\" href=\"functions.html#isinstance\" title=\"isinstance\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">isinstance()</span></code></a> tests:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">SomeClass</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"n\">SomeClass</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec_set</span><span class=\"o\">=</span><span class=\"n\">SomeClass</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"n\">SomeClass</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>The <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> classes have support for mocking magic methods. See <a class=\"reference internal\" href=\"#magic-methods\"><span class=\"std std-ref\">magic\nmethods</span></a> for the full details.</p>\n<p>The mock classes and the <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> decorators all take arbitrary keyword\narguments for configuration. For the <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> decorators the keywords are\npassed to the constructor of the mock being created. The keyword arguments\nare for configuring attributes of the mock:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">attribute</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"o\">=</span><span class=\"s1\">&#39;fish&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">attribute</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">other</span>\n<span class=\"go\">&#39;fish&#39;</span>\n</pre></div>\n</div>\n<p>The return value and side effect of child mocks can be set in the same way,\nusing dotted notation. As you can’t use dotted names directly in a call you\nhave to create a dictionary and unpack it using <code class=\"docutils literal notranslate\"><span class=\"pre\">**</span></code>:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;method.return_value&#39;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;other.side_effect&#39;</span><span class=\"p\">:</span> <span class=\"ne\">KeyError</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">some_attribute</span><span class=\"o\">=</span><span class=\"s1\">&#39;eggs&#39;</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">attrs</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">some_attribute</span>\n<span class=\"go\">&#39;eggs&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>\n</pre></div>\n</div>\n<p>A callable mock which was created with a <em>spec</em> (or a <em>spec_set</em>) will\nintrospect the specification object’s signature when matching calls to\nthe mock.  Therefore, it can match the actual call’s arguments regardless\nof whether they were passed positionally or by name:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">f</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"p\">):</span> <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">f</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;Mock name=&#39;mock()&#39; id=&#39;140161580456576&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>This applies to <a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_with\" title=\"unittest.mock.Mock.assert_called_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_with()</span></code></a>,\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_once_with\" title=\"unittest.mock.Mock.assert_called_once_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_once_with()</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_has_calls\" title=\"unittest.mock.Mock.assert_has_calls\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_has_calls()</span></code></a> and\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_any_call\" title=\"unittest.mock.Mock.assert_any_call\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_any_call()</span></code></a>.  When <a class=\"reference internal\" href=\"#auto-speccing\"><span class=\"std std-ref\">Autospeccing</span></a>, it will also\napply to method calls on the mock object.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.4: </span>Added signature introspection on specced and autospecced mock objects.</p>\n</div>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.PropertyMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">PropertyMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.PropertyMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A mock intended to be used as a <a class=\"reference internal\" href=\"functions.html#property\" title=\"property\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">property</span></code></a>, or other\n<a class=\"reference internal\" href=\"../glossary.html#term-descriptor\"><span class=\"xref std std-term\">descriptor</span></a>, on a class. <a class=\"reference internal\" href=\"#unittest.mock.PropertyMock\" title=\"unittest.mock.PropertyMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PropertyMock</span></code></a> provides\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__get__\" title=\"object.__get__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__get__()</span></code></a> and <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__set__\" title=\"object.__set__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__set__()</span></code></a> methods\nso you can specify a return value when it is fetched.</p>\n<p>Fetching a <a class=\"reference internal\" href=\"#unittest.mock.PropertyMock\" title=\"unittest.mock.PropertyMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PropertyMock</span></code></a> instance from an object calls the mock, with\nno args. Setting it calls the mock with the value being set.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Foo</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"nd\">@property</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">return</span> <span class=\"s1\">&#39;something&#39;</span>\n<span class=\"gp\">... </span>    <span class=\"nd\">@foo</span><span class=\"o\">.</span><span class=\"n\">setter</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Foo.foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">new_callable</span><span class=\"o\">=</span><span class=\"n\">PropertyMock</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">mock_foo</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">mock_foo</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;mockity-mock&#39;</span>\n<span class=\"gp\">... </span>    <span class=\"n\">this_foo</span> <span class=\"o\">=</span> <span class=\"n\">Foo</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">this_foo</span><span class=\"o\">.</span><span class=\"n\">foo</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"n\">this_foo</span><span class=\"o\">.</span><span class=\"n\">foo</span> <span class=\"o\">=</span> <span class=\"mi\">6</span>\n<span class=\"gp\">...</span>\n<span class=\"go\">mockity-mock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_foo</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call(), call(6)]</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<p>Because of the way mock attributes are stored you can’t directly attach a\n<a class=\"reference internal\" href=\"#unittest.mock.PropertyMock\" title=\"unittest.mock.PropertyMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PropertyMock</span></code></a> to a mock object. Instead you can attach it to the mock type\nobject:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">PropertyMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">m</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">foo</span> <span class=\"o\">=</span> <span class=\"n\">p</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">foo</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"admonition caution\">\n<p class=\"admonition-title\">Caution</p>\n<p>If an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a> is raised by <a class=\"reference internal\" href=\"#unittest.mock.PropertyMock\" title=\"unittest.mock.PropertyMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">PropertyMock</span></code></a>,\nit will be interpreted as a missing descriptor and\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__getattr__\" title=\"object.__getattr__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__getattr__()</span></code></a> will be called on the parent mock:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">no_attribute</span> <span class=\"o\">=</span> <span class=\"n\">PropertyMock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"ne\">AttributeError</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">m</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">my_property</span> <span class=\"o\">=</span> <span class=\"n\">no_attribute</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">my_property</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.my_property&#39; id=&#39;140165240345424&#39;&gt;</span>\n</pre></div>\n</div>\n<p>See <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__getattr__\" title=\"object.__getattr__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__getattr__()</span></code></a> for details.</p>\n</div>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">AsyncMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">side_effect</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">return_value</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">DEFAULT</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">wraps</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">unsafe</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>An asynchronous version of <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>. The <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> object will\nbehave so the object is recognized as an async function, and the result of a\ncall is an awaitable.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">inspect</span><span class=\"o\">.</span><span class=\"n\">iscoroutinefunction</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">inspect</span><span class=\"o\">.</span><span class=\"n\">isawaitable</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">())</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>The result of <code class=\"docutils literal notranslate\"><span class=\"pre\">mock()</span></code> is an async function which will have the outcome\nof <code class=\"docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">return_value</span></code> after it has been awaited:</p>\n<ul class=\"simple\">\n<li><p>if <code class=\"docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> is a function, the async function will return the\nresult of that function,</p></li>\n<li><p>if <code class=\"docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> is an exception, the async function will raise the\nexception,</p></li>\n<li><p>if <code class=\"docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> is an iterable, the async function will return the\nnext value of the iterable, however, if the sequence of result is\nexhausted, <code class=\"docutils literal notranslate\"><span class=\"pre\">StopAsyncIteration</span></code> is raised immediately,</p></li>\n<li><p>if <code class=\"docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> is not defined, the async function will return the\nvalue defined by <code class=\"docutils literal notranslate\"><span class=\"pre\">return_value</span></code>, hence, by default, the async function\nreturns a new <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> object.</p></li>\n</ul>\n<p>Setting the <em>spec</em> of a <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> or <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> to an async function\nwill result in a coroutine object being returned after calling.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">async_func</span><span class=\"p\">():</span> <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">async_func</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span>\n<span class=\"go\">&lt;MagicMock spec=&#39;function&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;coroutine object AsyncMockMixin._mock_call at ...&gt;</span>\n</pre></div>\n</div>\n<p>Setting the <em>spec</em> of a <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>, or <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a>\nto a class with asynchronous and synchronous functions will automatically\ndetect the synchronous functions and set them as <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> (if the\nparent mock is <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> or <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>) or <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> (if\nthe parent mock is <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>). All asynchronous functions will be\n<a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">ExampleClass</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">sync_foo</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">... </span>    <span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">async_foo</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">a_mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">(</span><span class=\"n\">ExampleClass</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">a_mock</span><span class=\"o\">.</span><span class=\"n\">sync_foo</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.sync_foo&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">a_mock</span><span class=\"o\">.</span><span class=\"n\">async_foo</span>\n<span class=\"go\">&lt;AsyncMock name=&#39;mock.async_foo&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">ExampleClass</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">sync_foo</span>\n<span class=\"go\">&lt;Mock name=&#39;mock.sync_foo&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">async_foo</span>\n<span class=\"go\">&lt;AsyncMock name=&#39;mock.async_foo&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.8.</span></p>\n</div>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_awaited\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_awaited</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_awaited\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was awaited at least once. Note that this is separate\nfrom the object having been called, the <code class=\"docutils literal notranslate\"><span class=\"pre\">await</span></code> keyword must be used:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"n\">coroutine_mock</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">coroutine_mock</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">coroutine_mock</span> <span class=\"o\">=</span> <span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">called</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected mock to have been awaited.</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"n\">coroutine_mock</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_awaited_once\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_awaited_once</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_awaited_once\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was awaited exactly once.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_once</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_once</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected mock to have been awaited once. Awaited 2 times.</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_awaited_with\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_awaited_with</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_awaited_with\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the last await was with the specified arguments.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">expected await not found.</span>\n<span class=\"x\">Expected: mock(&#39;other&#39;)</span>\n<span class=\"x\">Actual: mock(&#39;foo&#39;, bar=&#39;bar&#39;)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_awaited_once_with\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_awaited_once_with</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_awaited_once_with\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was awaited exactly once and with the specified\narguments.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_awaited_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Expected mock to have been awaited once. Awaited 2 times.</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_any_await\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_any_await</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_any_await\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert the mock has ever been awaited with the specified arguments.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_any_await</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_any_await</span><span class=\"p\">(</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">mock(&#39;other&#39;) await not found</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_has_awaits\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_has_awaits</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">calls</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">any_order</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_has_awaits\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert the mock has been awaited with the specified calls.\nThe <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock.await_args_list\" title=\"unittest.mock.AsyncMock.await_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">await_args_list</span></code></a> list is checked for the awaits.</p>\n<p>If <em>any_order</em> is false then the awaits must be\nsequential. There can be extra calls before or after the\nspecified awaits.</p>\n<p>If <em>any_order</em> is true then the awaits can be in any order, but\nthey must all appear in <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock.await_args_list\" title=\"unittest.mock.AsyncMock.await_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">await_args_list</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">calls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"s2\">&quot;bar&quot;</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_has_awaits</span><span class=\"p\">(</span><span class=\"n\">calls</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"c\">...</span>\n<span class=\"gr\">AssertionError</span>: <span class=\"n\">Awaits not found.</span>\n<span class=\"x\">Expected: [call(&#39;foo&#39;), call(&#39;bar&#39;)]</span>\n<span class=\"x\">Actual: []</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_has_awaits</span><span class=\"p\">(</span><span class=\"n\">calls</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.assert_not_awaited\">\n<span class=\"sig-name descname\"><span class=\"pre\">assert_not_awaited</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.assert_not_awaited\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Assert that the mock was never awaited.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_not_awaited</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.reset_mock\">\n<span class=\"sig-name descname\"><span class=\"pre\">reset_mock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.reset_mock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>See <a class=\"reference internal\" href=\"#unittest.mock.Mock.reset_mock\" title=\"unittest.mock.Mock.reset_mock\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">Mock.reset_mock()</span></code></a>. Also sets <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock.await_count\" title=\"unittest.mock.AsyncMock.await_count\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">await_count</span></code></a> to 0,\n<a class=\"reference internal\" href=\"#unittest.mock.AsyncMock.await_args\" title=\"unittest.mock.AsyncMock.await_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">await_args</span></code></a> to None, and clears the <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock.await_args_list\" title=\"unittest.mock.AsyncMock.await_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">await_args_list</span></code></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.await_count\">\n<span class=\"sig-name descname\"><span class=\"pre\">await_count</span></span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.await_count\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>An integer keeping track of how many times the mock object has been awaited.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_count</span>\n<span class=\"go\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_count</span>\n<span class=\"go\">2</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.await_args\">\n<span class=\"sig-name descname\"><span class=\"pre\">await_args</span></span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.await_args\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This is either <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> (if the mock hasn’t been awaited), or the arguments that\nthe mock was last awaited with. Functions the same as <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.call_args</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args</span>\n<span class=\"go\">call(&#39;foo&#39;)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args</span>\n<span class=\"go\">call(&#39;bar&#39;)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.AsyncMock.await_args_list\">\n<span class=\"sig-name descname\"><span class=\"pre\">await_args_list</span></span><a class=\"headerlink\" href=\"#unittest.mock.AsyncMock.await_args_list\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>This is a list of all the awaits made to the mock object in sequence (so the\nlength of the list is the number of times it has been awaited). Before any\nawaits have been made it is an empty list.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">AsyncMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">await</span> <span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args_list</span>\n<span class=\"go\">[]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args_list</span>\n<span class=\"go\">[call(&#39;foo&#39;)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">asyncio</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">main</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">await_args_list</span>\n<span class=\"go\">[call(&#39;foo&#39;), call(&#39;bar&#39;)]</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</dd></dl>\n\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.ThreadingMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">ThreadingMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">side_effect</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">return_value</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">DEFAULT</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">wraps</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">name</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">unsafe</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"keyword-only-separator o\"><abbr title=\"Keyword-only parameters separator (PEP 3102)\"><span class=\"pre\">*</span></abbr></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">timeout</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">UNSET</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.ThreadingMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A version of <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> for multithreading tests. The\n<a class=\"reference internal\" href=\"#unittest.mock.ThreadingMock\" title=\"unittest.mock.ThreadingMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ThreadingMock</span></code></a> object provides extra methods to wait for a call to\nbe invoked, rather than assert on it immediately.</p>\n<p>The default timeout is specified by the <code class=\"docutils literal notranslate\"><span class=\"pre\">timeout</span></code> argument, or if unset by the\n<a class=\"reference internal\" href=\"#unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\" title=\"unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ThreadingMock.DEFAULT_TIMEOUT</span></code></a> attribute, which defaults to blocking (<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>).</p>\n<p>You can configure the global default timeout by setting <a class=\"reference internal\" href=\"#unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\" title=\"unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ThreadingMock.DEFAULT_TIMEOUT</span></code></a>.</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.ThreadingMock.wait_until_called\">\n<span class=\"sig-name descname\"><span class=\"pre\">wait_until_called</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"keyword-only-separator o\"><abbr title=\"Keyword-only parameters separator (PEP 3102)\"><span class=\"pre\">*</span></abbr></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">timeout</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">UNSET</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.ThreadingMock.wait_until_called\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Waits until the mock is called.</p>\n<p>If a timeout was passed at the creation of the mock or if a timeout\nargument is passed to this function, the function raises an\n<a class=\"reference internal\" href=\"exceptions.html#AssertionError\" title=\"AssertionError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AssertionError</span></code></a> if the call is not performed in time.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">ThreadingMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Thread</span><span class=\"p\">(</span><span class=\"n\">target</span><span class=\"o\">=</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">wait_until_called</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.ThreadingMock.wait_until_any_call_with\">\n<span class=\"sig-name descname\"><span class=\"pre\">wait_until_any_call_with</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.ThreadingMock.wait_until_any_call_with\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Waits until the mock is called with the specified arguments.</p>\n<p>If a timeout was passed at the creation of the mock\nthe function raises an <a class=\"reference internal\" href=\"exceptions.html#AssertionError\" title=\"AssertionError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AssertionError</span></code></a> if the call is not performed in time.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">ThreadingMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Thread</span><span class=\"p\">(</span><span class=\"n\">target</span><span class=\"o\">=</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"s2\">&quot;arg1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;arg2&quot;</span><span class=\"p\">,),</span> <span class=\"n\">kwargs</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;arg&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;thing&quot;</span><span class=\"p\">})</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">wait_until_any_call_with</span><span class=\"p\">(</span><span class=\"s2\">&quot;arg1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;arg2&quot;</span><span class=\"p\">,</span> <span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s2\">&quot;thing&quot;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thread</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\">\n<span class=\"sig-name descname\"><span class=\"pre\">DEFAULT_TIMEOUT</span></span><a class=\"headerlink\" href=\"#unittest.mock.ThreadingMock.DEFAULT_TIMEOUT\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Global default timeout in seconds to create instances of <a class=\"reference internal\" href=\"#unittest.mock.ThreadingMock\" title=\"unittest.mock.ThreadingMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ThreadingMock</span></code></a>.</p>\n</dd></dl>\n\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.13.</span></p>\n</div>\n</dd></dl>\n\n<section id=\"calling\">\n<h3>Calling<a class=\"headerlink\" href=\"#calling\" title=\"Link to this heading\">¶</a></h3>\n<p>Mock objects are callable. The call will return the value set as the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> attribute. The default return value is a new Mock\nobject; it is created the first time the return value is accessed (either\nexplicitly or by calling the Mock) - but it is stored and the same one\nreturned each time.</p>\n<p>Calls made to the object will be recorded in the attributes\nlike <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args_list</span></code></a>.</p>\n<p>If <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> is set then it will be called after the call has\nbeen recorded, so if <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> raises an exception the call is still\nrecorded.</p>\n<p>The simplest way to make a mock raise an exception when called is to make\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> an exception class or instance:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"ne\">IndexError</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">IndexError</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call(1, 2, 3)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"ne\">KeyError</span><span class=\"p\">(</span><span class=\"s1\">&#39;Bang!&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;three&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;four&#39;</span><span class=\"p\">)</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>: <span class=\"n\">&#39;Bang!&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call(1, 2, 3), call(&#39;two&#39;, &#39;three&#39;, &#39;four&#39;)]</span>\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> is a function then whatever that function returns is what\ncalls to the mock return. The <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> function is called with the\nsame arguments as the mock. This allows you to vary the return value of the\ncall dynamically, based on the input:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">value</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"n\">side_effect</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"go\">2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call(1), call(2)]</span>\n</pre></div>\n</div>\n<p>If you want the mock to still return the default return value (a new mock), or\nany set return value, then there are two ways of doing this. Either return\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> from inside <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>, or return <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a>:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">return_value</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"n\">side_effect</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"mi\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">DEFAULT</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"n\">side_effect</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n</pre></div>\n</div>\n<p>To remove a <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>, and return to the default behaviour, set the\n<code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"mi\">6</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">side_effect</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"mi\">3</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"n\">side_effect</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">6</span>\n</pre></div>\n</div>\n<p>The <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> can also be any iterable object. Repeated calls to the mock\nwill return values from the iterable (until the iterable is exhausted and\na <a class=\"reference internal\" href=\"exceptions.html#StopIteration\" title=\"StopIteration\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">StopIteration</span></code></a> is raised):</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">StopIteration</span>\n</pre></div>\n</div>\n<p>If any members of the iterable are exceptions they will be raised instead of\nreturned:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">iterable</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">33</span><span class=\"p\">,</span> <span class=\"ne\">ValueError</span><span class=\"p\">,</span> <span class=\"mi\">66</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">side_effect</span><span class=\"o\">=</span><span class=\"n\">iterable</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">33</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">ValueError</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"go\">66</span>\n</pre></div>\n</div>\n</section>\n<section id=\"deleting-attributes\">\n<span id=\"id2\"></span><h3>Deleting Attributes<a class=\"headerlink\" href=\"#deleting-attributes\" title=\"Link to this heading\">¶</a></h3>\n<p>Mock objects create attributes on demand. This allows them to pretend to be\nobjects of any type.</p>\n<p>You may want a mock object to return <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> to a <a class=\"reference internal\" href=\"functions.html#hasattr\" title=\"hasattr\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">hasattr()</span></code></a> call, or raise an\n<a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a> when an attribute is fetched. You can do this by providing\nan object as a <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec</span></code> for a mock, but that isn’t always convenient.</p>\n<p>You “block” attributes by deleting them. Once deleted, accessing an attribute\nwill raise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"s1\">&#39;m&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">del</span> <span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">m</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">,</span> <span class=\"s1\">&#39;m&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">False</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">del</span> <span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">f</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">f</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">    </span><span class=\"o\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">f</span>\n</pre></div>\n</div>\n</section>\n<section id=\"mock-names-and-the-name-attribute\">\n<h3>Mock names and the name attribute<a class=\"headerlink\" href=\"#mock-names-and-the-name-attribute\" title=\"Link to this heading\">¶</a></h3>\n<p>Since “name” is an argument to the <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> constructor, if you want your\nmock object to have a “name” attribute you can’t just pass it in at creation\ntime. There are two alternatives. One option is to use\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.configure_mock\" title=\"unittest.mock.Mock.configure_mock\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">configure_mock()</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">configure_mock</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_name&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">name</span>\n<span class=\"go\">&#39;my_name&#39;</span>\n</pre></div>\n</div>\n<p>A simpler option is to simply set the “name” attribute after mock creation:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;foo&quot;</span>\n</pre></div>\n</div>\n</section>\n<section id=\"attaching-mocks-as-attributes\">\n<h3>Attaching Mocks as Attributes<a class=\"headerlink\" href=\"#attaching-mocks-as-attributes\" title=\"Link to this heading\">¶</a></h3>\n<p>When you attach a mock as an attribute of another mock (or as the return\nvalue) it becomes a “child” of that mock. Calls to the child are recorded in\nthe <a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> attributes of the\nparent. This is useful for configuring child mocks and then attaching them to\nthe parent, or for attaching mocks to a parent that records all calls to the\nchildren and allows you to make assertions about the order of calls between\nmocks:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">child1</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">child2</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">child1</span> <span class=\"o\">=</span> <span class=\"n\">child1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">child2</span> <span class=\"o\">=</span> <span class=\"n\">child2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">child1</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">child2</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call.child1(1), call.child2(2)]</span>\n</pre></div>\n</div>\n<p>The exception to this is if the mock has a name. This allows you to prevent\nthe “parenting” if for some reason you don’t want it to happen.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">not_a_child</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;not-a-child&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">attribute</span> <span class=\"o\">=</span> <span class=\"n\">not_a_child</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">attribute</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;MagicMock name=&#39;not-a-child()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[]</span>\n</pre></div>\n</div>\n<p>Mocks created for you by <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> are automatically given names. To\nattach mocks that have names to a parent you use the <a class=\"reference internal\" href=\"#unittest.mock.Mock.attach_mock\" title=\"unittest.mock.Mock.attach_mock\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">attach_mock()</span></code></a>\nmethod:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing1</span> <span class=\"o\">=</span> <span class=\"nb\">object</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing2</span> <span class=\"o\">=</span> <span class=\"nb\">object</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.thing1&#39;</span><span class=\"p\">,</span> <span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">child1</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.thing2&#39;</span><span class=\"p\">,</span> <span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">child2</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">attach_mock</span><span class=\"p\">(</span><span class=\"n\">child1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;child1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">attach_mock</span><span class=\"p\">(</span><span class=\"n\">child2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;child2&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"n\">child1</span><span class=\"p\">(</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"n\">child2</span><span class=\"p\">(</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parent</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call.child1(&#39;one&#39;), call.child2(&#39;two&#39;)]</span>\n</pre></div>\n</div>\n<aside class=\"footnote-list brackets\">\n<aside class=\"footnote brackets\" id=\"id3\" role=\"doc-footnote\">\n<span class=\"label\"><span class=\"fn-bracket\">[</span><a role=\"doc-backlink\" href=\"#id1\">1</a><span class=\"fn-bracket\">]</span></span>\n<p>The only exceptions are magic methods and attributes (those that have\nleading and trailing double underscores). Mock doesn’t create these but\ninstead raises an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>. This is because the interpreter\nwill often implicitly request these methods, and gets <em>very</em> confused to\nget a new Mock object when it expects a magic method. If you need magic\nmethod support see <a class=\"reference internal\" href=\"#magic-methods\"><span class=\"std std-ref\">magic methods</span></a>.</p>\n</aside>\n</aside>\n</section>\n</section>\n<section id=\"the-patchers\">\n<h2>The patchers<a class=\"headerlink\" href=\"#the-patchers\" title=\"Link to this heading\">¶</a></h2>\n<p>The patch decorators are used for patching objects only within the scope of\nthe function they decorate. They automatically handle the unpatching for you,\neven if exceptions are raised. All of these functions can also be used in with\nstatements or as class decorators.</p>\n<section id=\"patch\">\n<h3>patch<a class=\"headerlink\" href=\"#patch\" title=\"Link to this heading\">¶</a></h3>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The key is to do the patching in the right namespace. See the section <a class=\"reference internal\" href=\"#id6\">where to patch</a>.</p>\n</div>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.patch\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">patch</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">target</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">DEFAULT</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">create</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autospec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new_callable</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.patch\" title=\"Link to this definition\">¶</a></dt>\n<dd><p><a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> acts as a function decorator, class decorator or a context\nmanager. Inside the body of the function or with statement, the <em>target</em>\nis patched with a <em>new</em> object. When the function/with statement exits\nthe patch is undone.</p>\n<p>If <em>new</em> is omitted, then the target is replaced with an\n<a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> if the patched object is an async function or\na <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> otherwise.\nIf <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> is used as a decorator and <em>new</em> is\nomitted, the created mock is passed in as an extra argument to the\ndecorated function. If <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> is used as a context manager the created\nmock is returned by the context manager.</p>\n<p><em>target</em> should be a string in the form <code class=\"docutils literal notranslate\"><span class=\"pre\">'package.module.ClassName'</span></code>. The\n<em>target</em> is imported and the specified object replaced with the <em>new</em>\nobject, so the <em>target</em> must be importable from the environment you are\ncalling <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> from. The target is imported when the decorated function\nis executed, not at decoration time.</p>\n<p>The <em>spec</em> and <em>spec_set</em> keyword arguments are passed to the <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>\nif patch is creating one for you.</p>\n<p>In addition you can pass <code class=\"docutils literal notranslate\"><span class=\"pre\">spec=True</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">spec_set=True</span></code>, which causes\npatch to pass in the object being mocked as the spec/spec_set object.</p>\n<p><em>new_callable</em> allows you to specify a different class, or callable object,\nthat will be called to create the <em>new</em> object. By default <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a>\nis used for async functions and <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> for the rest.</p>\n<p>A more powerful form of <em>spec</em> is <em>autospec</em>. If you set <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=True</span></code>\nthen the mock will be created with a spec from the object being replaced.\nAll attributes of the mock will also have the spec of the corresponding\nattribute of the object being replaced. Methods and functions being mocked\nwill have their arguments checked and will raise a <a class=\"reference internal\" href=\"exceptions.html#TypeError\" title=\"TypeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">TypeError</span></code></a> if they are\ncalled with the wrong signature. For mocks\nreplacing a class, their return value (the ‘instance’) will have the same\nspec as the class. See the <a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> function and\n<a class=\"reference internal\" href=\"#auto-speccing\"><span class=\"std std-ref\">Autospeccing</span></a>.</p>\n<p>Instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=True</span></code> you can pass <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=some_object</span></code> to use an\narbitrary object as the spec instead of the one being replaced.</p>\n<p>By default <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> will fail to replace attributes that don’t exist.\nIf you pass in <code class=\"docutils literal notranslate\"><span class=\"pre\">create=True</span></code>, and the attribute doesn’t exist, patch will\ncreate the attribute for you when the patched function is called, and delete\nit again after the patched function has exited. This is useful for writing\ntests against attributes that your production code creates at runtime. It is\noff by default because it can be dangerous. With it switched on you can\nwrite passing tests against APIs that don’t actually exist!</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.5: </span>If you are patching builtins in a module then you don’t\nneed to pass <code class=\"docutils literal notranslate\"><span class=\"pre\">create=True</span></code>, it will be added by default.</p>\n</div>\n</div>\n<p>Patch can be used as a <a class=\"reference internal\" href=\"unittest.html#unittest.TestCase\" title=\"unittest.TestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">TestCase</span></code></a> class decorator. It works by\ndecorating each test method in the class. This reduces the boilerplate\ncode when your test methods share a common patchings set. <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> finds\ntests by looking for method names that start with <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>.\nBy default this is <code class=\"docutils literal notranslate\"><span class=\"pre\">'test'</span></code>, which matches the way <a class=\"reference internal\" href=\"unittest.html#module-unittest\" title=\"unittest: Unit testing framework for Python.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest</span></code></a> finds tests.\nYou can specify an alternative prefix by setting <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>.</p>\n<p>Patch can be used as a context manager, with the with statement. Here the\npatching applies to the indented block after the with statement. If you\nuse “as” then the patched object will be bound to the name after the\n“as”; very useful if <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> is creating a mock object for you.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> takes arbitrary keyword arguments. These will be passed to\n<a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> if the patched object is asynchronous, to\n<a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> otherwise or to <em>new_callable</em> if specified.</p>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">patch.dict(...)</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.multiple(...)</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.object(...)</span></code> are\navailable for alternate use-cases.</p>\n</dd></dl>\n\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> as function decorator, creating the mock for you and passing it into\nthe decorated function:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.SomeClass&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">function</span><span class=\"p\">(</span><span class=\"n\">normal_argument</span><span class=\"p\">,</span> <span class=\"n\">mock_class</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">mock_class</span> <span class=\"ow\">is</span> <span class=\"n\">SomeClass</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>Patching a class replaces the class with a <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> <em>instance</em>. If the\nclass is instantiated in the code under test then it will be the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> of the mock that will be used.</p>\n<p>If the class is instantiated multiple times you could use\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> to return a new mock each time. Alternatively you\ncan set the <em>return_value</em> to be anything you want.</p>\n<p>To configure return values on methods of <em>instances</em> on the patched class\nyou must do this on the <a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a>. For example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Class</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">method</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">pass</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Class&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">MockClass</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">instance</span> <span class=\"o\">=</span> <span class=\"n\">MockClass</span><span class=\"o\">.</span><span class=\"n\">return_value</span>\n<span class=\"gp\">... </span>    <span class=\"n\">instance</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;foo&#39;</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">Class</span><span class=\"p\">()</span> <span class=\"ow\">is</span> <span class=\"n\">instance</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">Class</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;foo&#39;</span>\n<span class=\"gp\">...</span>\n</pre></div>\n</div>\n<p>If you use <em>spec</em> or <em>spec_set</em> and <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> is replacing a <em>class</em>, then the\nreturn value of the created mock will have the same spec.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Original</span> <span class=\"o\">=</span> <span class=\"n\">Class</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Class&#39;</span><span class=\"p\">,</span> <span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">MockClass</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">instance</span> <span class=\"o\">=</span> <span class=\"n\">MockClass</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"p\">,</span> <span class=\"n\">Original</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>The <em>new_callable</em> argument is useful where you want to use an alternative\nclass to the default <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> for the created mock. For example, if\nyou wanted a <a class=\"reference internal\" href=\"#unittest.mock.NonCallableMock\" title=\"unittest.mock.NonCallableMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">NonCallableMock</span></code></a> to be used:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"nb\">object</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.thing&#39;</span><span class=\"p\">,</span> <span class=\"n\">new_callable</span><span class=\"o\">=</span><span class=\"n\">NonCallableMock</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">mock_thing</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">thing</span> <span class=\"ow\">is</span> <span class=\"n\">mock_thing</span>\n<span class=\"gp\">... </span>    <span class=\"n\">thing</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">TypeError</span>: <span class=\"n\">&#39;NonCallableMock&#39; object is not callable</span>\n</pre></div>\n</div>\n<p>Another use case might be to replace an object with an <a class=\"reference internal\" href=\"io.html#io.StringIO\" title=\"io.StringIO\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">io.StringIO</span></code></a> instance:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">io</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">StringIO</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">foo</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;Something&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;sys.stdout&#39;</span><span class=\"p\">,</span> <span class=\"n\">new_callable</span><span class=\"o\">=</span><span class=\"n\">StringIO</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">mock_stdout</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"n\">foo</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">mock_stdout</span><span class=\"o\">.</span><span class=\"n\">getvalue</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;Something</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>When <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> is creating a mock for you, it is common that the first thing\nyou need to do is to configure the mock. Some of that configuration can be done\nin the call to patch. Any arbitrary keywords you pass into the call will be\nused to set attributes on the created mock:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.thing&#39;</span><span class=\"p\">,</span> <span class=\"n\">first</span><span class=\"o\">=</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">,</span> <span class=\"n\">second</span><span class=\"o\">=</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span><span class=\"o\">.</span><span class=\"n\">first</span>\n<span class=\"go\">&#39;one&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span><span class=\"o\">.</span><span class=\"n\">second</span>\n<span class=\"go\">&#39;two&#39;</span>\n</pre></div>\n</div>\n<p>As well as attributes on the created mock attributes, like the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>, of child mocks can\nalso be configured. These aren’t syntactically valid to pass in directly as\nkeyword arguments, but a dictionary with these as keys can still be expanded\ninto a <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> call using <code class=\"docutils literal notranslate\"><span class=\"pre\">**</span></code>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;method.return_value&#39;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;other.side_effect&#39;</span><span class=\"p\">:</span> <span class=\"ne\">KeyError</span><span class=\"p\">}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.thing&#39;</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">config</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"go\">3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_thing</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">KeyError</span>\n</pre></div>\n</div>\n<p>By default, attempting to patch a function in a module (or a method or an\nattribute in a class) that does not exist will fail with <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;sys.non_existing_attribute&#39;</span><span class=\"p\">,</span> <span class=\"mi\">42</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">non_existing_attribute</span> <span class=\"o\">==</span> <span class=\"mi\">42</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">&lt;module &#39;sys&#39; (built-in)&gt; does not have the attribute &#39;non_existing_attribute&#39;</span>\n</pre></div>\n</div>\n<p>but adding <code class=\"docutils literal notranslate\"><span class=\"pre\">create=True</span></code> in the call to <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> will make the previous example\nwork as expected:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;sys.non_existing_attribute&#39;</span><span class=\"p\">,</span> <span class=\"mi\">42</span><span class=\"p\">,</span> <span class=\"n\">create</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">mock_stdout</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">non_existing_attribute</span> <span class=\"o\">==</span> <span class=\"mi\">42</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span><a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> now returns an <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> if the target is an async function.</p>\n</div>\n</section>\n<section id=\"patch-object\">\n<h3>patch.object<a class=\"headerlink\" href=\"#patch-object\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.patch.object\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">patch.</span></span><span class=\"sig-name descname\"><span class=\"pre\">object</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">target</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">attribute</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">DEFAULT</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">create</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autospec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new_callable</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.patch.object\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>patch the named member (<em>attribute</em>) on an object (<em>target</em>) with a mock\nobject.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> can be used as a decorator, class decorator or a context\nmanager. Arguments <em>new</em>, <em>spec</em>, <em>create</em>, <em>spec_set</em>, <em>autospec</em> and\n<em>new_callable</em> have the same meaning as for <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>. Like <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>,\n<a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> takes arbitrary keyword arguments for configuring the mock\nobject it creates.</p>\n<p>When used as a class decorator <a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> honours <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>\nfor choosing which methods to wrap.</p>\n</dd></dl>\n\n<p>You can either call <a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> with three arguments or two arguments. The\nthree argument form takes the object to be patched, the attribute name and the\nobject to replace the attribute with.</p>\n<p>When calling with the two argument form you omit the replacement object, and a\nmock is created for you and passed in as an extra argument to the decorated\nfunction:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"p\">(</span><span class=\"n\">SomeClass</span><span class=\"p\">,</span> <span class=\"s1\">&#39;class_method&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">mock_method</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"n\">SomeClass</span><span class=\"o\">.</span><span class=\"n\">class_method</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"n\">mock_method</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p><em>spec</em>, <em>create</em> and the other arguments to <a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> have the same\nmeaning as they do for <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>.</p>\n</section>\n<section id=\"patch-dict\">\n<h3>patch.dict<a class=\"headerlink\" href=\"#patch-dict\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.patch.dict\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">patch.</span></span><span class=\"sig-name descname\"><span class=\"pre\">dict</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">in_dict</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">values</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">()</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">clear</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.patch.dict\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Patch a dictionary, or dictionary like object, and restore the dictionary\nto its original state after the test, where the restored dictionary is a\ncopy of the dictionary as it was before the test.</p>\n<p><em>in_dict</em> can be a dictionary or a mapping like container. If it is a\nmapping then it must at least support getting, setting and deleting items\nplus iterating over keys.</p>\n<p><em>in_dict</em> can also be a string specifying the name of the dictionary, which\nwill then be fetched by importing it.</p>\n<p><em>values</em> can be a dictionary of values to set in the dictionary. <em>values</em>\ncan also be an iterable of <code class=\"docutils literal notranslate\"><span class=\"pre\">(key,</span> <span class=\"pre\">value)</span></code> pairs.</p>\n<p>If <em>clear</em> is true then the dictionary will be cleared before the new\nvalues are set.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> can also be called with arbitrary keyword arguments to set\nvalues in the dictionary.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span><a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> now returns the patched dictionary when used as a context\nmanager.</p>\n</div>\n</dd></dl>\n\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> can be used as a context manager, decorator or class\ndecorator:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">foo</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"n\">foo</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">})</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">}</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"p\">{}</span>\n</pre></div>\n</div>\n<p>When used as a class decorator <a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> honours\n<code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code> (default to <code class=\"docutils literal notranslate\"><span class=\"pre\">'test'</span></code>) for choosing which methods to wrap:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">unittest</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">patch</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"s1\">&#39;os.environ&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">})</span>\n<span class=\"gp\">... </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">TestSample</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_sample</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">],</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If you want to use a different prefix for your test, you can inform the\npatchers of the different prefix by setting <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>. For\nmore details about how to change the value of see <a class=\"reference internal\" href=\"#test-prefix\"><span class=\"std std-ref\">TEST_PREFIX</span></a>.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> can be used to add members to a dictionary, or simply let a test\nchange a dictionary, and ensure the dictionary is restored when the test\nends.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">foo</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"n\">foo</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">})</span> <span class=\"k\">as</span> <span class=\"n\">patched_foo</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">}</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">patched_foo</span> <span class=\"o\">==</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">}</span>\n<span class=\"gp\">... </span>    <span class=\"c1\"># You can add, update or delete keys of foo (or patched_foo, it&#39;s the same dict)</span>\n<span class=\"gp\">... </span>    <span class=\"n\">patched_foo</span><span class=\"p\">[</span><span class=\"s1\">&#39;spam&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;eggs&#39;</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"p\">{}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">patched_foo</span> <span class=\"o\">==</span> <span class=\"p\">{}</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"s1\">&#39;os.environ&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;newvalue&#39;</span><span class=\"p\">}):</span>\n<span class=\"gp\">... </span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s1\">&#39;newkey&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">...</span>\n<span class=\"go\">newvalue</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"s1\">&#39;newkey&#39;</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span>\n</pre></div>\n</div>\n<p>Keywords can be used in the <a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> call to set values in the dictionary:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mymodule</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mymodule</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;fish&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"s1\">&#39;sys.modules&#39;</span><span class=\"p\">,</span> <span class=\"n\">mymodule</span><span class=\"o\">=</span><span class=\"n\">mymodule</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">mymodule</span>\n<span class=\"gp\">... </span>    <span class=\"n\">mymodule</span><span class=\"o\">.</span><span class=\"n\">function</span><span class=\"p\">(</span><span class=\"s1\">&#39;some&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;args&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"go\">&#39;fish&#39;</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> can be used with dictionary like objects that aren’t actually\ndictionaries. At the very minimum they must support item getting, setting,\ndeleting and either iteration or membership test. This corresponds to the\nmagic methods <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__getitem__\" title=\"object.__getitem__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__getitem__()</span></code></a>, <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__setitem__\" title=\"object.__setitem__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__setitem__()</span></code></a>,\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__delitem__\" title=\"object.__delitem__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__delitem__()</span></code></a> and either <a class=\"reference internal\" href=\"stdtypes.html#container.__iter__\" title=\"container.__iter__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__iter__()</span></code></a> or\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__contains__\" title=\"object.__contains__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__contains__()</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Container</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">values</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__getitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"n\">name</span><span class=\"p\">]</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__setitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">value</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__delitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">del</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"n\">name</span><span class=\"p\">]</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__iter__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">return</span> <span class=\"nb\">iter</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">Container</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span><span class=\"p\">[</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">dict</span><span class=\"p\">(</span><span class=\"n\">thing</span><span class=\"p\">,</span> <span class=\"n\">one</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">two</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">thing</span><span class=\"p\">[</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">2</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">thing</span><span class=\"p\">[</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">3</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">thing</span><span class=\"p\">[</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"mi\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">thing</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n</section>\n<section id=\"patch-multiple\">\n<h3>patch.multiple<a class=\"headerlink\" href=\"#patch-multiple\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.patch.multiple\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">patch.</span></span><span class=\"sig-name descname\"><span class=\"pre\">multiple</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">target</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">create</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">autospec</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">new_callable</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.patch.multiple\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Perform multiple patches in a single call. It takes the object to be\npatched (either as an object or a string to fetch the object by importing)\nand keyword arguments for the patches:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">multiple</span><span class=\"p\">(</span><span class=\"n\">settings</span><span class=\"p\">,</span> <span class=\"n\">FIRST_PATCH</span><span class=\"o\">=</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">,</span> <span class=\"n\">SECOND_PATCH</span><span class=\"o\">=</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">):</span>\n    <span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>Use <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> as the value if you want <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> to create\nmocks for you. In this case the created mocks are passed into a decorated\nfunction by keyword, and a dictionary is returned when <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> is\nused as a context manager.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> can be used as a decorator, class decorator or a context\nmanager. The arguments <em>spec</em>, <em>spec_set</em>, <em>create</em>, <em>autospec</em> and\n<em>new_callable</em> have the same meaning as for <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>. These arguments will\nbe applied to <em>all</em> patches done by <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a>.</p>\n<p>When used as a class decorator <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> honours <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>\nfor choosing which methods to wrap.</p>\n</dd></dl>\n\n<p>If you want <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> to create mocks for you, then you can use\n<a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> as the value. If you use <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> as a decorator\nthen the created mocks are passed into the decorated function by keyword.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"nb\">object</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">other</span> <span class=\"o\">=</span> <span class=\"nb\">object</span><span class=\"p\">()</span>\n\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">multiple</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">,</span> <span class=\"n\">thing</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_function</span><span class=\"p\">(</span><span class=\"n\">thing</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">thing</span><span class=\"p\">,</span> <span class=\"n\">MagicMock</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">other</span><span class=\"p\">,</span> <span class=\"n\">MagicMock</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test_function</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> can be nested with other <code class=\"docutils literal notranslate\"><span class=\"pre\">patch</span></code> decorators, but put arguments\npassed by keyword <em>after</em> any of the standard arguments created by <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;sys.exit&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">multiple</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">,</span> <span class=\"n\">thing</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_function</span><span class=\"p\">(</span><span class=\"n\">mock_exit</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"p\">,</span> <span class=\"n\">thing</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"s1\">&#39;other&#39;</span> <span class=\"ow\">in</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"n\">other</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"s1\">&#39;thing&#39;</span> <span class=\"ow\">in</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"n\">thing</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"s1\">&#39;exit&#39;</span> <span class=\"ow\">in</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"n\">mock_exit</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test_function</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"#unittest.mock.patch.multiple\" title=\"unittest.mock.patch.multiple\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.multiple()</span></code></a> is used as a context manager, the value returned by the\ncontext manager is a dictionary where created mocks are keyed by name:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">multiple</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">,</span> <span class=\"n\">thing</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">,</span> <span class=\"n\">other</span><span class=\"o\">=</span><span class=\"n\">DEFAULT</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">values</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"s1\">&#39;other&#39;</span> <span class=\"ow\">in</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"s1\">&#39;thing&#39;</span> <span class=\"ow\">in</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"s1\">&#39;thing&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">values</span><span class=\"p\">[</span><span class=\"s1\">&#39;thing&#39;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">thing</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">values</span><span class=\"p\">[</span><span class=\"s1\">&#39;other&#39;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">other</span>\n<span class=\"gp\">...</span>\n</pre></div>\n</div>\n</section>\n<section id=\"patch-methods-start-and-stop\">\n<span id=\"start-and-stop\"></span><h3>patch methods: start and stop<a class=\"headerlink\" href=\"#patch-methods-start-and-stop\" title=\"Link to this heading\">¶</a></h3>\n<p>All the patchers have <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">start()</span></code> and <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">stop()</span></code> methods. These make it simpler to do\npatching in <code class=\"docutils literal notranslate\"><span class=\"pre\">setUp</span></code> methods or where you want to do multiple patches without\nnesting decorators or with statements.</p>\n<p>To use them call <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> or <a class=\"reference internal\" href=\"#unittest.mock.patch.dict\" title=\"unittest.mock.patch.dict\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.dict()</span></code></a> as\nnormal and keep a reference to the returned <code class=\"docutils literal notranslate\"><span class=\"pre\">patcher</span></code> object. You can then\ncall <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">start()</span></code> to put the patch in place and <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">stop()</span></code> to undo it.</p>\n<p>If you are using <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> to create a mock for you then it will be returned by\nthe call to <code class=\"docutils literal notranslate\"><span class=\"pre\">patcher.start</span></code>.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;package.module.ClassName&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">package</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">module</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">original</span> <span class=\"o\">=</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">new_mock</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">original</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName</span> <span class=\"ow\">is</span> <span class=\"n\">new_mock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName</span> <span class=\"ow\">is</span> <span class=\"n\">original</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">ClassName</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">new_mock</span>\n</pre></div>\n</div>\n<p>A typical use case for this might be for doing multiple patches in the <code class=\"docutils literal notranslate\"><span class=\"pre\">setUp</span></code>\nmethod of a <a class=\"reference internal\" href=\"unittest.html#unittest.TestCase\" title=\"unittest.TestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">TestCase</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyTest</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">setUp</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher1</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;package.module.Class1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher2</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;package.module.Class2&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass1</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher1</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass2</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher2</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">tearDown</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher1</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">patcher2</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_something</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">assert</span> <span class=\"n\">package</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Class1</span> <span class=\"ow\">is</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass1</span>\n<span class=\"gp\">... </span>        <span class=\"k\">assert</span> <span class=\"n\">package</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Class2</span> <span class=\"ow\">is</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass2</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">MyTest</span><span class=\"p\">(</span><span class=\"s1\">&#39;test_something&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"admonition caution\">\n<p class=\"admonition-title\">Caution</p>\n<p>If you use this technique you must ensure that the patching is “undone” by\ncalling <code class=\"docutils literal notranslate\"><span class=\"pre\">stop</span></code>. This can be fiddlier than you might think, because if an\nexception is raised in the <code class=\"docutils literal notranslate\"><span class=\"pre\">setUp</span></code> then <code class=\"docutils literal notranslate\"><span class=\"pre\">tearDown</span></code> is not called.\n<a class=\"reference internal\" href=\"unittest.html#unittest.TestCase.addCleanup\" title=\"unittest.TestCase.addCleanup\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">unittest.TestCase.addCleanup()</span></code></a> makes this easier:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyTest</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">setUp</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;package.module.Class&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">addCleanup</span><span class=\"p\">(</span><span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">stop</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_something</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"k\">assert</span> <span class=\"n\">package</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Class</span> <span class=\"ow\">is</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">MockClass</span>\n<span class=\"gp\">...</span>\n</pre></div>\n</div>\n<p>As an added bonus you no longer need to keep a reference to the <code class=\"docutils literal notranslate\"><span class=\"pre\">patcher</span></code>\nobject.</p>\n</div>\n<p>It is also possible to stop all patches which have been started by using\n<a class=\"reference internal\" href=\"#unittest.mock.patch.stopall\" title=\"unittest.mock.patch.stopall\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.stopall()</span></code></a>.</p>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.patch.stopall\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">patch.</span></span><span class=\"sig-name descname\"><span class=\"pre\">stopall</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.patch.stopall\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Stop all active patches. Only stops patches started with <code class=\"docutils literal notranslate\"><span class=\"pre\">start</span></code>.</p>\n</dd></dl>\n\n</section>\n<section id=\"patch-builtins\">\n<span id=\"id4\"></span><h3>patch builtins<a class=\"headerlink\" href=\"#patch-builtins\" title=\"Link to this heading\">¶</a></h3>\n<p>You can patch any builtins within a module. The following example patches\nbuiltin <a class=\"reference internal\" href=\"functions.html#ord\" title=\"ord\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">ord()</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.ord&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">mock_ord</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"n\">mock_ord</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"mi\">101</span>\n<span class=\"gp\">... </span>    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">))</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">test</span><span class=\"p\">()</span>\n<span class=\"go\">101</span>\n</pre></div>\n</div>\n</section>\n<section id=\"test-prefix\">\n<span id=\"id5\"></span><h3>TEST_PREFIX<a class=\"headerlink\" href=\"#test-prefix\" title=\"Link to this heading\">¶</a></h3>\n<p>All of the patchers can be used as class decorators. When used in this way\nthey wrap every test method on the class. The patchers recognise methods that\nstart with <code class=\"docutils literal notranslate\"><span class=\"pre\">'test'</span></code> as being test methods. This is the same way that the\n<a class=\"reference internal\" href=\"unittest.html#unittest.TestLoader\" title=\"unittest.TestLoader\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">unittest.TestLoader</span></code></a> finds test methods by default.</p>\n<p>It is possible that you want to use a different prefix for your tests. You can\ninform the patchers of the different prefix by setting <code class=\"docutils literal notranslate\"><span class=\"pre\">patch.TEST_PREFIX</span></code>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patch</span><span class=\"o\">.</span><span class=\"n\">TEST_PREFIX</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;foo&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"mi\">3</span>\n<span class=\"gp\">&gt;&gt;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.value&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;not three&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Thing</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">foo_one</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">foo_two</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Thing</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">foo_one</span><span class=\"p\">()</span>\n<span class=\"go\">not three</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">Thing</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">foo_two</span><span class=\"p\">()</span>\n<span class=\"go\">not three</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">value</span>\n<span class=\"go\">3</span>\n</pre></div>\n</div>\n</section>\n<section id=\"nesting-patch-decorators\">\n<h3>Nesting Patch Decorators<a class=\"headerlink\" href=\"#nesting-patch-decorators\" title=\"Link to this heading\">¶</a></h3>\n<p>If you want to perform multiple patches then you can simply stack up the\ndecorators.</p>\n<p>You can stack up multiple patch decorators using this pattern:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"p\">(</span><span class=\"n\">SomeClass</span><span class=\"p\">,</span> <span class=\"s1\">&#39;class_method&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"nd\">@patch</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"p\">(</span><span class=\"n\">SomeClass</span><span class=\"p\">,</span> <span class=\"s1\">&#39;static_method&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test</span><span class=\"p\">(</span><span class=\"n\">mock1</span><span class=\"p\">,</span> <span class=\"n\">mock2</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">SomeClass</span><span class=\"o\">.</span><span class=\"n\">static_method</span> <span class=\"ow\">is</span> <span class=\"n\">mock1</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">SomeClass</span><span class=\"o\">.</span><span class=\"n\">class_method</span> <span class=\"ow\">is</span> <span class=\"n\">mock2</span>\n<span class=\"gp\">... </span>    <span class=\"n\">SomeClass</span><span class=\"o\">.</span><span class=\"n\">static_method</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"n\">SomeClass</span><span class=\"o\">.</span><span class=\"n\">class_method</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"n\">mock1</span><span class=\"p\">,</span> <span class=\"n\">mock2</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock1</span><span class=\"p\">,</span> <span class=\"n\">mock2</span> <span class=\"o\">=</span> <span class=\"n\">test</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock1</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock2</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Note that the decorators are applied from the bottom upwards. This is the\nstandard way that Python applies decorators. The order of the created mocks\npassed into your test function matches this order.</p>\n</section>\n<section id=\"where-to-patch\">\n<span id=\"id6\"></span><h3>Where to patch<a class=\"headerlink\" href=\"#where-to-patch\" title=\"Link to this heading\">¶</a></h3>\n<p><a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> works by (temporarily) changing the object that a <em>name</em> points to with\nanother one. There can be many names pointing to any individual object, so\nfor patching to work you must ensure that you patch the name used by the system\nunder test.</p>\n<p>The basic principle is that you patch where an object is <em>looked up</em>, which\nis not necessarily the same place as where it is defined. A couple of\nexamples will help to clarify this.</p>\n<p>Imagine we have a project that we want to test with the following structure:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">a</span><span class=\"o\">.</span><span class=\"n\">py</span>\n    <span class=\"o\">-&gt;</span> <span class=\"n\">Defines</span> <span class=\"n\">SomeClass</span>\n\n<span class=\"n\">b</span><span class=\"o\">.</span><span class=\"n\">py</span>\n    <span class=\"o\">-&gt;</span> <span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">a</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">SomeClass</span>\n    <span class=\"o\">-&gt;</span> <span class=\"n\">some_function</span> <span class=\"n\">instantiates</span> <span class=\"n\">SomeClass</span>\n</pre></div>\n</div>\n<p>Now we want to test <code class=\"docutils literal notranslate\"><span class=\"pre\">some_function</span></code> but we want to mock out <code class=\"docutils literal notranslate\"><span class=\"pre\">SomeClass</span></code> using\n<a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>. The problem is that when we import module b, which we will have to\ndo when it imports <code class=\"docutils literal notranslate\"><span class=\"pre\">SomeClass</span></code> from module a. If we use <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> to mock out\n<code class=\"docutils literal notranslate\"><span class=\"pre\">a.SomeClass</span></code> then it will have no effect on our test; module b already has a\nreference to the <em>real</em> <code class=\"docutils literal notranslate\"><span class=\"pre\">SomeClass</span></code> and it looks like our patching had no\neffect.</p>\n<p>The key is to patch out <code class=\"docutils literal notranslate\"><span class=\"pre\">SomeClass</span></code> where it is used (or where it is looked up).\nIn this case <code class=\"docutils literal notranslate\"><span class=\"pre\">some_function</span></code> will actually look up <code class=\"docutils literal notranslate\"><span class=\"pre\">SomeClass</span></code> in module b,\nwhere we have imported it. The patching should look like:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;b.SomeClass&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>However, consider the alternative scenario where instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">from</span> <span class=\"pre\">a</span> <span class=\"pre\">import</span>\n<span class=\"pre\">SomeClass</span></code> module b does <code class=\"docutils literal notranslate\"><span class=\"pre\">import</span> <span class=\"pre\">a</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">some_function</span></code> uses <code class=\"docutils literal notranslate\"><span class=\"pre\">a.SomeClass</span></code>. Both\nof these import forms are common. In this case the class we want to patch is\nbeing looked up in the module and so we have to patch <code class=\"docutils literal notranslate\"><span class=\"pre\">a.SomeClass</span></code> instead:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;a.SomeClass&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"patching-descriptors-and-proxy-objects\">\n<h3>Patching Descriptors and Proxy Objects<a class=\"headerlink\" href=\"#patching-descriptors-and-proxy-objects\" title=\"Link to this heading\">¶</a></h3>\n<p>Both <a class=\"reference internal\" href=\"#patch\">patch</a> and <a class=\"reference internal\" href=\"#patch-object\">patch.object</a> correctly patch and restore descriptors: class\nmethods, static methods and properties. You should patch these on the <em>class</em>\nrather than an instance. They also work with <em>some</em> objects\nthat proxy attribute access, like the <a class=\"reference external\" href=\"https://web.archive.org/web/20200603181648/http://www.voidspace.org.uk/python/weblog/arch_d7_2010_12_04.shtml#e1198\">django settings object</a>.</p>\n</section>\n</section>\n<section id=\"magicmock-and-magic-method-support\">\n<h2>MagicMock and magic method support<a class=\"headerlink\" href=\"#magicmock-and-magic-method-support\" title=\"Link to this heading\">¶</a></h2>\n<section id=\"mocking-magic-methods\">\n<span id=\"magic-methods\"></span><h3>Mocking Magic Methods<a class=\"headerlink\" href=\"#mocking-magic-methods\" title=\"Link to this heading\">¶</a></h3>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> supports mocking the Python protocol methods, also known as\n<a class=\"reference internal\" href=\"../glossary.html#term-magic-method\"><span class=\"xref std std-term\">“magic methods”</span></a>. This allows mock objects to replace\ncontainers or other objects that implement Python protocols.</p>\n<p>Because magic methods are looked up differently from normal methods <a class=\"footnote-reference brackets\" href=\"#id9\" id=\"id7\" role=\"doc-noteref\"><span class=\"fn-bracket\">[</span>2<span class=\"fn-bracket\">]</span></a>, this\nsupport has been specially implemented. This means that only specific magic\nmethods are supported. The supported list includes <em>almost</em> all of them. If\nthere are any missing that you need please let us know.</p>\n<p>You mock magic methods by setting the method you are interested in to a function\nor a mock instance. If you are using a function then it <em>must</em> take <code class=\"docutils literal notranslate\"><span class=\"pre\">self</span></code> as\nthe first argument <a class=\"footnote-reference brackets\" href=\"#id10\" id=\"id8\" role=\"doc-noteref\"><span class=\"fn-bracket\">[</span>3<span class=\"fn-bracket\">]</span></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__str__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">return</span> <span class=\"s1\">&#39;fooble&#39;</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span> <span class=\"o\">=</span> <span class=\"fm\">__str__</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">&#39;fooble&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__str__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;fooble&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">&#39;fooble&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__iter__</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"nb\">iter</span><span class=\"p\">([]))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[]</span>\n</pre></div>\n</div>\n<p>One use case for this is for mocking objects used as context managers in a\n<a class=\"reference internal\" href=\"../reference/compound_stmts.html#with\"><code class=\"xref std std-keyword docutils literal notranslate\"><span class=\"pre\">with</span></code></a> statement:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__enter__</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__exit__</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">mock</span> <span class=\"k\">as</span> <span class=\"n\">m</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">assert</span> <span class=\"n\">m</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;foo&#39;</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__enter__</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__exit__</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Calls to magic methods do not appear in <a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a>, but they\nare recorded in <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a>.</p>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>If you use the <em>spec</em> keyword argument to create a mock then attempting to\nset a magic method that isn’t in the spec will raise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p>\n</div>\n<p>The full list of supported magic methods is:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__hash__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__sizeof__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__repr__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__str__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__dir__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__format__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__subclasses__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__round__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__floor__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__trunc__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__ceil__</span></code></p></li>\n<li><p>Comparisons: <code class=\"docutils literal notranslate\"><span class=\"pre\">__lt__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__gt__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__le__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__ge__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__eq__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__ne__</span></code></p></li>\n<li><p>Container methods: <code class=\"docutils literal notranslate\"><span class=\"pre\">__getitem__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__setitem__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__delitem__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__contains__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__len__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__iter__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__reversed__</span></code>\nand <code class=\"docutils literal notranslate\"><span class=\"pre\">__missing__</span></code></p></li>\n<li><p>Context manager: <code class=\"docutils literal notranslate\"><span class=\"pre\">__enter__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__exit__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__aenter__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__aexit__</span></code></p></li>\n<li><p>Unary numeric methods: <code class=\"docutils literal notranslate\"><span class=\"pre\">__neg__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__pos__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__invert__</span></code></p></li>\n<li><p>The numeric methods (including right hand and in-place variants):\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__add__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__sub__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__mul__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__matmul__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__truediv__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__floordiv__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__mod__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__divmod__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__lshift__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__rshift__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__and__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__xor__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__or__</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">__pow__</span></code></p></li>\n<li><p>Numeric conversion methods: <code class=\"docutils literal notranslate\"><span class=\"pre\">__complex__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__int__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__float__</span></code>\nand <code class=\"docutils literal notranslate\"><span class=\"pre\">__index__</span></code></p></li>\n<li><p>Descriptor methods: <code class=\"docutils literal notranslate\"><span class=\"pre\">__get__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__set__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__delete__</span></code></p></li>\n<li><p>Pickling: <code class=\"docutils literal notranslate\"><span class=\"pre\">__reduce__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__reduce_ex__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__getinitargs__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__getnewargs__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__getstate__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__setstate__</span></code></p></li>\n<li><p>File system path representation: <code class=\"docutils literal notranslate\"><span class=\"pre\">__fspath__</span></code></p></li>\n<li><p>Asynchronous iteration methods: <code class=\"docutils literal notranslate\"><span class=\"pre\">__aiter__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__anext__</span></code></p></li>\n</ul>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span>Added support for <a class=\"reference internal\" href=\"os.html#os.PathLike.__fspath__\" title=\"os.PathLike.__fspath__\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">os.PathLike.__fspath__()</span></code></a>.</p>\n</div>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span>Added support for <code class=\"docutils literal notranslate\"><span class=\"pre\">__aenter__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__aexit__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__aiter__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__anext__</span></code>.</p>\n</div>\n<p>The following methods exist but are <em>not</em> supported as they are either in use\nby mock, can’t be set dynamically, or can cause problems:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__getattr__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__setattr__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__init__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__new__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__prepare__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__instancecheck__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__subclasscheck__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__del__</span></code></p></li>\n</ul>\n</section>\n<section id=\"magic-mock\">\n<h3>Magic Mock<a class=\"headerlink\" href=\"#magic-mock\" title=\"Link to this heading\">¶</a></h3>\n<p>There are two <code class=\"docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code> variants: <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.NonCallableMagicMock\" title=\"unittest.mock.NonCallableMagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">NonCallableMagicMock</span></code></a>.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.MagicMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">MagicMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kw</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.MagicMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p><code class=\"docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code> is a subclass of <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> with default implementations\nof most of the <a class=\"reference internal\" href=\"../glossary.html#term-magic-method\"><span class=\"xref std std-term\">magic methods</span></a>. You can use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code> without having to configure the magic methods yourself.</p>\n<p>The constructor parameters have the same meaning as for <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>.</p>\n<p>If you use the <em>spec</em> or <em>spec_set</em> arguments then <em>only</em> magic methods\nthat exist in the spec will be created.</p>\n</dd></dl>\n\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.NonCallableMagicMock\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">NonCallableMagicMock</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kw</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.NonCallableMagicMock\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A non-callable version of <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>.</p>\n<p>The constructor parameters have the same meaning as for\n<a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a>, with the exception of <em>return_value</em> and\n<em>side_effect</em> which have no meaning on a non-callable mock.</p>\n</dd></dl>\n\n<p>The magic methods are setup with <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> objects, so you can configure them\nand use them in the usual way:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;fish&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__setitem__</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"s1\">&#39;fish&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__getitem__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;result&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n<span class=\"go\">&#39;result&#39;</span>\n</pre></div>\n</div>\n<p>By default many of the protocol methods are required to return objects of a\nspecific type. These methods are preconfigured with a default return value, so\nthat they can be used without you having to do anything if you aren’t interested\nin the return value. You can still <em>set</em> the return value manually if you want\nto change the default.</p>\n<p>Methods and their defaults:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__lt__</span></code>: <a class=\"reference internal\" href=\"constants.html#NotImplemented\" title=\"NotImplemented\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">NotImplemented</span></code></a></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__gt__</span></code>: <code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">NotImplemented</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__le__</span></code>: <code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">NotImplemented</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__ge__</span></code>: <code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">NotImplemented</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__int__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__contains__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__len__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__iter__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">iter([])</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__exit__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__aexit__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__complex__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">1j</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__float__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">1.0</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__bool__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__index__</span></code>: <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__hash__</span></code>: default hash for the mock</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__str__</span></code>: default str for the mock</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__sizeof__</span></code>: default sizeof for the mock</p></li>\n</ul>\n<p>For example:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">0</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">object</span><span class=\"p\">()</span> <span class=\"ow\">in</span> <span class=\"n\">mock</span>\n<span class=\"go\">False</span>\n</pre></div>\n</div>\n<p>The two equality methods, <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__eq__()</span></code> and <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__ne__()</span></code>, are special.\nThey do the default equality comparison on identity, using the\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> attribute, unless you change their return value to\nreturn something else:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">MagicMock</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"mi\">3</span>\n<span class=\"go\">False</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">MagicMock</span><span class=\"p\">()</span> <span class=\"o\">!=</span> <span class=\"mi\">3</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__eq__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">==</span> <span class=\"mi\">3</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>The return value of <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">MagicMock.__iter__()</span></code> can be any iterable object and isn’t\nrequired to be an iterator:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__iter__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>\n</pre></div>\n</div>\n<p>If the return value <em>is</em> an iterator, then iterating over it once will consume\nit and subsequent iterations will result in an empty list:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"fm\">__iter__</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"nb\">iter</span><span class=\"p\">([</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;b&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;c&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"go\">[]</span>\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code> has all of the supported magic methods configured except for some\nof the obscure and obsolete ones. You can still set these up if you want.</p>\n<p>Magic methods that are supported but not setup by default in <code class=\"docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code> are:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__subclasses__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__dir__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__format__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__get__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__set__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__delete__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__reversed__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__missing__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__reduce__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__reduce_ex__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__getinitargs__</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">__getnewargs__</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">__getstate__</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">__setstate__</span></code></p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">__getformat__</span></code></p></li>\n</ul>\n<aside class=\"footnote-list brackets\">\n<aside class=\"footnote brackets\" id=\"id9\" role=\"doc-footnote\">\n<span class=\"label\"><span class=\"fn-bracket\">[</span><a role=\"doc-backlink\" href=\"#id7\">2</a><span class=\"fn-bracket\">]</span></span>\n<p>Magic methods <em>should</em> be looked up on the class rather than the\ninstance. Different versions of Python are inconsistent about applying this\nrule. The supported protocol methods should work with all supported versions\nof Python.</p>\n</aside>\n<aside class=\"footnote brackets\" id=\"id10\" role=\"doc-footnote\">\n<span class=\"label\"><span class=\"fn-bracket\">[</span><a role=\"doc-backlink\" href=\"#id8\">3</a><span class=\"fn-bracket\">]</span></span>\n<p>The function is basically hooked up to the class, but each <code class=\"docutils literal notranslate\"><span class=\"pre\">Mock</span></code>\ninstance is kept isolated from the others.</p>\n</aside>\n</aside>\n</section>\n</section>\n<section id=\"helpers\">\n<h2>Helpers<a class=\"headerlink\" href=\"#helpers\" title=\"Link to this heading\">¶</a></h2>\n<section id=\"sentinel\">\n<h3>sentinel<a class=\"headerlink\" href=\"#sentinel\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py data\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.sentinel\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">sentinel</span></span><a class=\"headerlink\" href=\"#unittest.mock.sentinel\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">sentinel</span></code> object provides a convenient way of providing unique\nobjects for your tests.</p>\n<p>Attributes are created on demand when you access them by name. Accessing\nthe same attribute will always return the same object. The objects\nreturned have a sensible repr so that test failure messages are readable.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.7: </span>The <code class=\"docutils literal notranslate\"><span class=\"pre\">sentinel</span></code> attributes now preserve their identity when they are\n<a class=\"reference internal\" href=\"copy.html#module-copy\" title=\"copy: Shallow and deep copy operations.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">copied</span></code></a> or <a class=\"reference internal\" href=\"pickle.html#module-pickle\" title=\"pickle: Convert Python objects to streams of bytes and back.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">pickled</span></code></a>.</p>\n</div>\n</dd></dl>\n\n<p>Sometimes when testing you need to test that a specific object is passed as an\nargument to another method, or returned. It can be common to create named\nsentinel objects to test this. <a class=\"reference internal\" href=\"#unittest.mock.sentinel\" title=\"unittest.mock.sentinel\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">sentinel</span></code></a> provides a convenient way of\ncreating and testing the identity of objects like this.</p>\n<p>In this example we monkey patch <code class=\"docutils literal notranslate\"><span class=\"pre\">method</span></code> to return <code class=\"docutils literal notranslate\"><span class=\"pre\">sentinel.some_object</span></code>:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">real</span> <span class=\"o\">=</span> <span class=\"n\">ProductionClass</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">real</span><span class=\"o\">.</span><span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;method&quot;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">real</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"n\">sentinel</span><span class=\"o\">.</span><span class=\"n\">some_object</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">real</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">result</span> <span class=\"ow\">is</span> <span class=\"n\">sentinel</span><span class=\"o\">.</span><span class=\"n\">some_object</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span>\n<span class=\"go\">sentinel.some_object</span>\n</pre></div>\n</div>\n</section>\n<section id=\"default\">\n<h3>DEFAULT<a class=\"headerlink\" href=\"#default\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py data\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.DEFAULT\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">DEFAULT</span></span><a class=\"headerlink\" href=\"#unittest.mock.DEFAULT\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>The <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a> object is a pre-created sentinel (actually\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sentinel.DEFAULT</span></code>). It can be used by <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>\nfunctions to indicate that the normal return value should be used.</p>\n</dd></dl>\n\n</section>\n<section id=\"call\">\n<h3>call<a class=\"headerlink\" href=\"#call\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.call\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">call</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">*</span></span><span class=\"n\"><span class=\"pre\">args</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.call\" title=\"Link to this definition\">¶</a></dt>\n<dd><p><a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">call()</span></code></a> is a helper object for making simpler assertions, for comparing with\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args_list</span></code></a>,\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.method_calls\" title=\"unittest.mock.Mock.method_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">method_calls</span></code></a>. <a class=\"reference internal\" href=\"#unittest.mock.call\" title=\"unittest.mock.call\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">call()</span></code></a> can also be\nused with <a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_has_calls\" title=\"unittest.mock.Mock.assert_has_calls\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_has_calls()</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">call_args_list</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"o\">=</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"o\">=</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">()]</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.call.call_list\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">call.</span></span><span class=\"sig-name descname\"><span class=\"pre\">call_list</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.call.call_list\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>For a call object that represents multiple calls, <a class=\"reference internal\" href=\"#unittest.mock.call.call_list\" title=\"unittest.mock.call.call_list\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">call_list()</span></code></a>\nreturns a list of all the intermediate calls as well as the\nfinal call.</p>\n</dd></dl>\n\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">call_list</span></code> is particularly useful for making assertions on “chained calls”. A\nchained call is multiple calls on a single line of code. This results in\nmultiple entries in <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a> on a mock. Manually constructing\nthe sequence of calls can be tedious.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.call.call_list\" title=\"unittest.mock.call.call_list\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">call_list()</span></code></a> can construct the sequence of calls from the same\nchained call:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)(</span><span class=\"mf\">2.0</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock().method().other()()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span> <span class=\"o\">=</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">method</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">other</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)(</span><span class=\"mf\">2.0</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">call_list</span><span class=\"p\">()</span>\n<span class=\"go\">[call(1),</span>\n<span class=\"go\"> call().method(arg=&#39;foo&#39;),</span>\n<span class=\"go\"> call().method().other(&#39;bar&#39;),</span>\n<span class=\"go\"> call().method().other()(2.0)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span> <span class=\"o\">==</span> <span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">call_list</span><span class=\"p\">()</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p id=\"calls-as-tuples\">A <code class=\"docutils literal notranslate\"><span class=\"pre\">call</span></code> object is either a tuple of (positional args, keyword args) or\n(name, positional args, keyword args) depending on how it was constructed. When\nyou construct them yourself this isn’t particularly interesting, but the <code class=\"docutils literal notranslate\"><span class=\"pre\">call</span></code>\nobjects that are in the <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.call_args</span></code></a>, <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.call_args_list</span></code></a> and\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.mock_calls</span></code></a> attributes can be introspected to get at the individual\narguments they contain.</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">call</span></code> objects in <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.call_args</span></code></a> and <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args_list\" title=\"unittest.mock.Mock.call_args_list\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.call_args_list</span></code></a>\nare two-tuples of (positional args, keyword args) whereas the <code class=\"docutils literal notranslate\"><span class=\"pre\">call</span></code> objects\nin <a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Mock.mock_calls</span></code></a>, along with ones you construct yourself, are\nthree-tuples of (name, positional args, keyword args).</p>\n<p>You can use their “tupleness” to pull out the individual arguments for more\ncomplex introspection and assertions. The positional arguments are a tuple\n(an empty tuple if there are no positional arguments) and the keyword\narguments are a dictionary:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;one&#39;</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"o\">=</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span> <span class=\"o\">=</span> <span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">call_args</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">args</span>\n<span class=\"go\">(1, 2, 3)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">kwargs</span>\n<span class=\"go\">{&#39;arg&#39;: &#39;one&#39;, &#39;arg2&#39;: &#39;two&#39;}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">args</span> <span class=\"ow\">is</span> <span class=\"n\">kall</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span><span class=\"o\">.</span><span class=\"n\">kwargs</span> <span class=\"ow\">is</span> <span class=\"n\">kall</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">foo</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"n\">arg</span><span class=\"o\">=</span><span class=\"s1\">&#39;two&#39;</span><span class=\"p\">,</span> <span class=\"n\">arg2</span><span class=\"o\">=</span><span class=\"s1\">&#39;three&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.foo()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kall</span> <span class=\"o\">=</span> <span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">kwargs</span> <span class=\"o\">=</span> <span class=\"n\">kall</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">name</span>\n<span class=\"go\">&#39;foo&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">args</span>\n<span class=\"go\">(4, 5, 6)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kwargs</span>\n<span class=\"go\">{&#39;arg&#39;: &#39;two&#39;, &#39;arg2&#39;: &#39;three&#39;}</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">name</span> <span class=\"ow\">is</span> <span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n</section>\n<section id=\"create-autospec\">\n<h3>create_autospec<a class=\"headerlink\" href=\"#create-autospec\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.create_autospec\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">create_autospec</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">spec_set</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">instance</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">False</span></span></em>, <em class=\"sig-param\"><span class=\"o\"><span class=\"pre\">**</span></span><span class=\"n\"><span class=\"pre\">kwargs</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.create_autospec\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Create a mock object using another object as a spec. Attributes on the\nmock will use the corresponding attribute on the <em>spec</em> object as their\nspec.</p>\n<p>Functions or methods being mocked will have their arguments checked to\nensure that they are called with the correct signature.</p>\n<p>If <em>spec_set</em> is <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> then attempting to set attributes that don’t exist\non the spec object will raise an <a class=\"reference internal\" href=\"exceptions.html#AttributeError\" title=\"AttributeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">AttributeError</span></code></a>.</p>\n<p>If a class is used as a spec then the return value of the mock (the\ninstance of the class) will have the same spec. You can use a class as the\nspec for an instance object by passing <code class=\"docutils literal notranslate\"><span class=\"pre\">instance=True</span></code>. The returned mock\nwill only be callable if instances of the mock are callable.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> also takes arbitrary keyword arguments that are passed to\nthe constructor of the created mock.</p>\n</dd></dl>\n\n<p>See <a class=\"reference internal\" href=\"#auto-speccing\"><span class=\"std std-ref\">Autospeccing</span></a> for examples of how to use auto-speccing with\n<a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> and the <em>autospec</em> argument to <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a>.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span><a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> now returns an <a class=\"reference internal\" href=\"#unittest.mock.AsyncMock\" title=\"unittest.mock.AsyncMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AsyncMock</span></code></a> if the target is\nan async function.</p>\n</div>\n</section>\n<section id=\"any\">\n<h3>ANY<a class=\"headerlink\" href=\"#any\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py data\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.ANY\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">ANY</span></span><a class=\"headerlink\" href=\"#unittest.mock.ANY\" title=\"Link to this definition\">¶</a></dt>\n<dd></dd></dl>\n\n<p>Sometimes you may need to make assertions about <em>some</em> of the arguments in a\ncall to mock, but either not care about some of the arguments or want to pull\nthem individually out of <a class=\"reference internal\" href=\"#unittest.mock.Mock.call_args\" title=\"unittest.mock.Mock.call_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">call_args</span></code></a> and make more complex\nassertions on them.</p>\n<p>To ignore certain arguments you can pass in objects that compare equal to\n<em>everything</em>. Calls to <a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_with\" title=\"unittest.mock.Mock.assert_called_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_with()</span></code></a> and\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.assert_called_once_with\" title=\"unittest.mock.Mock.assert_called_once_with\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assert_called_once_with()</span></code></a> will then succeed no matter what was\npassed in.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"nb\">object</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"n\">bar</span><span class=\"o\">=</span><span class=\"n\">ANY</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.ANY\" title=\"unittest.mock.ANY\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">ANY</span></code></a> can also be used in comparisons with call lists like\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.mock_calls\" title=\"unittest.mock.Mock.mock_calls\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">mock_calls</span></code></a>:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">MagicMock</span><span class=\"p\">(</span><span class=\"n\">return_value</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span> <span class=\"o\">==</span> <span class=\"p\">[</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"n\">call</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"n\">ANY</span><span class=\"p\">]</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#unittest.mock.ANY\" title=\"unittest.mock.ANY\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">ANY</span></code></a> is not limited to comparisons with call objects and so\ncan also be used in test assertions:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">TestStringMethods</span><span class=\"p\">(</span><span class=\"n\">unittest</span><span class=\"o\">.</span><span class=\"n\">TestCase</span><span class=\"p\">):</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">test_split</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;hello world&#39;</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertEqual</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(),</span> <span class=\"p\">[</span><span class=\"s1\">&#39;hello&#39;</span><span class=\"p\">,</span> <span class=\"n\">ANY</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n</section>\n<section id=\"filter-dir\">\n<h3>FILTER_DIR<a class=\"headerlink\" href=\"#filter-dir\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py data\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.FILTER_DIR\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">FILTER_DIR</span></span><a class=\"headerlink\" href=\"#unittest.mock.FILTER_DIR\" title=\"Link to this definition\">¶</a></dt>\n<dd></dd></dl>\n\n<p><a class=\"reference internal\" href=\"#unittest.mock.FILTER_DIR\" title=\"unittest.mock.FILTER_DIR\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">FILTER_DIR</span></code></a> is a module level variable that controls the way mock objects\nrespond to <a class=\"reference internal\" href=\"functions.html#dir\" title=\"dir\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">dir()</span></code></a>. The default is <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>,\nwhich uses the filtering described below, to only show useful members. If you\ndislike this filtering, or need to switch it off for diagnostic purposes, then\nset <code class=\"docutils literal notranslate\"><span class=\"pre\">mock.FILTER_DIR</span> <span class=\"pre\">=</span> <span class=\"pre\">False</span></code>.</p>\n<p>With filtering on, <code class=\"docutils literal notranslate\"><span class=\"pre\">dir(some_mock)</span></code> shows only useful attributes and will\ninclude any dynamically created attributes that wouldn’t normally be shown.\nIf the mock was created with a <em>spec</em> (or <em>autospec</em> of course) then all the\nattributes from the original are shown, even if they haven’t been accessed\nyet:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">dir</span><span class=\"p\">(</span><span class=\"n\">Mock</span><span class=\"p\">())</span>\n<span class=\"go\">[&#39;assert_any_call&#39;,</span>\n<span class=\"go\"> &#39;assert_called&#39;,</span>\n<span class=\"go\"> &#39;assert_called_once&#39;,</span>\n<span class=\"go\"> &#39;assert_called_once_with&#39;,</span>\n<span class=\"go\"> &#39;assert_called_with&#39;,</span>\n<span class=\"go\"> &#39;assert_has_calls&#39;,</span>\n<span class=\"go\"> &#39;assert_not_called&#39;,</span>\n<span class=\"go\"> &#39;attach_mock&#39;,</span>\n<span class=\"go\"> ...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">urllib</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">dir</span><span class=\"p\">(</span><span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"p\">))</span>\n<span class=\"go\">[&#39;AbstractBasicAuthHandler&#39;,</span>\n<span class=\"go\"> &#39;AbstractDigestAuthHandler&#39;,</span>\n<span class=\"go\"> &#39;AbstractHTTPHandler&#39;,</span>\n<span class=\"go\"> &#39;BaseHandler&#39;,</span>\n<span class=\"go\"> ...</span>\n</pre></div>\n</div>\n<p>Many of the not-very-useful (private to <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> rather than the thing being\nmocked) underscore and double underscore prefixed attributes have been\nfiltered from the result of calling <a class=\"reference internal\" href=\"functions.html#dir\" title=\"dir\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">dir()</span></code></a> on a <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a>. If you dislike this\nbehaviour you can switch it off by setting the module level switch\n<a class=\"reference internal\" href=\"#unittest.mock.FILTER_DIR\" title=\"unittest.mock.FILTER_DIR\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">FILTER_DIR</span></code></a>:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">mock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">FILTER_DIR</span> <span class=\"o\">=</span> <span class=\"kc\">False</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">dir</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">Mock</span><span class=\"p\">())</span>\n<span class=\"go\">[&#39;_NonCallableMock__get_return_value&#39;,</span>\n<span class=\"go\"> &#39;_NonCallableMock__get_side_effect&#39;,</span>\n<span class=\"go\"> &#39;_NonCallableMock__return_value_doc&#39;,</span>\n<span class=\"go\"> &#39;_NonCallableMock__set_return_value&#39;,</span>\n<span class=\"go\"> &#39;_NonCallableMock__set_side_effect&#39;,</span>\n<span class=\"go\"> &#39;__call__&#39;,</span>\n<span class=\"go\"> &#39;__class__&#39;,</span>\n<span class=\"go\"> ...</span>\n</pre></div>\n</div>\n<p>Alternatively you can just use <code class=\"docutils literal notranslate\"><span class=\"pre\">vars(my_mock)</span></code> (instance members) and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">dir(type(my_mock))</span></code> (type members) to bypass the filtering irrespective of\n<a class=\"reference internal\" href=\"#unittest.mock.FILTER_DIR\" title=\"unittest.mock.FILTER_DIR\"><code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">FILTER_DIR</span></code></a>.</p>\n</section>\n<section id=\"mock-open\">\n<h3>mock_open<a class=\"headerlink\" href=\"#mock-open\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.mock_open\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">mock_open</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">mock</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">read_data</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.mock_open\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A helper function to create a mock to replace the use of <a class=\"reference internal\" href=\"functions.html#open\" title=\"open\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">open()</span></code></a>. It works\nfor <a class=\"reference internal\" href=\"functions.html#open\" title=\"open\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">open()</span></code></a> called directly or used as a context manager.</p>\n<p>The <em>mock</em> argument is the mock object to configure. If <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> (the\ndefault) then a <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> will be created for you, with the API limited\nto methods or attributes available on standard file handles.</p>\n<p><em>read_data</em> is a string for the <a class=\"reference internal\" href=\"io.html#io.RawIOBase.read\" title=\"io.RawIOBase.read\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">read()</span></code></a>,\n<a class=\"reference internal\" href=\"io.html#io.IOBase.readline\" title=\"io.IOBase.readline\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">readline()</span></code></a>, and <a class=\"reference internal\" href=\"io.html#io.IOBase.readlines\" title=\"io.IOBase.readlines\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">readlines()</span></code></a> methods\nof the file handle to return.  Calls to those methods will take data from\n<em>read_data</em> until it is depleted.  The mock of these methods is pretty\nsimplistic: every time the <em>mock</em> is called, the <em>read_data</em> is rewound to\nthe start.  If you need more control over the data that you are feeding to\nthe tested code you will need to customize this mock for yourself.  When that\nis insufficient, one of the in-memory filesystem packages on <a class=\"reference external\" href=\"https://pypi.org\">PyPI</a> can offer a realistic filesystem for testing.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.4: </span>Added <a class=\"reference internal\" href=\"io.html#io.IOBase.readline\" title=\"io.IOBase.readline\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">readline()</span></code></a> and <a class=\"reference internal\" href=\"io.html#io.IOBase.readlines\" title=\"io.IOBase.readlines\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">readlines()</span></code></a> support.\nThe mock of <a class=\"reference internal\" href=\"io.html#io.RawIOBase.read\" title=\"io.RawIOBase.read\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">read()</span></code></a> changed to consume <em>read_data</em> rather\nthan returning it on each call.</p>\n</div>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.5: </span><em>read_data</em> is now reset on each call to the <em>mock</em>.</p>\n</div>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.8: </span>Added <a class=\"reference internal\" href=\"stdtypes.html#container.__iter__\" title=\"container.__iter__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__iter__()</span></code></a> to implementation so that iteration\n(such as in for loops) correctly consumes <em>read_data</em>.</p>\n</div>\n</dd></dl>\n\n<p>Using <a class=\"reference internal\" href=\"functions.html#open\" title=\"open\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">open()</span></code></a> as a context manager is a great way to ensure your file handles\nare closed properly and is becoming common:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;/some/path&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;something&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The issue is that even if you mock out the call to <a class=\"reference internal\" href=\"functions.html#open\" title=\"open\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">open()</span></code></a> it is the\n<em>returned object</em> that is used as a context manager (and has <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__enter__\" title=\"object.__enter__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__enter__()</span></code></a> and\n<a class=\"reference internal\" href=\"../reference/datamodel.html#object.__exit__\" title=\"object.__exit__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__exit__()</span></code></a> called).</p>\n<p>Mocking context managers with a <a class=\"reference internal\" href=\"#unittest.mock.MagicMock\" title=\"unittest.mock.MagicMock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">MagicMock</span></code></a> is common enough and fiddly\nenough that a helper function is useful.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span> <span class=\"o\">=</span> <span class=\"n\">mock_open</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.open&#39;</span><span class=\"p\">,</span> <span class=\"n\">m</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">h</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;some stuff&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">mock_calls</span>\n<span class=\"go\">[call(&#39;foo&#39;, &#39;w&#39;),</span>\n<span class=\"go\"> call().__enter__(),</span>\n<span class=\"go\"> call().write(&#39;some stuff&#39;),</span>\n<span class=\"go\"> call().__exit__(None, None, None)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">handle</span> <span class=\"o\">=</span> <span class=\"n\">m</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">handle</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;some stuff&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>And for reading files:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.open&#39;</span><span class=\"p\">,</span> <span class=\"n\">mock_open</span><span class=\"p\">(</span><span class=\"n\">read_data</span><span class=\"o\">=</span><span class=\"s1\">&#39;bibble&#39;</span><span class=\"p\">))</span> <span class=\"k\">as</span> <span class=\"n\">m</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">h</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">()</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">m</span><span class=\"o\">.</span><span class=\"n\">assert_called_once_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">result</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;bibble&#39;</span>\n</pre></div>\n</div>\n</section>\n<section id=\"autospeccing\">\n<span id=\"auto-speccing\"></span><h3>Autospeccing<a class=\"headerlink\" href=\"#autospeccing\" title=\"Link to this heading\">¶</a></h3>\n<p>Autospeccing is based on the existing <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec</span></code> feature of mock. It limits the\napi of mocks to the api of an original object (the spec), but it is recursive\n(implemented lazily) so that attributes of mocks only have the same api as\nthe attributes of the spec. In addition mocked functions / methods have the\nsame call signature as the original so they raise a <a class=\"reference internal\" href=\"exceptions.html#TypeError\" title=\"TypeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">TypeError</span></code></a> if they are\ncalled incorrectly.</p>\n<p>Before I explain how auto-speccing works, here’s why it is needed.</p>\n<p><a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> is a very powerful and flexible object, but it suffers from a flaw which\nis general to mocking. If you refactor some of your code, rename members and so on, any\ntests for code that is still using the <em>old api</em> but uses mocks instead of the real\nobjects will still pass. This means your tests can all pass even though your code is\nbroken.</p>\n<div class=\"versionchanged\">\n<p><span class=\"versionmodified changed\">Changed in version 3.5: </span>Before 3.5, tests with a typo in the word assert would silently pass when they should\nraise an error. You can still achieve this behavior by passing <code class=\"docutils literal notranslate\"><span class=\"pre\">unsafe=True</span></code> to Mock.</p>\n</div>\n<p>Note that this is another reason why you need integration tests as well as\nunit tests. Testing everything in isolation is all fine and dandy, but if you\ndon’t test how your units are “wired together” there is still lots of room\nfor bugs that tests might have caught.</p>\n<p><a class=\"reference internal\" href=\"#module-unittest.mock\" title=\"unittest.mock: Mock object library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code></a> already provides a feature to help with this, called speccing. If you\nuse a class or instance as the <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">spec</span></code> for a mock then you can only access\nattributes on the mock that exist on the real class:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">urllib</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">assret_called_with</span>  <span class=\"c1\"># Intentional typo!</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">Mock object has no attribute &#39;assret_called_with&#39;</span>\n</pre></div>\n</div>\n<p>The spec only applies to the mock itself, so we still have the same issue\nwith any methods on the mock:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">header_items</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;mock.Mock object at 0x...&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">header_items</span><span class=\"o\">.</span><span class=\"n\">assret_called_with</span><span class=\"p\">()</span>  <span class=\"c1\"># Intentional typo!</span>\n</pre></div>\n</div>\n<p>Auto-speccing solves this problem. You can either pass <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=True</span></code> to\n<a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> / <a class=\"reference internal\" href=\"#unittest.mock.patch.object\" title=\"unittest.mock.patch.object\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch.object()</span></code></a> or use the <a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> function to create a\nmock with a spec. If you use the <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=True</span></code> argument to <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> then the\nobject that is being replaced will be used as the spec object. Because the\nspeccing is done “lazily” (the spec is created as attributes on the mock are\naccessed) you can use it with very complex or deeply nested objects (like\nmodules that import modules that import modules) without a big performance\nhit.</p>\n<p>Here’s an example of it in use:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">urllib</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">patcher</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.request&#39;</span><span class=\"p\">,</span> <span class=\"n\">autospec</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_request</span> <span class=\"o\">=</span> <span class=\"n\">patcher</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">request</span> <span class=\"ow\">is</span> <span class=\"n\">mock_request</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_request</span><span class=\"o\">.</span><span class=\"n\">Request</span>\n<span class=\"go\">&lt;MagicMock name=&#39;request.Request&#39; spec=&#39;Request&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p>You can see that <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">request.Request</span></code> has a spec. <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">request.Request</span></code> takes two\narguments in the constructor (one of which is <em>self</em>). Here’s what happens if\nwe try to call it incorrectly:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">TypeError</span>: <span class=\"n\">&lt;lambda&gt;() takes at least 2 arguments (1 given)</span>\n</pre></div>\n</div>\n<p>The spec also applies to instantiated classes (i.e. the return value of\nspecced mocks):</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span>\n<span class=\"go\">&lt;NonCallableMagicMock name=&#39;request.Request()&#39; spec=&#39;Request&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Request</span></code> objects are not callable, so the return value of instantiating our\nmocked out <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">request.Request</span></code> is a non-callable mock. With the spec in place\nany typos in our asserts will raise the correct error:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">add_header</span><span class=\"p\">(</span><span class=\"s1\">&#39;spam&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;eggs&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;MagicMock name=&#39;request.Request().add_header()&#39; id=&#39;...&#39;&gt;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">add_header</span><span class=\"o\">.</span><span class=\"n\">assret_called_with</span>  <span class=\"c1\"># Intentional typo!</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">Mock object has no attribute &#39;assret_called_with&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">add_header</span><span class=\"o\">.</span><span class=\"n\">assert_called_with</span><span class=\"p\">(</span><span class=\"s1\">&#39;spam&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;eggs&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>In many cases you will just be able to add <code class=\"docutils literal notranslate\"><span class=\"pre\">autospec=True</span></code> to your existing\n<a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> calls and then be protected against bugs due to typos and api\nchanges.</p>\n<p>As well as using <em>autospec</em> through <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> there is a\n<a class=\"reference internal\" href=\"#unittest.mock.create_autospec\" title=\"unittest.mock.create_autospec\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">create_autospec()</span></code></a> for creating autospecced mocks directly:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">urllib</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">request</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_request</span> <span class=\"o\">=</span> <span class=\"n\">create_autospec</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock_request</span><span class=\"o\">.</span><span class=\"n\">Request</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;bar&#39;</span><span class=\"p\">)</span>\n<span class=\"go\">&lt;NonCallableMagicMock name=&#39;mock.Request()&#39; spec=&#39;Request&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p>This isn’t without caveats and limitations however, which is why it is not\nthe default behaviour. In order to know what attributes are available on the\nspec object, autospec has to introspect (access attributes) the spec. As you\ntraverse attributes on the mock a corresponding traversal of the original\nobject is happening under the hood. If any of your specced objects have\nproperties or descriptors that can trigger code execution then you may not be\nable to use autospec. On the other hand it is much better to design your\nobjects so that introspection is safe <a class=\"footnote-reference brackets\" href=\"#id12\" id=\"id11\" role=\"doc-noteref\"><span class=\"fn-bracket\">[</span>4<span class=\"fn-bracket\">]</span></a>.</p>\n<p>A more serious problem is that it is common for instance attributes to be\ncreated in the <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__init__\" title=\"object.__init__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__init__()</span></code></a> method and not to exist on the class at all.\n<em>autospec</em> can’t know about any dynamically created attributes and restricts\nthe api to visible attributes.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Something</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>  <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Something&#39;</span><span class=\"p\">,</span> <span class=\"n\">autospec</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">Something</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">a</span>\n<span class=\"gp\">...</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\">  </span><span class=\"c\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">Mock object has no attribute &#39;a&#39;</span>\n</pre></div>\n</div>\n<p>There are a few different ways of resolving this problem. The easiest, but\nnot necessarily the least annoying, way is to simply set the required\nattributes on the mock after creation. Just because <em>autospec</em> doesn’t allow\nyou to fetch attributes that don’t exist on the spec it doesn’t prevent you\nsetting them:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Something&#39;</span><span class=\"p\">,</span> <span class=\"n\">autospec</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">Something</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n<span class=\"gp\">...</span>\n</pre></div>\n</div>\n<p>There is a more aggressive version of both <em>spec</em> and <em>autospec</em> that <em>does</em>\nprevent you setting non-existent attributes. This is useful if you want to\nensure your code only <em>sets</em> valid attributes too, but obviously it prevents\nthis particular scenario:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">with</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Something&#39;</span><span class=\"p\">,</span> <span class=\"n\">autospec</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">spec_set</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span> <span class=\"o\">=</span> <span class=\"n\">Something</span><span class=\"p\">()</span>\n<span class=\"gp\">... </span>  <span class=\"n\">thing</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n<span class=\"gp\">...</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">AttributeError</span>: <span class=\"n\">Mock object has no attribute &#39;a&#39;</span>\n</pre></div>\n</div>\n<p>Probably the best way of solving the problem is to add class attributes as\ndefault values for instance members initialised in <a class=\"reference internal\" href=\"../reference/datamodel.html#object.__init__\" title=\"object.__init__\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__init__()</span></code></a>.\nNote that if\nyou are only setting default attributes in <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">__init__()</span></code> then providing them via\nclass attributes (shared between instances of course) is faster too. e.g.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Something</span><span class=\"p\">:</span>\n    <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n</pre></div>\n</div>\n<p>This brings up another issue. It is relatively common to provide a default\nvalue of <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> for members that will later be an object of a different type.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> would be useless as a spec because it wouldn’t let you access <em>any</em>\nattributes or methods on it. As <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> is <em>never</em> going to be useful as a\nspec, and probably indicates a member that will normally of some other type,\nautospec doesn’t use a spec for members that are set to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>. These will\njust be ordinary mocks (well - MagicMocks):</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Something</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"n\">member</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">create_autospec</span><span class=\"p\">(</span><span class=\"n\">Something</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">member</span><span class=\"o\">.</span><span class=\"n\">foo</span><span class=\"o\">.</span><span class=\"n\">bar</span><span class=\"o\">.</span><span class=\"n\">baz</span><span class=\"p\">()</span>\n<span class=\"go\">&lt;MagicMock name=&#39;mock.member.foo.bar.baz()&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<p>If modifying your production classes to add defaults isn’t to your liking\nthen there are more options. One of these is simply to use an instance as the\nspec rather than the class. The other is to create a subclass of the\nproduction class and add the defaults to the subclass without affecting the\nproduction class. Both of these require you to use an alternative object as\nthe spec. Thankfully <a class=\"reference internal\" href=\"#unittest.mock.patch\" title=\"unittest.mock.patch\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">patch()</span></code></a> supports this - you can simply pass the\nalternative object as the <em>autospec</em> argument:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Something</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>  <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">SomethingForTest</span><span class=\"p\">(</span><span class=\"n\">Something</span><span class=\"p\">):</span>\n<span class=\"gp\">... </span>  <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">33</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">patch</span><span class=\"p\">(</span><span class=\"s1\">&#39;__main__.Something&#39;</span><span class=\"p\">,</span> <span class=\"n\">autospec</span><span class=\"o\">=</span><span class=\"n\">SomethingForTest</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">a</span>\n<span class=\"go\">&lt;NonCallableMagicMock name=&#39;Something.a&#39; spec=&#39;int&#39; id=&#39;...&#39;&gt;</span>\n</pre></div>\n</div>\n<aside class=\"footnote-list brackets\">\n<aside class=\"footnote brackets\" id=\"id12\" role=\"doc-footnote\">\n<span class=\"label\"><span class=\"fn-bracket\">[</span><a role=\"doc-backlink\" href=\"#id11\">4</a><span class=\"fn-bracket\">]</span></span>\n<p>This only applies to classes or already instantiated objects. Calling\na mocked class to create a mock instance <em>does not</em> create a real instance.\nIt is only attribute lookups - along with calls to <a class=\"reference internal\" href=\"functions.html#dir\" title=\"dir\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">dir()</span></code></a> - that are done.</p>\n</aside>\n</aside>\n</section>\n<section id=\"sealing-mocks\">\n<h3>Sealing mocks<a class=\"headerlink\" href=\"#sealing-mocks\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"unittest.mock.seal\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">unittest.mock.</span></span><span class=\"sig-name descname\"><span class=\"pre\">seal</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">mock</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#unittest.mock.seal\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Seal will disable the automatic creation of mocks when accessing an attribute of\nthe mock being sealed or any of its attributes that are already mocks recursively.</p>\n<p>If a mock instance with a name or a spec is assigned to an attribute\nit won’t be considered in the sealing chain. This allows one to prevent seal from\nfixing part of the mock object.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">submock</span><span class=\"o\">.</span><span class=\"n\">attribute1</span> <span class=\"o\">=</span> <span class=\"mi\">2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">not_submock</span> <span class=\"o\">=</span> <span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;sample_name&quot;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">seal</span><span class=\"p\">(</span><span class=\"n\">mock</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">new_attribute</span>  <span class=\"c1\"># This will raise AttributeError.</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">submock</span><span class=\"o\">.</span><span class=\"n\">attribute2</span>  <span class=\"c1\"># This will raise AttributeError.</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">mock</span><span class=\"o\">.</span><span class=\"n\">not_submock</span><span class=\"o\">.</span><span class=\"n\">attribute2</span>  <span class=\"c1\"># This won&#39;t raise.</span>\n</pre></div>\n</div>\n<div class=\"versionadded\">\n<p><span class=\"versionmodified added\">Added in version 3.7.</span></p>\n</div>\n</dd></dl>\n\n</section>\n</section>\n<section id=\"order-of-precedence-of-side-effect-return-value-and-wraps\">\n<h2>Order of precedence of <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code>, <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code> and <em>wraps</em><a class=\"headerlink\" href=\"#order-of-precedence-of-side-effect-return-value-and-wraps\" title=\"Link to this heading\">¶</a></h2>\n<p>The order of their precedence is:</p>\n<ol class=\"arabic simple\">\n<li><p><a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a></p></li>\n<li><p><a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a></p></li>\n<li><p><em>wraps</em></p></li>\n</ol>\n<p>If all three are set, mock will return the value from <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>,\nignoring <a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> and the wrapped object altogether. If any\ntwo are set, the one with the higher precedence will return the value.\nRegardless of the order of which was set first, the order of precedence\nremains unchanged.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Mock</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Order</span><span class=\"p\">:</span>\n<span class=\"gp\">... </span>    <span class=\"nd\">@staticmethod</span>\n<span class=\"gp\">... </span>    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">get_value</span><span class=\"p\">():</span>\n<span class=\"gp\">... </span>        <span class=\"k\">return</span> <span class=\"s2\">&quot;third&quot;</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">,</span> <span class=\"n\">wraps</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;first&quot;</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;second&quot;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;first&#39;</span>\n</pre></div>\n</div>\n<p>As <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> is the default value of <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>, if you reassign\nits value back to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>, the order of precedence will be checked between\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> and the wrapped object, ignoring\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;second&#39;</span>\n</pre></div>\n</div>\n<p>If the value being returned by <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> is <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a>,\nit is ignored and the order of precedence moves to the successor to obtain the\nvalue to return.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">unittest.mock</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">DEFAULT</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">DEFAULT</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;second&#39;</span>\n</pre></div>\n</div>\n<p>When <a class=\"reference internal\" href=\"#unittest.mock.Mock\" title=\"unittest.mock.Mock\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Mock</span></code></a> wraps an object, the default value of\n<a class=\"reference internal\" href=\"#unittest.mock.Mock.return_value\" title=\"unittest.mock.Mock.return_value\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code></a> will be <a class=\"reference internal\" href=\"#unittest.mock.DEFAULT\" title=\"unittest.mock.DEFAULT\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">DEFAULT</span></code></a>.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">,</span> <span class=\"n\">wraps</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">return_value</span>\n<span class=\"go\">sentinel.DEFAULT</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span>\n<span class=\"go\">sentinel.DEFAULT</span>\n</pre></div>\n</div>\n<p>The order of precedence will ignore this value and it will move to the last\nsuccessor which is the wrapped object.</p>\n<p>As the real call is being made to the wrapped object, creating an instance of\nthis mock will return the real instance of the class. The positional arguments,\nif any, required by the wrapped object must be passed.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock_instance</span> <span class=\"o\">=</span> <span class=\"n\">order_mock</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">order_mock_instance</span><span class=\"p\">,</span> <span class=\"n\">Order</span><span class=\"p\">)</span>\n<span class=\"go\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock_instance</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;third&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;third&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;second&quot;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;second&#39;</span>\n</pre></div>\n</div>\n<p>But if you assign <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> to it, this will not be ignored as it is an\nexplicit assignment. So, the order of precedence will not move to the wrapped\nobject.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span>\n<span class=\"go\">True</span>\n</pre></div>\n</div>\n<p>Even if you set all three at once when initializing the mock, the order of\nprecedence remains the same:</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">,</span> <span class=\"n\">wraps</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>                  <span class=\"o\">**</span><span class=\"p\">{</span><span class=\"s2\">&quot;get_value.side_effect&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;first&quot;</span><span class=\"p\">],</span>\n<span class=\"gp\">... </span>                     <span class=\"s2\">&quot;get_value.return_value&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;second&quot;</span><span class=\"p\">}</span>\n<span class=\"gp\">... </span>                  <span class=\"p\">)</span>\n<span class=\"gp\">...</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;first&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;second&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;third&#39;</span>\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"#unittest.mock.Mock.side_effect\" title=\"unittest.mock.Mock.side_effect\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code></a> is exhausted, the order of precedence will not\ncause a value to be obtained from the successors. Instead, <code class=\"docutils literal notranslate\"><span class=\"pre\">StopIteration</span></code>\nexception is raised.</p>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span> <span class=\"o\">=</span> <span class=\"n\">Mock</span><span class=\"p\">(</span><span class=\"n\">spec</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">,</span> <span class=\"n\">wraps</span><span class=\"o\">=</span><span class=\"n\">Order</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">side_effect</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;first side effect value&quot;</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>                                    <span class=\"s2\">&quot;another side effect value&quot;</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"o\">.</span><span class=\"n\">return_value</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;second&quot;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;first side effect value&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"go\">&#39;another side effect value&#39;</span>\n</pre></div>\n</div>\n<div class=\"doctest highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">order_mock</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">()</span>\n<span class=\"gt\">Traceback (most recent call last):</span>\n<span class=\"w\"> </span><span class=\"c\">...</span>\n<span class=\"gr\">StopIteration</span>\n</pre></div>\n</div>\n</section>\n</section>\n\n\n            <div class=\"clearer\"></div>\n          </div>\n        </div>\n      </div>\n      <div class=\"sphinxsidebar\" role=\"navigation\" aria-label=\"Main\">\n        <div class=\"sphinxsidebarwrapper\">\n  <div>\n    <h3><a href=\"../contents.html\">Table of Contents</a></h3>\n    <ul>\n<li><a class=\"reference internal\" href=\"#\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — mock object library</a><ul>\n<li><a class=\"reference internal\" href=\"#quick-guide\">Quick Guide</a></li>\n<li><a class=\"reference internal\" href=\"#the-mock-class\">The Mock Class</a><ul>\n<li><a class=\"reference internal\" href=\"#calling\">Calling</a></li>\n<li><a class=\"reference internal\" href=\"#deleting-attributes\">Deleting Attributes</a></li>\n<li><a class=\"reference internal\" href=\"#mock-names-and-the-name-attribute\">Mock names and the name attribute</a></li>\n<li><a class=\"reference internal\" href=\"#attaching-mocks-as-attributes\">Attaching Mocks as Attributes</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#the-patchers\">The patchers</a><ul>\n<li><a class=\"reference internal\" href=\"#patch\">patch</a></li>\n<li><a class=\"reference internal\" href=\"#patch-object\">patch.object</a></li>\n<li><a class=\"reference internal\" href=\"#patch-dict\">patch.dict</a></li>\n<li><a class=\"reference internal\" href=\"#patch-multiple\">patch.multiple</a></li>\n<li><a class=\"reference internal\" href=\"#patch-methods-start-and-stop\">patch methods: start and stop</a></li>\n<li><a class=\"reference internal\" href=\"#patch-builtins\">patch builtins</a></li>\n<li><a class=\"reference internal\" href=\"#test-prefix\">TEST_PREFIX</a></li>\n<li><a class=\"reference internal\" href=\"#nesting-patch-decorators\">Nesting Patch Decorators</a></li>\n<li><a class=\"reference internal\" href=\"#where-to-patch\">Where to patch</a></li>\n<li><a class=\"reference internal\" href=\"#patching-descriptors-and-proxy-objects\">Patching Descriptors and Proxy Objects</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#magicmock-and-magic-method-support\">MagicMock and magic method support</a><ul>\n<li><a class=\"reference internal\" href=\"#mocking-magic-methods\">Mocking Magic Methods</a></li>\n<li><a class=\"reference internal\" href=\"#magic-mock\">Magic Mock</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#helpers\">Helpers</a><ul>\n<li><a class=\"reference internal\" href=\"#sentinel\">sentinel</a></li>\n<li><a class=\"reference internal\" href=\"#default\">DEFAULT</a></li>\n<li><a class=\"reference internal\" href=\"#call\">call</a></li>\n<li><a class=\"reference internal\" href=\"#create-autospec\">create_autospec</a></li>\n<li><a class=\"reference internal\" href=\"#any\">ANY</a></li>\n<li><a class=\"reference internal\" href=\"#filter-dir\">FILTER_DIR</a></li>\n<li><a class=\"reference internal\" href=\"#mock-open\">mock_open</a></li>\n<li><a class=\"reference internal\" href=\"#autospeccing\">Autospeccing</a></li>\n<li><a class=\"reference internal\" href=\"#sealing-mocks\">Sealing mocks</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#order-of-precedence-of-side-effect-return-value-and-wraps\">Order of precedence of <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">side_effect</span></code>, <code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">return_value</span></code> and <em>wraps</em></a></li>\n</ul>\n</li>\n</ul>\n\n  </div>\n  <div>\n    <h4>Previous topic</h4>\n    <p class=\"topless\"><a href=\"unittest.html\"\n                          title=\"previous chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest</span></code> — Unit testing framework</a></p>\n  </div>\n  <div>\n    <h4>Next topic</h4>\n    <p class=\"topless\"><a href=\"unittest.mock-examples.html\"\n                          title=\"next chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — getting started</a></p>\n  </div>\n  <div role=\"note\" aria-label=\"source link\">\n    <h3>This page</h3>\n    <ul class=\"this-page-menu\">\n      <li><a href=\"../bugs.html\">Report a bug</a></li>\n      <li>\n        <a href=\"https://github.com/python/cpython/blob/main/Doc/library/unittest.mock.rst?plain=1\"\n            rel=\"nofollow\">Show source\n        </a>\n      </li>\n    </ul>\n  </div>\n        </div>\n<div id=\"sidebarbutton\" title=\"Collapse sidebar\">\n<span>«</span>\n</div>\n\n      </div>\n      <div class=\"clearer\"></div>\n    </div>  \n    <div class=\"related\" role=\"navigation\" aria-label=\"Related\">\n      <h3>Navigation</h3>\n      <ul>\n        <li class=\"right\" style=\"margin-right: 10px\">\n          <a href=\"../genindex.html\" title=\"General Index\"\n             >index</a></li>\n        <li class=\"right\" >\n          <a href=\"../py-modindex.html\" title=\"Python Module Index\"\n             >modules</a> |</li>\n        <li class=\"right\" >\n          <a href=\"unittest.mock-examples.html\" title=\"unittest.mock — getting started\"\n             >next</a> |</li>\n        <li class=\"right\" >\n          <a href=\"unittest.html\" title=\"unittest — Unit testing framework\"\n             >previous</a> |</li>\n\n          <li><img src=\"../_static/py.svg\" alt=\"Python logo\" style=\"vertical-align: middle; margin-top: -1px\"></li>\n          <li><a href=\"https://www.python.org/\">Python</a> &#187;</li>\n          <li class=\"switchers\">\n            <div class=\"language_switcher_placeholder\"></div>\n            <div class=\"version_switcher_placeholder\"></div>\n          </li>\n          <li>\n              \n          </li>\n    <li id=\"cpython-language-and-version\">\n      <a href=\"../index.html\">3.14.0 Documentation</a> &#187;\n    </li>\n\n          <li class=\"nav-item nav-item-1\"><a href=\"index.html\" >The Python Standard Library</a> &#187;</li>\n          <li class=\"nav-item nav-item-2\"><a href=\"development.html\" >Development Tools</a> &#187;</li>\n        <li class=\"nav-item nav-item-this\"><a href=\"\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">unittest.mock</span></code> — mock object library</a></li>\n                <li class=\"right\">\n                    \n\n    <div class=\"inline-search\" role=\"search\">\n        <form class=\"inline-search\" action=\"../search.html\" method=\"get\">\n          <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\" id=\"search-box\">\n          <input type=\"submit\" value=\"Go\">\n        </form>\n    </div>\n                     |\n                </li>\n            <li class=\"right\">\n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label> |</li>\n            \n      </ul>\n    </div>  \n    <div class=\"footer\">\n    &copy; <a href=\"../copyright.html\">Copyright</a> 2001 Python Software Foundation.\n    <br>\n    This page is licensed under the Python Software Foundation License Version 2.\n    <br>\n    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.\n    <br>\n    \n      See <a href=\"/license.html\">History and License</a> for more information.<br>\n    \n    \n    <br>\n\n    The Python Software Foundation is a non-profit corporation.\n<a href=\"https://www.python.org/psf/donations/\">Please donate.</a>\n<br>\n    <br>\n      Last updated on Nov 25, 2025 (18:01 UTC).\n    \n      <a href=\"/bugs.html\">Found a bug</a>?\n    \n    <br>\n\n    Created using <a href=\"https://www.sphinx-doc.org/\">Sphinx</a> 8.2.3.\n    </div>\n\n    <script type=\"text/javascript\" src=\"../_static/switchers.js\"></script>\n  </body>\n</html>",
  "metadata": {
    "title": "unittest.mock — mock object library — Python 3.14.0 documentation",
    "meta_description": "Source code: Lib/unittest/mock.py unittest.mock is a library for testing in Python. It allows you to replace parts of your system under test with mock objects and make assertions about how they hav...",
    "h1": "— mock object library"
  },
  "request_headers": {
    "Referer": "https://docs.python.org/3/library/",
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
    "Accept-Language": "en",
    "User-Agent": "DumbCrawler/1.0",
    "Accept-Encoding": "gzip, deflate"
  },
  "response_headers": {
    "Content-Length": "46246",
    "Server": "nginx",
    "Content-Type": "text/html",
    "Last-Modified": "Tue, 25 Nov 2025 18:03:26 GMT",
    "Etag": "\"6925ef6e-64018\"",
    "X-Clacks-Overhead": "GNU Terry Pratchett",
    "Strict-Transport-Security": "max-age=315360000; includeSubDomains; preload",
    "Via": "1.1 varnish, 1.1 varnish",
    "Accept-Ranges": "bytes",
    "Age": "4135",
    "Date": "Wed, 26 Nov 2025 05:32:30 GMT",
    "X-Served-By": "cache-lga21972-LGA, cache-yul1970064-YUL",
    "X-Cache": "HIT, HIT",
    "X-Cache-Hits": "36, 0",
    "X-Timer": "S1764135151.661754,VS0,VE1",
    "Vary": "Accept-Encoding"
  },
  "crawled_at": "2025-11-26T05:32:31.439086+00:00",
  "crawler": {
    "name": "DumbCrawler",
    "version": "1.0",
    "mode": "crawl",
    "js_mode": "off",
    "scope": "subfolder"
  }
}