{
  "url": "https://docs.python.org/3/library/optparse.html",
  "status_code": 200,
  "depth": 1,
  "referrer": "https://docs.python.org/3/library/",
  "raw_html": "<!DOCTYPE html>\n\n<html lang=\"en\" data-content_root=\"../\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<meta property=\"og:title\" content=\"optparse — Parser for command line options\" />\n<meta property=\"og:type\" content=\"website\" />\n<meta property=\"og:url\" content=\"https://docs.python.org/3/library/optparse.html\" />\n<meta property=\"og:site_name\" content=\"Python documentation\" />\n<meta property=\"og:description\" content=\"Source code: Lib/optparse.py Choosing an argument parsing library: The standard library includes three argument parsing libraries: getopt: a module that closely mirrors the procedural C getopt API....\" />\n<meta property=\"og:image:width\" content=\"1146\" />\n<meta property=\"og:image:height\" content=\"600\" />\n<meta property=\"og:image\" content=\"https://docs.python.org/3.14/_images/social_previews/summary_library_optparse_af18d9d1.png\" />\n<meta property=\"og:image:alt\" content=\"Source code: Lib/optparse.py Choosing an argument parsing library: The standard library includes three argument parsing libraries: getopt: a module that closely mirrors the procedural C getopt API....\" />\n<meta name=\"description\" content=\"Source code: Lib/optparse.py Choosing an argument parsing library: The standard library includes three argument parsing libraries: getopt: a module that closely mirrors the procedural C getopt API....\" />\n<meta name=\"twitter:card\" content=\"summary_large_image\" />\n<meta name=\"theme-color\" content=\"#3776ab\">\n\n    <title>optparse — Parser for command line options &#8212; Python 3.14.0 documentation</title><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    \n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pygments.css?v=b86133f3\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/classic.css?v=234b1a7c\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pydoctheme.css?v=8cd84f99\" />\n    <link id=\"pygments_dark_css\" media=\"(prefers-color-scheme: dark)\" rel=\"stylesheet\" type=\"text/css\" href=\"../_static/pygments_dark.css?v=5349f25f\" />\n    \n    <script src=\"../_static/documentation_options.js?v=e4f4b189\"></script>\n    <script src=\"../_static/doctools.js?v=9bcbadda\"></script>\n    <script src=\"../_static/sphinx_highlight.js?v=dc90522c\"></script>\n    \n    <script src=\"../_static/sidebar.js\"></script>\n    \n    <link rel=\"search\" type=\"application/opensearchdescription+xml\"\n          title=\"Search within Python 3.14.0 documentation\"\n          href=\"../_static/opensearch.xml\"/>\n    <link rel=\"author\" title=\"About these documents\" href=\"../about.html\" />\n    <link rel=\"index\" title=\"Index\" href=\"../genindex.html\" />\n    <link rel=\"search\" title=\"Search\" href=\"../search.html\" />\n    <link rel=\"copyright\" title=\"Copyright\" href=\"../copyright.html\" />\n    <link rel=\"next\" title=\"getpass — Portable password input\" href=\"getpass.html\" />\n    <link rel=\"prev\" title=\"Migrating optparse code to argparse\" href=\"../howto/argparse-optparse.html\" />\n    \n      \n      <script defer file-types=\"bz2,epub,zip\" data-domain=\"docs.python.org\" src=\"https://analytics.python.org/js/script.file-downloads.outbound-links.js\"></script>\n      \n      <link rel=\"canonical\" href=\"https://docs.python.org/3/library/optparse.html\">\n      \n    \n\n    \n    <style>\n      @media only screen {\n        table.full-width-table {\n            width: 100%;\n        }\n      }\n    </style>\n<link rel=\"stylesheet\" href=\"../_static/pydoctheme_dark.css\" media=\"(prefers-color-scheme: dark)\" id=\"pydoctheme_dark_css\">\n    <link rel=\"shortcut icon\" type=\"image/png\" href=\"../_static/py.svg\">\n            <script type=\"text/javascript\" src=\"../_static/copybutton.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/menu.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/search-focus.js\"></script>\n            <script type=\"text/javascript\" src=\"../_static/themetoggle.js\"></script> \n            <script type=\"text/javascript\" src=\"../_static/rtd_switcher.js\"></script>\n            <meta name=\"readthedocs-addons-api-version\" content=\"1\">\n\n  </head>\n<body>\n<div class=\"mobile-nav\">\n    <input type=\"checkbox\" id=\"menuToggler\" class=\"toggler__input\" aria-controls=\"navigation\"\n           aria-pressed=\"false\" aria-expanded=\"false\" role=\"button\" aria-label=\"Menu\">\n    <nav class=\"nav-content\" role=\"navigation\">\n        <label for=\"menuToggler\" class=\"toggler__label\">\n            <span></span>\n        </label>\n        <span class=\"nav-items-wrapper\">\n            <a href=\"https://www.python.org/\" class=\"nav-logo\">\n                <img src=\"../_static/py.svg\" alt=\"Python logo\">\n            </a>\n            <span class=\"version_switcher_placeholder\"></span>\n            <form role=\"search\" class=\"search\" action=\"../search.html\" method=\"get\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" class=\"search-icon\">\n                    <path fill-rule=\"nonzero\" fill=\"currentColor\" d=\"M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\n                </svg>\n                <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\">\n                <input type=\"submit\" value=\"Go\">\n            </form>\n        </span>\n    </nav>\n    <div class=\"menu-wrapper\">\n        <nav class=\"menu\" role=\"navigation\" aria-label=\"main navigation\">\n            <div class=\"language_switcher_placeholder\"></div>\n            \n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label>\n  <div>\n    <h3><a href=\"../contents.html\">Table of Contents</a></h3>\n    <ul>\n<li><a class=\"reference internal\" href=\"#\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> — Parser for command line options</a><ul>\n<li><a class=\"reference internal\" href=\"#choosing-an-argument-parsing-library\">Choosing an argument parsing library</a></li>\n<li><a class=\"reference internal\" href=\"#introduction\">Introduction</a></li>\n<li><a class=\"reference internal\" href=\"#background\">Background</a><ul>\n<li><a class=\"reference internal\" href=\"#terminology\">Terminology</a></li>\n<li><a class=\"reference internal\" href=\"#what-are-options-for\">What are options for?</a></li>\n<li><a class=\"reference internal\" href=\"#what-are-positional-arguments-for\">What are positional arguments for?</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#tutorial\">Tutorial</a><ul>\n<li><a class=\"reference internal\" href=\"#understanding-option-actions\">Understanding option actions</a></li>\n<li><a class=\"reference internal\" href=\"#the-store-action\">The store action</a></li>\n<li><a class=\"reference internal\" href=\"#handling-boolean-flag-options\">Handling boolean (flag) options</a></li>\n<li><a class=\"reference internal\" href=\"#other-actions\">Other actions</a></li>\n<li><a class=\"reference internal\" href=\"#default-values\">Default values</a></li>\n<li><a class=\"reference internal\" href=\"#generating-help\">Generating help</a><ul>\n<li><a class=\"reference internal\" href=\"#grouping-options\">Grouping Options</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#printing-a-version-string\">Printing a version string</a></li>\n<li><a class=\"reference internal\" href=\"#how-optparse-handles-errors\">How <code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> handles errors</a></li>\n<li><a class=\"reference internal\" href=\"#putting-it-all-together\">Putting it all together</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#reference-guide\">Reference Guide</a><ul>\n<li><a class=\"reference internal\" href=\"#creating-the-parser\">Creating the parser</a></li>\n<li><a class=\"reference internal\" href=\"#populating-the-parser\">Populating the parser</a></li>\n<li><a class=\"reference internal\" href=\"#defining-options\">Defining options</a></li>\n<li><a class=\"reference internal\" href=\"#option-attributes\">Option attributes</a></li>\n<li><a class=\"reference internal\" href=\"#standard-option-actions\">Standard option actions</a></li>\n<li><a class=\"reference internal\" href=\"#standard-option-types\">Standard option types</a></li>\n<li><a class=\"reference internal\" href=\"#parsing-arguments\">Parsing arguments</a></li>\n<li><a class=\"reference internal\" href=\"#querying-and-manipulating-your-option-parser\">Querying and manipulating your option parser</a></li>\n<li><a class=\"reference internal\" href=\"#conflicts-between-options\">Conflicts between options</a></li>\n<li><a class=\"reference internal\" href=\"#cleanup\">Cleanup</a></li>\n<li><a class=\"reference internal\" href=\"#other-methods\">Other methods</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#option-callbacks\">Option Callbacks</a><ul>\n<li><a class=\"reference internal\" href=\"#defining-a-callback-option\">Defining a callback option</a></li>\n<li><a class=\"reference internal\" href=\"#how-callbacks-are-called\">How callbacks are called</a></li>\n<li><a class=\"reference internal\" href=\"#raising-errors-in-a-callback\">Raising errors in a callback</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-1-trivial-callback\">Callback example 1: trivial callback</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-2-check-option-order\">Callback example 2: check option order</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-3-check-option-order-generalized\">Callback example 3: check option order (generalized)</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-4-check-arbitrary-condition\">Callback example 4: check arbitrary condition</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-5-fixed-arguments\">Callback example 5: fixed arguments</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-6-variable-arguments\">Callback example 6: variable arguments</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#extending-optparse\">Extending <code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#adding-new-types\">Adding new types</a></li>\n<li><a class=\"reference internal\" href=\"#adding-new-actions\">Adding new actions</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#exceptions\">Exceptions</a></li>\n</ul>\n</li>\n</ul>\n\n  </div>\n  <div>\n    <h4>Previous topic</h4>\n    <p class=\"topless\"><a href=\"../howto/argparse-optparse.html\"\n                          title=\"previous chapter\">Migrating <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code> code to <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a></p>\n  </div>\n  <div>\n    <h4>Next topic</h4>\n    <p class=\"topless\"><a href=\"getpass.html\"\n                          title=\"next chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">getpass</span></code> — Portable password input</a></p>\n  </div>\n  <div role=\"note\" aria-label=\"source link\">\n    <h3>This page</h3>\n    <ul class=\"this-page-menu\">\n      <li><a href=\"../bugs.html\">Report a bug</a></li>\n      <li>\n        <a href=\"https://github.com/python/cpython/blob/main/Doc/library/optparse.rst?plain=1\"\n            rel=\"nofollow\">Show source\n        </a>\n      </li>\n    </ul>\n  </div>\n        </nav>\n    </div>\n</div>\n\n  \n    <div class=\"related\" role=\"navigation\" aria-label=\"Related\">\n      <h3>Navigation</h3>\n      <ul>\n        <li class=\"right\" style=\"margin-right: 10px\">\n          <a href=\"../genindex.html\" title=\"General Index\"\n             accesskey=\"I\">index</a></li>\n        <li class=\"right\" >\n          <a href=\"../py-modindex.html\" title=\"Python Module Index\"\n             >modules</a> |</li>\n        <li class=\"right\" >\n          <a href=\"getpass.html\" title=\"getpass — Portable password input\"\n             accesskey=\"N\">next</a> |</li>\n        <li class=\"right\" >\n          <a href=\"../howto/argparse-optparse.html\" title=\"Migrating optparse code to argparse\"\n             accesskey=\"P\">previous</a> |</li>\n\n          <li><img src=\"../_static/py.svg\" alt=\"Python logo\" style=\"vertical-align: middle; margin-top: -1px\"></li>\n          <li><a href=\"https://www.python.org/\">Python</a> &#187;</li>\n          <li class=\"switchers\">\n            <div class=\"language_switcher_placeholder\"></div>\n            <div class=\"version_switcher_placeholder\"></div>\n          </li>\n          <li>\n              \n          </li>\n    <li id=\"cpython-language-and-version\">\n      <a href=\"../index.html\">3.14.0 Documentation</a> &#187;\n    </li>\n\n          <li class=\"nav-item nav-item-1\"><a href=\"index.html\" >The Python Standard Library</a> &#187;</li>\n          <li class=\"nav-item nav-item-2\"><a href=\"cmdlinelibs.html\" accesskey=\"U\">Command-line interface libraries</a> &#187;</li>\n        <li class=\"nav-item nav-item-this\"><a href=\"\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> — Parser for command line options</a></li>\n                <li class=\"right\">\n                    \n\n    <div class=\"inline-search\" role=\"search\">\n        <form class=\"inline-search\" action=\"../search.html\" method=\"get\">\n          <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\" id=\"search-box\">\n          <input type=\"submit\" value=\"Go\">\n        </form>\n    </div>\n                     |\n                </li>\n            <li class=\"right\">\n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label> |</li>\n            \n      </ul>\n    </div>    \n\n    <div class=\"document\">\n      <div class=\"documentwrapper\">\n        <div class=\"bodywrapper\">\n          <div class=\"body\" role=\"main\">\n            \n  <section id=\"module-optparse\">\n<span id=\"optparse-parser-for-command-line-options\"></span><h1><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> — Parser for command line options<a class=\"headerlink\" href=\"#module-optparse\" title=\"Link to this heading\">¶</a></h1>\n<p><strong>Source code:</strong> <a class=\"extlink-source reference external\" href=\"https://github.com/python/cpython/tree/3.14/Lib/optparse.py\">Lib/optparse.py</a></p>\n<hr class=\"docutils\" />\n<section id=\"choosing-an-argument-parsing-library\">\n<span id=\"choosing-an-argument-parser\"></span><h2>Choosing an argument parsing library<a class=\"headerlink\" href=\"#choosing-an-argument-parsing-library\" title=\"Link to this heading\">¶</a></h2>\n<p>The standard library includes three argument parsing libraries:</p>\n<ul class=\"simple\">\n<li><p><a class=\"reference internal\" href=\"getopt.html#module-getopt\" title=\"getopt: Portable parser for command line options; support both short and long option names.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">getopt</span></code></a>: a module that closely mirrors the procedural C <code class=\"docutils literal notranslate\"><span class=\"pre\">getopt</span></code> API.\nIncluded in the standard library since before the initial Python 1.0 release.</p></li>\n<li><p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>: a declarative replacement for <code class=\"docutils literal notranslate\"><span class=\"pre\">getopt</span></code> that\nprovides equivalent functionality without requiring each application\nto implement its own procedural option parsing logic. Included\nin the standard library since the Python 2.3 release.</p></li>\n<li><p><a class=\"reference internal\" href=\"argparse.html#module-argparse\" title=\"argparse: Command-line option and argument parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a>: a more opinionated alternative to <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code> that\nprovides more functionality by default, at the expense of reduced application\nflexibility in controlling exactly how arguments are processed. Included in\nthe standard library since the Python 2.7 and Python 3.2 releases.</p></li>\n</ul>\n<p>In the absence of more specific argument parsing design constraints, <a class=\"reference internal\" href=\"argparse.html#module-argparse\" title=\"argparse: Command-line option and argument parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a>\nis the recommended choice for implementing command line applications, as it offers\nthe highest level of baseline functionality with the least application level code.</p>\n<p><a class=\"reference internal\" href=\"getopt.html#module-getopt\" title=\"getopt: Portable parser for command line options; support both short and long option names.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">getopt</span></code></a> is retained almost entirely for backwards compatibility reasons.\nHowever, it also serves a niche use case as a tool for prototyping and testing\ncommand line argument handling in <code class=\"docutils literal notranslate\"><span class=\"pre\">getopt</span></code>-based C applications.</p>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> should be considered as an alternative to <a class=\"reference internal\" href=\"argparse.html#module-argparse\" title=\"argparse: Command-line option and argument parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a> in the\nfollowing cases:</p>\n<ul class=\"simple\">\n<li><p>an application is already using <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> and doesn’t want to risk the\nsubtle behavioural changes that may arise when migrating to <a class=\"reference internal\" href=\"argparse.html#module-argparse\" title=\"argparse: Command-line option and argument parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a></p></li>\n<li><p>the application requires additional control over the way options and\npositional parameters are interleaved on the command line (including\nthe ability to disable the interleaving feature completely)</p></li>\n<li><p>the application requires additional control over the incremental parsing\nof command line elements (while <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> does support this, the\nexact way it works in practice is undesirable for some use cases)</p></li>\n<li><p>the application requires additional control over the handling of options\nwhich accept parameter values that may start with <code class=\"docutils literal notranslate\"><span class=\"pre\">-</span></code> (such as delegated\noptions to be passed to invoked subprocesses)</p></li>\n<li><p>the application requires some other command line parameter processing\nbehavior which <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> does not support, but which can be implemented\nin terms of the lower level interface offered by <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code></p></li>\n</ul>\n<p>These considerations also mean that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> is likely to provide a\nbetter foundation for library authors writing third party command line\nargument processing libraries.</p>\n<p>As a concrete example, consider the following two command line argument\nparsing configurations, the first using <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code>, and the second\nusing <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code>:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">optparse</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">:</span>\n    <span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">optparse</span><span class=\"o\">.</span><span class=\"n\">OptionParser</span><span class=\"p\">()</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s1\">&#39;-o&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--output&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s1\">&#39;-v&#39;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s1\">&#39;verbose&#39;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s1\">&#39;store_true&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">opts</span><span class=\"p\">,</span> <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n    <span class=\"n\">process</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">output</span><span class=\"p\">,</span> <span class=\"n\">verbose</span><span class=\"o\">=</span><span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">argparse</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">:</span>\n    <span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">argparse</span><span class=\"o\">.</span><span class=\"n\">ArgumentParser</span><span class=\"p\">()</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">&#39;-o&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--output&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">&#39;-v&#39;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s1\">&#39;verbose&#39;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s1\">&#39;store_true&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">&#39;rest&#39;</span><span class=\"p\">,</span> <span class=\"n\">nargs</span><span class=\"o\">=</span><span class=\"s1\">&#39;*&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n    <span class=\"n\">process</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">rest</span><span class=\"p\">,</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">output</span><span class=\"p\">,</span> <span class=\"n\">verbose</span><span class=\"o\">=</span><span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The most obvious difference is that in the <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code> version, the non-option\narguments are processed separately by the application after the option processing\nis complete. In the <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> version, positional arguments are declared and\nprocessed in the same way as the named options.</p>\n<p>However, the <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> version will also handle some parameter combination\ndifferently from the way the <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code> version would handle them.\nFor example (amongst other differences):</p>\n<ul class=\"simple\">\n<li><p>supplying <code class=\"docutils literal notranslate\"><span class=\"pre\">-o</span> <span class=\"pre\">-v</span></code> gives <code class=\"docutils literal notranslate\"><span class=\"pre\">output=&quot;-v&quot;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">verbose=False</span></code>\nwhen using <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code>, but a usage error with <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code>\n(complaining that no value has been supplied for <code class=\"docutils literal notranslate\"><span class=\"pre\">-o/--output</span></code>,\nsince <code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> is interpreted as meaning the verbosity flag)</p></li>\n<li><p>similarly, supplying <code class=\"docutils literal notranslate\"><span class=\"pre\">-o</span> <span class=\"pre\">--</span></code> gives <code class=\"docutils literal notranslate\"><span class=\"pre\">output=&quot;--&quot;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">args=()</span></code>\nwhen using <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code>, but a usage error with <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code>\n(also complaining that no value has been supplied for <code class=\"docutils literal notranslate\"><span class=\"pre\">-o/--output</span></code>,\nsince <code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code> is interpreted as terminating the option processing\nand treating all remaining values as positional arguments)</p></li>\n<li><p>supplying <code class=\"docutils literal notranslate\"><span class=\"pre\">-o=foo</span></code> gives <code class=\"docutils literal notranslate\"><span class=\"pre\">output=&quot;=foo&quot;</span></code> when using <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code>,\nbut gives <code class=\"docutils literal notranslate\"><span class=\"pre\">output=&quot;foo&quot;</span></code> with <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> (since <code class=\"docutils literal notranslate\"><span class=\"pre\">=</span></code> is special\ncased as an alternative separator for option parameter values)</p></li>\n</ul>\n<p>Whether these differing behaviors in the <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code> version are\nconsidered desirable or a problem will depend on the specific command line\napplication use case.</p>\n<div class=\"admonition seealso\">\n<p class=\"admonition-title\">See also</p>\n<p><a class=\"extlink-pypi reference external\" href=\"https://pypi.org/project/click/\">click</a> is a third party argument processing library (originally\nbased on <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code>), which allows command line applications to be\ndeveloped as a set of decorated command implementation functions.</p>\n<p>Other third party libraries, such as <a class=\"extlink-pypi reference external\" href=\"https://pypi.org/project/typer/\">typer</a> or <a class=\"extlink-pypi reference external\" href=\"https://pypi.org/project/msgspec-click/\">msgspec-click</a>,\nallow command line interfaces to be specified in ways that more effectively\nintegrate with static checking of Python type annotations.</p>\n</div>\n</section>\n<section id=\"introduction\">\n<h2>Introduction<a class=\"headerlink\" href=\"#introduction\" title=\"Link to this heading\">¶</a></h2>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> is a more convenient, flexible, and powerful library for parsing\ncommand-line options than the minimalist <a class=\"reference internal\" href=\"getopt.html#module-getopt\" title=\"getopt: Portable parser for command line options; support both short and long option names.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">getopt</span></code></a> module.\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> uses a more declarative style of command-line parsing:\nyou create an instance of <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>,\npopulate it with options, and parse the command line.\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> allows users to specify options in the conventional\nGNU/POSIX syntax, and additionally generates usage and help messages for you.</p>\n<p>Here’s an example of using <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> in a simple script:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">optparse</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">OptionParser</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">()</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;write report to FILE&quot;</span><span class=\"p\">,</span> <span class=\"n\">metavar</span><span class=\"o\">=</span><span class=\"s2\">&quot;FILE&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--quiet&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;don&#39;t print status messages to stdout&quot;</span><span class=\"p\">)</span>\n\n<span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>With these few lines of code, users of your script can now do the “usual thing”\non the command-line, for example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">--</span><span class=\"n\">file</span><span class=\"o\">=</span><span class=\"n\">outfile</span> <span class=\"o\">-</span><span class=\"n\">q</span>\n</pre></div>\n</div>\n<p>As it parses the command line, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> sets attributes of the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code> object returned by <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a> based on user-supplied\ncommand-line values.  When <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a> returns from parsing this command\nline, <code class=\"docutils literal notranslate\"><span class=\"pre\">options.filename</span></code> will be <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;outfile&quot;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">options.verbose</span></code> will be\n<code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> supports both long and short options, allows short\noptions to be merged together, and allows options to be associated with their\narguments in a variety of ways.  Thus, the following command lines are all\nequivalent to the above example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">-</span><span class=\"n\">f</span> <span class=\"n\">outfile</span> <span class=\"o\">--</span><span class=\"n\">quiet</span>\n<span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">--</span><span class=\"n\">quiet</span> <span class=\"o\">--</span><span class=\"n\">file</span> <span class=\"n\">outfile</span>\n<span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">-</span><span class=\"n\">q</span> <span class=\"o\">-</span><span class=\"n\">foutfile</span>\n<span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">-</span><span class=\"n\">qfoutfile</span>\n</pre></div>\n</div>\n<p>Additionally, users can run one of the following</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">-</span><span class=\"n\">h</span>\n<span class=\"o\">&lt;</span><span class=\"n\">yourscript</span><span class=\"o\">&gt;</span> <span class=\"o\">--</span><span class=\"n\">help</span>\n</pre></div>\n</div>\n<p>and <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will print out a brief summary of your script’s options:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>Usage: &lt;yourscript&gt; [options]\n\nOptions:\n  -h, --help            show this help message and exit\n  -f FILE, --file=FILE  write report to FILE\n  -q, --quiet           don&#39;t print status messages to stdout\n</pre></div>\n</div>\n<p>where the value of <em>yourscript</em> is determined at runtime (normally from\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[0]</span></code>).</p>\n</section>\n<section id=\"background\">\n<span id=\"optparse-background\"></span><h2>Background<a class=\"headerlink\" href=\"#background\" title=\"Link to this heading\">¶</a></h2>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> was explicitly designed to encourage the creation of programs\nwith straightforward command-line interfaces that follow the conventions\nestablished by the <code class=\"xref c c-func docutils literal notranslate\"><span class=\"pre\">getopt()</span></code> family of functions available to C developers.\nTo that end, it supports only the most common command-line syntax and semantics\nconventionally used under Unix.  If you are unfamiliar with these conventions,\nreading this section will allow you to acquaint yourself with them.</p>\n<section id=\"terminology\">\n<span id=\"optparse-terminology\"></span><h3>Terminology<a class=\"headerlink\" href=\"#terminology\" title=\"Link to this heading\">¶</a></h3>\n<dl>\n<dt>argument</dt><dd><p>a string entered on the command-line, and passed by the shell to <code class=\"docutils literal notranslate\"><span class=\"pre\">execl()</span></code>\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">execv()</span></code>.  In Python, arguments are elements of <code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>\n(<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[0]</span></code> is the name of the program being executed).  Unix shells\nalso use the term “word”.</p>\n<p>It is occasionally desirable to substitute an argument list other than\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>, so you should read “argument” as “an element of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>, or of some other list provided as a substitute for\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>”.</p>\n</dd>\n<dt>option</dt><dd><p>an argument used to supply extra information to guide or customize the\nexecution of a program.  There are many different syntaxes for options; the\ntraditional Unix syntax is a hyphen (“-”) followed by a single letter,\ne.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">-x</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">-F</span></code>.  Also, traditional Unix syntax allows multiple\noptions to be merged into a single argument, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">-x</span> <span class=\"pre\">-F</span></code> is equivalent\nto <code class=\"docutils literal notranslate\"><span class=\"pre\">-xF</span></code>.  The GNU project introduced <code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code> followed by a series of\nhyphen-separated words, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">--file</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--dry-run</span></code>.  These are the\nonly two option syntaxes provided by <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>.</p>\n<p>Some other option syntaxes that the world has seen include:</p>\n<ul class=\"simple\">\n<li><p>a hyphen followed by a few letters, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">-pf</span></code> (this is <em>not</em> the same\nas multiple options merged into a single argument)</p></li>\n<li><p>a hyphen followed by a whole word, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">-file</span></code> (this is technically\nequivalent to the previous syntax, but they aren’t usually seen in the same\nprogram)</p></li>\n<li><p>a plus sign followed by a single letter, or a few letters, or a word, e.g.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">+f</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">+rgb</span></code></p></li>\n<li><p>a slash followed by a letter, or a few letters, or a word, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">/f</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">/file</span></code></p></li>\n</ul>\n<p>These option syntaxes are not supported by <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>, and they never\nwill be.  This is deliberate: the first three are non-standard on any\nenvironment, and the last only makes sense if you’re exclusively targeting\nWindows or certain legacy platforms (e.g. VMS, MS-DOS).</p>\n</dd>\n<dt>option argument</dt><dd><p>an argument that follows an option, is closely associated with that option,\nand is consumed from the argument list when that option is. With\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>, option arguments may either be in a separate argument from\ntheir option:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>-f foo\n--file foo\n</pre></div>\n</div>\n<p>or included in the same argument:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>-ffoo\n--file=foo\n</pre></div>\n</div>\n<p>Typically, a given option either takes an argument or it doesn’t. Lots of\npeople want an “optional option arguments” feature, meaning that some options\nwill take an argument if they see it, and won’t if they don’t.  This is\nsomewhat controversial, because it makes parsing ambiguous: if <code class=\"docutils literal notranslate\"><span class=\"pre\">-a</span></code> takes\nan optional argument and <code class=\"docutils literal notranslate\"><span class=\"pre\">-b</span></code> is another option entirely, how do we\ninterpret <code class=\"docutils literal notranslate\"><span class=\"pre\">-ab</span></code>?  Because of this ambiguity, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> does not\nsupport this feature.</p>\n</dd>\n<dt>positional argument</dt><dd><p>something leftover in the argument list after options have been parsed, i.e.\nafter options and their arguments have been parsed and removed from the\nargument list.</p>\n</dd>\n<dt>required option</dt><dd><p>an option that must be supplied on the command-line; note that the phrase\n“required option” is self-contradictory in English.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> doesn’t\nprevent you from implementing required options, but doesn’t give you much\nhelp at it either.</p>\n</dd>\n</dl>\n<p>For example, consider this hypothetical command-line:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">prog</span> <span class=\"o\">-</span><span class=\"n\">v</span> <span class=\"o\">--</span><span class=\"n\">report</span> <span class=\"n\">report</span><span class=\"o\">.</span><span class=\"n\">txt</span> <span class=\"n\">foo</span> <span class=\"n\">bar</span>\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">--report</span></code> are both options.  Assuming that <code class=\"docutils literal notranslate\"><span class=\"pre\">--report</span></code>\ntakes one argument, <code class=\"docutils literal notranslate\"><span class=\"pre\">report.txt</span></code> is an option argument.  <code class=\"docutils literal notranslate\"><span class=\"pre\">foo</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">bar</span></code> are positional arguments.</p>\n</section>\n<section id=\"what-are-options-for\">\n<span id=\"optparse-what-options-for\"></span><h3>What are options for?<a class=\"headerlink\" href=\"#what-are-options-for\" title=\"Link to this heading\">¶</a></h3>\n<p>Options are used to provide extra information to tune or customize the execution\nof a program.  In case it wasn’t clear, options are usually <em>optional</em>.  A\nprogram should be able to run just fine with no options whatsoever.  (Pick a\nrandom program from the Unix or GNU toolsets.  Can it run without any options at\nall and still make sense?  The main exceptions are <code class=\"docutils literal notranslate\"><span class=\"pre\">find</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">tar</span></code>, and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">dd</span></code>—all of which are mutant oddballs that have been rightly criticized\nfor their non-standard syntax and confusing interfaces.)</p>\n<p>Lots of people want their programs to have “required options”.  Think about it.\nIf it’s required, then it’s <em>not optional</em>!  If there is a piece of information\nthat your program absolutely requires in order to run successfully, that’s what\npositional arguments are for.</p>\n<p>As an example of good command-line interface design, consider the humble <code class=\"docutils literal notranslate\"><span class=\"pre\">cp</span></code>\nutility, for copying files.  It doesn’t make much sense to try to copy files\nwithout supplying a destination and at least one source. Hence, <code class=\"docutils literal notranslate\"><span class=\"pre\">cp</span></code> fails if\nyou run it with no arguments.  However, it has a flexible, useful syntax that\ndoes not require any options at all:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">cp</span> <span class=\"n\">SOURCE</span> <span class=\"n\">DEST</span>\n<span class=\"n\">cp</span> <span class=\"n\">SOURCE</span> <span class=\"o\">...</span> <span class=\"n\">DEST</span><span class=\"o\">-</span><span class=\"n\">DIR</span>\n</pre></div>\n</div>\n<p>You can get pretty far with just that.  Most <code class=\"docutils literal notranslate\"><span class=\"pre\">cp</span></code> implementations provide a\nbunch of options to tweak exactly how the files are copied: you can preserve\nmode and modification time, avoid following symlinks, ask before clobbering\nexisting files, etc.  But none of this distracts from the core mission of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">cp</span></code>, which is to copy either one file to another, or several files to another\ndirectory.</p>\n</section>\n<section id=\"what-are-positional-arguments-for\">\n<span id=\"optparse-what-positional-arguments-for\"></span><h3>What are positional arguments for?<a class=\"headerlink\" href=\"#what-are-positional-arguments-for\" title=\"Link to this heading\">¶</a></h3>\n<p>Positional arguments are for those pieces of information that your program\nabsolutely, positively requires to run.</p>\n<p>A good user interface should have as few absolute requirements as possible.  If\nyour program requires 17 distinct pieces of information in order to run\nsuccessfully, it doesn’t much matter <em>how</em> you get that information from the\nuser—most people will give up and walk away before they successfully run the\nprogram.  This applies whether the user interface is a command-line, a\nconfiguration file, or a GUI: if you make that many demands on your users, most\nof them will simply give up.</p>\n<p>In short, try to minimize the amount of information that users are absolutely\nrequired to supply—use sensible defaults whenever possible.  Of course, you\nalso want to make your programs reasonably flexible.  That’s what options are\nfor.  Again, it doesn’t matter if they are entries in a config file, widgets in\nthe “Preferences” dialog of a GUI, or command-line options—the more options\nyou implement, the more flexible your program is, and the more complicated its\nimplementation becomes.  Too much flexibility has drawbacks as well, of course;\ntoo many options can overwhelm users and make your code much harder to maintain.</p>\n</section>\n</section>\n<section id=\"tutorial\">\n<span id=\"optparse-tutorial\"></span><h2>Tutorial<a class=\"headerlink\" href=\"#tutorial\" title=\"Link to this heading\">¶</a></h2>\n<p>While <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> is quite flexible and powerful, it’s also straightforward\nto use in most cases.  This section covers the code patterns that are common to\nany <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>-based program.</p>\n<p>First, you need to import the OptionParser class; then, early in the main\nprogram, create an OptionParser instance:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">optparse</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">OptionParser</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Then you can start defining options.  The basic syntax is:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">,</span>\n                  <span class=\"n\">attr</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Each option has one or more option strings, such as <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--file</span></code>,\nand several option attributes that tell <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> what to expect and what\nto do when it encounters that option on the command line.</p>\n<p>Typically, each option will have one short option string and one long option\nstring, e.g.:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>You’re free to define as many short option strings and as many long option\nstrings as you like (including zero), as long as there is at least one option\nstring overall.</p>\n<p>The option strings passed to <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a> are effectively\nlabels for the\noption defined by that call.  For brevity, we will frequently refer to\n<em>encountering an option</em> on the command line; in reality, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nencounters <em>option strings</em> and looks up options from them.</p>\n<p>Once all of your options are defined, instruct <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to parse your\nprogram’s command line:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>(If you like, you can pass a custom argument list to <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a>, but\nthat’s rarely necessary: by default it uses <code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>.)</p>\n<p><a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a> returns two values:</p>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code>, an object containing values for all of your options—e.g. if\n<code class=\"docutils literal notranslate\"><span class=\"pre\">--file</span></code> takes a single string argument, then <code class=\"docutils literal notranslate\"><span class=\"pre\">options.file</span></code> will be the\nfilename supplied by the user, or <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> if the user did not supply that\noption</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code>, the list of positional arguments leftover after parsing options</p></li>\n</ul>\n<p>This tutorial section only covers the four most important option attributes:\n<a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>\n(destination), and <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a>. Of these, <a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a> is the\nmost fundamental.</p>\n<section id=\"understanding-option-actions\">\n<span id=\"optparse-understanding-option-actions\"></span><h3>Understanding option actions<a class=\"headerlink\" href=\"#understanding-option-actions\" title=\"Link to this heading\">¶</a></h3>\n<p>Actions tell <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> what to do when it encounters an option on the\ncommand line.  There is a fixed set of actions hard-coded into <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>;\nadding new actions is an advanced topic covered in section\n<a class=\"reference internal\" href=\"#optparse-extending-optparse\"><span class=\"std std-ref\">Extending optparse</span></a>.  Most actions tell <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to store\na value in some variable—for example, take a string from the command line and\nstore it in an attribute of <code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code>.</p>\n<p>If you don’t specify an option action, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> defaults to <code class=\"docutils literal notranslate\"><span class=\"pre\">store</span></code>.</p>\n</section>\n<section id=\"the-store-action\">\n<span id=\"optparse-store-action\"></span><h3>The store action<a class=\"headerlink\" href=\"#the-store-action\" title=\"Link to this heading\">¶</a></h3>\n<p>The most common option action is <code class=\"docutils literal notranslate\"><span class=\"pre\">store</span></code>, which tells <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to take\nthe next argument (or the remainder of the current argument), ensure that it is\nof the correct type, and store it to your chosen destination.</p>\n<p>For example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;string&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Now let’s make up a fake command line and ask <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to parse it:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;foo.txt&quot;</span><span class=\"p\">]</span>\n<span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>When <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> sees the option string <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code>, it consumes the next\nargument, <code class=\"docutils literal notranslate\"><span class=\"pre\">foo.txt</span></code>, and stores it in <code class=\"docutils literal notranslate\"><span class=\"pre\">options.filename</span></code>.  So, after this\ncall to <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a>, <code class=\"docutils literal notranslate\"><span class=\"pre\">options.filename</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;foo.txt&quot;</span></code>.</p>\n<p>Some other option types supported by <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> are <code class=\"docutils literal notranslate\"><span class=\"pre\">int</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">float</span></code>.\nHere’s an option that expects an integer argument:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-n&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;int&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;num&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Note that this option has no long option string, which is perfectly acceptable.\nAlso, there’s no explicit action, since the default is <code class=\"docutils literal notranslate\"><span class=\"pre\">store</span></code>.</p>\n<p>Let’s parse another fake command-line.  This time, we’ll jam the option argument\nright up against the option: since <code class=\"docutils literal notranslate\"><span class=\"pre\">-n42</span></code> (one argument) is equivalent to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span> <span class=\"pre\">42</span></code> (two arguments), the code</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">([</span><span class=\"s2\">&quot;-n42&quot;</span><span class=\"p\">])</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">num</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>will print <code class=\"docutils literal notranslate\"><span class=\"pre\">42</span></code>.</p>\n<p>If you don’t specify a type, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> assumes <code class=\"docutils literal notranslate\"><span class=\"pre\">string</span></code>.  Combined with\nthe fact that the default action is <code class=\"docutils literal notranslate\"><span class=\"pre\">store</span></code>, that means our first example can\nbe a lot shorter:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If you don’t supply a destination, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> figures out a sensible\ndefault from the option strings: if the first long option string is\n<code class=\"docutils literal notranslate\"><span class=\"pre\">--foo-bar</span></code>, then the default destination is <code class=\"docutils literal notranslate\"><span class=\"pre\">foo_bar</span></code>.  If there are no\nlong option strings, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> looks at the first short option string: the\ndefault destination for <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">f</span></code>.</p>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> also includes the built-in <code class=\"docutils literal notranslate\"><span class=\"pre\">complex</span></code> type.  Adding\ntypes is covered in section <a class=\"reference internal\" href=\"#optparse-extending-optparse\"><span class=\"std std-ref\">Extending optparse</span></a>.</p>\n</section>\n<section id=\"handling-boolean-flag-options\">\n<span id=\"optparse-handling-boolean-options\"></span><h3>Handling boolean (flag) options<a class=\"headerlink\" href=\"#handling-boolean-flag-options\" title=\"Link to this heading\">¶</a></h3>\n<p>Flag options—set a variable to true or false when a particular option is\nseen—are quite common.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> supports them with two separate actions,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">store_true</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">store_false</span></code>.  For example, you might have a <code class=\"docutils literal notranslate\"><span class=\"pre\">verbose</span></code>\nflag that is turned on with <code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> and off with <code class=\"docutils literal notranslate\"><span class=\"pre\">-q</span></code>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Here we have two different options with the same destination, which is perfectly\nOK.  (It just means you have to be a bit careful when setting default\nvalues—see below.)</p>\n<p>When <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> encounters <code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> on the command line, it sets\n<code class=\"docutils literal notranslate\"><span class=\"pre\">options.verbose</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>; when it encounters <code class=\"docutils literal notranslate\"><span class=\"pre\">-q</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">options.verbose</span></code> is set to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>.</p>\n</section>\n<section id=\"other-actions\">\n<span id=\"optparse-other-actions\"></span><h3>Other actions<a class=\"headerlink\" href=\"#other-actions\" title=\"Link to this heading\">¶</a></h3>\n<p>Some other actions supported by <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> are:</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code></dt><dd><p>store a constant value, pre-set via <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Option.const</span></code></a></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code></dt><dd><p>append this option’s argument to a list</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;count&quot;</span></code></dt><dd><p>increment a counter by one</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code></dt><dd><p>call a specified function</p>\n</dd>\n</dl>\n<p>These are covered in section <a class=\"reference internal\" href=\"#optparse-reference-guide\"><span class=\"std std-ref\">Reference Guide</span></a>,\nand section <a class=\"reference internal\" href=\"#optparse-option-callbacks\"><span class=\"std std-ref\">Option Callbacks</span></a>.</p>\n</section>\n<section id=\"default-values\">\n<span id=\"optparse-default-values\"></span><h3>Default values<a class=\"headerlink\" href=\"#default-values\" title=\"Link to this heading\">¶</a></h3>\n<p>All of the above examples involve setting some variable (the “destination”) when\ncertain command-line options are seen.  What happens if those options are never\nseen?  Since we didn’t supply any defaults, they are all set to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>.  This\nis usually fine, but sometimes you want more control.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> lets you\nsupply a default value for each destination, which is assigned before the\ncommand line is parsed.</p>\n<p>First, consider the verbose/quiet example.  If we want <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to set\n<code class=\"docutils literal notranslate\"><span class=\"pre\">verbose</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> unless <code class=\"docutils literal notranslate\"><span class=\"pre\">-q</span></code> is seen, then we can do this:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Since default values apply to the <em>destination</em> rather than to any particular\noption, and these two options happen to have the same destination, this is\nexactly equivalent:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Consider this:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Again, the default value for <code class=\"docutils literal notranslate\"><span class=\"pre\">verbose</span></code> will be <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>: the last default\nvalue supplied for any particular destination is the one that counts.</p>\n<p>A clearer way to specify default values is the <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">set_defaults()</span></code> method of\nOptionParser, which you can call at any time before calling\n<a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">set_defaults</span><span class=\"p\">(</span><span class=\"n\">verbose</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>As before, the last value specified for a given option destination is the one\nthat counts.  For clarity, try to use one method or the other of setting default\nvalues, not both.</p>\n</section>\n<section id=\"generating-help\">\n<span id=\"optparse-generating-help\"></span><h3>Generating help<a class=\"headerlink\" href=\"#generating-help\" title=\"Link to this heading\">¶</a></h3>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s ability to generate help and usage text automatically is\nuseful for creating user-friendly command-line interfaces.  All you have to do\nis supply a <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> value for each option, and optionally a short\nusage message for your whole program.  Here’s an OptionParser populated with\nuser-friendly (documented) options:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">usage</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;usage: %prog [options] arg1 arg2&quot;</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">usage</span><span class=\"o\">=</span><span class=\"n\">usage</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--verbose&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;make lots of noise [default]&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--quiet&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;be vewwy quiet (I&#39;m hunting wabbits)&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--filename&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">metavar</span><span class=\"o\">=</span><span class=\"s2\">&quot;FILE&quot;</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;write output to FILE&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-m&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--mode&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s2\">&quot;intermediate&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;interaction mode: novice, intermediate, &quot;</span>\n                       <span class=\"s2\">&quot;or expert [default: </span><span class=\"si\">%d</span><span class=\"s2\">efault]&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> encounters either <code class=\"docutils literal notranslate\"><span class=\"pre\">-h</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--help</span></code> on the\ncommand-line, or if you just call <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parser.print_help()</span></code>, it prints the\nfollowing to standard output:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>Usage: &lt;yourscript&gt; [options] arg1 arg2\n\nOptions:\n  -h, --help            show this help message and exit\n  -v, --verbose         make lots of noise [default]\n  -q, --quiet           be vewwy quiet (I&#39;m hunting wabbits)\n  -f FILE, --filename=FILE\n                        write output to FILE\n  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or\n                        expert [default: intermediate]\n</pre></div>\n</div>\n<p>(If the help output is triggered by a help option, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> exits after\nprinting the help text.)</p>\n<p>There’s a lot going on here to help <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> generate the best possible\nhelp message:</p>\n<ul>\n<li><p>the script defines its own usage message:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">usage</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;usage: %prog [options] arg1 arg2&quot;</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> expands <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> in the usage string to the name of the\ncurrent program, i.e. <code class=\"docutils literal notranslate\"><span class=\"pre\">os.path.basename(sys.argv[0])</span></code>.  The expanded string\nis then printed before the detailed option help.</p>\n<p>If you don’t supply a usage string, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> uses a bland but sensible\ndefault: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;Usage:</span> <span class=\"pre\">%prog</span> <span class=\"pre\">[options]&quot;</span></code>, which is fine if your script doesn’t\ntake any positional arguments.</p>\n</li>\n<li><p>every option defines a help string, and doesn’t worry about\nline-wrapping—<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> takes care of wrapping lines and making\nthe help output look good.</p></li>\n<li><p>options that take a value indicate this fact in their automatically generated\nhelp message, e.g. for the “mode” option:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">-</span><span class=\"n\">m</span> <span class=\"n\">MODE</span><span class=\"p\">,</span> <span class=\"o\">--</span><span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"n\">MODE</span>\n</pre></div>\n</div>\n<p>Here, “MODE” is called the meta-variable: it stands for the argument that the\nuser is expected to supply to <code class=\"docutils literal notranslate\"><span class=\"pre\">-m</span></code>/<code class=\"docutils literal notranslate\"><span class=\"pre\">--mode</span></code>.  By default,\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> converts the destination variable name to uppercase and uses\nthat for the meta-variable.  Sometimes, that’s not what you want—for\nexample, the <code class=\"docutils literal notranslate\"><span class=\"pre\">--filename</span></code> option explicitly sets <code class=\"docutils literal notranslate\"><span class=\"pre\">metavar=&quot;FILE&quot;</span></code>,\nresulting in this automatically generated option description:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">-</span><span class=\"n\">f</span> <span class=\"n\">FILE</span><span class=\"p\">,</span> <span class=\"o\">--</span><span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"n\">FILE</span>\n</pre></div>\n</div>\n<p>This is important for more than just saving space, though: the manually\nwritten help text uses the meta-variable <code class=\"docutils literal notranslate\"><span class=\"pre\">FILE</span></code> to clue the user in that\nthere’s a connection between the semi-formal syntax <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span> <span class=\"pre\">FILE</span></code> and the informal\nsemantic description “write output to FILE”. This is a simple but effective\nway to make your help text a lot clearer and more useful for end users.</p>\n</li>\n<li><p>options that have a default value can include <code class=\"docutils literal notranslate\"><span class=\"pre\">%default</span></code> in the help\nstring—<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will replace it with <a class=\"reference internal\" href=\"stdtypes.html#str\" title=\"str\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">str()</span></code></a> of the option’s\ndefault value.  If an option has no default value (or the default value is\n<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>), <code class=\"docutils literal notranslate\"><span class=\"pre\">%default</span></code> expands to <code class=\"docutils literal notranslate\"><span class=\"pre\">none</span></code>.</p></li>\n</ul>\n<section id=\"grouping-options\">\n<h4>Grouping Options<a class=\"headerlink\" href=\"#grouping-options\" title=\"Link to this heading\">¶</a></h4>\n<p>When dealing with many options, it is convenient to group these options for\nbetter help output.  An <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a> can contain several option groups,\neach of which can contain several options.</p>\n<p>An option group is obtained using the class <a class=\"reference internal\" href=\"#optparse.OptionGroup\" title=\"optparse.OptionGroup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionGroup</span></code></a>:</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionGroup\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OptionGroup</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">parser</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">title</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">description</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionGroup\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>where</p>\n<ul class=\"simple\">\n<li><p>parser is the <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a> instance the group will be inserted in\nto</p></li>\n<li><p>title is the group title</p></li>\n<li><p>description, optional, is a long description of the group</p></li>\n</ul>\n</dd></dl>\n\n<p><a class=\"reference internal\" href=\"#optparse.OptionGroup\" title=\"optparse.OptionGroup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionGroup</span></code></a> inherits from <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionContainer</span></code> (like\n<a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>) and so the <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code> method can be used to add\nan option to the group.</p>\n<p>Once all the options are declared, using the <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a> method\n<code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option_group()</span></code> the group is added to the previously defined parser.</p>\n<p>Continuing with the parser defined in the previous section, adding an\n<a class=\"reference internal\" href=\"#optparse.OptionGroup\" title=\"optparse.OptionGroup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionGroup</span></code></a> to a parser is easy:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">group</span> <span class=\"o\">=</span> <span class=\"n\">OptionGroup</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Dangerous Options&quot;</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;Caution: use these options at your own risk.  &quot;</span>\n                    <span class=\"s2\">&quot;It is believed that some of them bite.&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">group</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-g&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Group option.&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option_group</span><span class=\"p\">(</span><span class=\"n\">group</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>This would result in the following help output:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>Usage: &lt;yourscript&gt; [options] arg1 arg2\n\nOptions:\n  -h, --help            show this help message and exit\n  -v, --verbose         make lots of noise [default]\n  -q, --quiet           be vewwy quiet (I&#39;m hunting wabbits)\n  -f FILE, --filename=FILE\n                        write output to FILE\n  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or\n                        expert [default: intermediate]\n\n  Dangerous Options:\n    Caution: use these options at your own risk.  It is believed that some\n    of them bite.\n\n    -g                  Group option.\n</pre></div>\n</div>\n<p>A bit more complete example might involve using more than one group: still\nextending the previous example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">group</span> <span class=\"o\">=</span> <span class=\"n\">OptionGroup</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Dangerous Options&quot;</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;Caution: use these options at your own risk.  &quot;</span>\n                    <span class=\"s2\">&quot;It is believed that some of them bite.&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">group</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-g&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Group option.&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option_group</span><span class=\"p\">(</span><span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"n\">group</span> <span class=\"o\">=</span> <span class=\"n\">OptionGroup</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Debug Options&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">group</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-d&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--debug&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span>\n                 <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Print debug information&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">group</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-s&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--sql&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span>\n                 <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Print all SQL statements executed&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">group</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-e&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Print every action done&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option_group</span><span class=\"p\">(</span><span class=\"n\">group</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>that results in the following output:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>Usage: &lt;yourscript&gt; [options] arg1 arg2\n\nOptions:\n  -h, --help            show this help message and exit\n  -v, --verbose         make lots of noise [default]\n  -q, --quiet           be vewwy quiet (I&#39;m hunting wabbits)\n  -f FILE, --filename=FILE\n                        write output to FILE\n  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or expert\n                        [default: intermediate]\n\n  Dangerous Options:\n    Caution: use these options at your own risk.  It is believed that some\n    of them bite.\n\n    -g                  Group option.\n\n  Debug Options:\n    -d, --debug         Print debug information\n    -s, --sql           Print all SQL statements executed\n    -e                  Print every action done\n</pre></div>\n</div>\n<p>Another interesting method, in particular when working programmatically with\noption groups is:</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.get_option_group\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">get_option_group</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">opt_str</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.get_option_group\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Return the <a class=\"reference internal\" href=\"#optparse.OptionGroup\" title=\"optparse.OptionGroup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionGroup</span></code></a> to which the short or long option\nstring <em>opt_str</em> (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">'-o'</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">'--option'</span></code>) belongs. If\nthere’s no such <a class=\"reference internal\" href=\"#optparse.OptionGroup\" title=\"optparse.OptionGroup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionGroup</span></code></a>, return <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>.</p>\n</dd></dl>\n\n</section>\n</section>\n<section id=\"printing-a-version-string\">\n<span id=\"optparse-printing-version-string\"></span><h3>Printing a version string<a class=\"headerlink\" href=\"#printing-a-version-string\" title=\"Link to this heading\">¶</a></h3>\n<p>Similar to the brief usage string, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> can also print a version\nstring for your program.  You have to supply the string as the <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code>\nargument to OptionParser:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">usage</span><span class=\"o\">=</span><span class=\"s2\">&quot;%prog [-f] [-q]&quot;</span><span class=\"p\">,</span> <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s2\">&quot;%prog 1.0&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> is expanded just like it is in <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code>.  Apart from that,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> can contain anything you like.  When you supply it, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nautomatically adds a <code class=\"docutils literal notranslate\"><span class=\"pre\">--version</span></code> option to your parser. If it encounters\nthis option on the command line, it expands your <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> string (by\nreplacing <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code>), prints it to stdout, and exits.</p>\n<p>For example, if your script is called <code class=\"docutils literal notranslate\"><span class=\"pre\">/usr/bin/foo</span></code>:</p>\n<div class=\"highlight-shell-session notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">$ </span>/usr/bin/foo<span class=\"w\"> </span>--version\n<span class=\"go\">foo 1.0</span>\n</pre></div>\n</div>\n<p>The following two methods can be used to print and get the <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> string:</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.print_version\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">print_version</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">file</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.print_version\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Print the version message for the current program (<code class=\"docutils literal notranslate\"><span class=\"pre\">self.version</span></code>) to\n<em>file</em> (default stdout).  As with <a class=\"reference internal\" href=\"#optparse.OptionParser.print_usage\" title=\"optparse.OptionParser.print_usage\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">print_usage()</span></code></a>, any occurrence\nof <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> in <code class=\"docutils literal notranslate\"><span class=\"pre\">self.version</span></code> is replaced with the name of the current\nprogram.  Does nothing if <code class=\"docutils literal notranslate\"><span class=\"pre\">self.version</span></code> is empty or undefined.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.get_version\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">get_version</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.get_version\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Same as <a class=\"reference internal\" href=\"#optparse.OptionParser.print_version\" title=\"optparse.OptionParser.print_version\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">print_version()</span></code></a> but returns the version string instead of\nprinting it.</p>\n</dd></dl>\n\n</section>\n<section id=\"how-optparse-handles-errors\">\n<span id=\"optparse-how-optparse-handles-errors\"></span><h3>How <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> handles errors<a class=\"headerlink\" href=\"#how-optparse-handles-errors\" title=\"Link to this heading\">¶</a></h3>\n<p>There are two broad classes of errors that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> has to worry about:\nprogrammer errors and user errors.  Programmer errors are usually erroneous\ncalls to <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a>, e.g. invalid option strings, unknown\noption attributes, missing option attributes, etc.  These are dealt with in the\nusual way: raise an exception (either <a class=\"reference internal\" href=\"#optparse.OptionError\" title=\"optparse.OptionError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">optparse.OptionError</span></code></a> or\n<a class=\"reference internal\" href=\"exceptions.html#TypeError\" title=\"TypeError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">TypeError</span></code></a>) and let the program crash.</p>\n<p>Handling user errors is much more important, since they are guaranteed to happen\nno matter how stable your code is.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> can automatically detect\nsome user errors, such as bad option arguments (passing <code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span> <span class=\"pre\">4x</span></code> where\n<code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code> takes an integer argument), missing arguments (<code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code> at the end\nof the command line, where <code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code> takes an argument of any type).  Also,\nyou can call <code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">OptionParser.error()</span></code> to signal an application-defined error\ncondition:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n<span class=\"o\">...</span>\n<span class=\"k\">if</span> <span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"ow\">and</span> <span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">b</span><span class=\"p\">:</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"s2\">&quot;options -a and -b are mutually exclusive&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>In either case, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> handles the error the same way: it prints the\nprogram’s usage message and an error message to standard error and exits with\nerror status 2.</p>\n<p>Consider the first example above, where the user passes <code class=\"docutils literal notranslate\"><span class=\"pre\">4x</span></code> to an option\nthat takes an integer:</p>\n<div class=\"highlight-shell-session notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">$ </span>/usr/bin/foo<span class=\"w\"> </span>-n<span class=\"w\"> </span>4x\n<span class=\"go\">Usage: foo [options]</span>\n\n<span class=\"go\">foo: error: option -n: invalid integer value: &#39;4x&#39;</span>\n</pre></div>\n</div>\n<p>Or, where the user fails to pass a value at all:</p>\n<div class=\"highlight-shell-session notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">$ </span>/usr/bin/foo<span class=\"w\"> </span>-n\n<span class=\"go\">Usage: foo [options]</span>\n\n<span class=\"go\">foo: error: -n option requires an argument</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>-generated error messages take care always to mention the\noption involved in the error; be sure to do the same when calling\n<code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">OptionParser.error()</span></code> from your application code.</p>\n<p>If <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s default error-handling behaviour does not suit your needs,\nyou’ll need to subclass OptionParser and override its <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">exit()</span></code>\nand/or <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">error()</span></code> methods.</p>\n</section>\n<section id=\"putting-it-all-together\">\n<span id=\"optparse-putting-it-all-together\"></span><h3>Putting it all together<a class=\"headerlink\" href=\"#putting-it-all-together\" title=\"Link to this heading\">¶</a></h3>\n<p>Here’s what <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>-based scripts usually look like:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">optparse</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">OptionParser</span>\n<span class=\"o\">...</span>\n<span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">usage</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;usage: %prog [options] arg&quot;</span>\n    <span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">usage</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">,</span>\n                      <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;read data from FILENAME&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--verbose&quot;</span><span class=\"p\">,</span>\n                      <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--quiet&quot;</span><span class=\"p\">,</span>\n                      <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n    <span class=\"o\">...</span>\n    <span class=\"p\">(</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n    <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">args</span><span class=\"p\">)</span> <span class=\"o\">!=</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n        <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"s2\">&quot;incorrect number of arguments&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;reading </span><span class=\"si\">%s</span><span class=\"s2\">...&quot;</span> <span class=\"o\">%</span> <span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">filename</span><span class=\"p\">)</span>\n    <span class=\"o\">...</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">:</span>\n    <span class=\"n\">main</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</section>\n</section>\n<section id=\"reference-guide\">\n<span id=\"optparse-reference-guide\"></span><h2>Reference Guide<a class=\"headerlink\" href=\"#reference-guide\" title=\"Link to this heading\">¶</a></h2>\n<section id=\"creating-the-parser\">\n<span id=\"optparse-creating-parser\"></span><h3>Creating the parser<a class=\"headerlink\" href=\"#creating-the-parser\" title=\"Link to this heading\">¶</a></h3>\n<p>The first step in using <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> is to create an OptionParser instance.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OptionParser</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">...</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>The OptionParser constructor has no required arguments, but a number of\noptional keyword arguments.  You should always pass them as keyword\narguments, i.e. do not rely on the order in which the arguments are declared.</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;%prog</span> <span class=\"pre\">[options]&quot;</span></code>)</dt><dd><p>The usage summary to print when your program is run incorrectly or with a\nhelp option.  When <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> prints the usage string, it expands\n<code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">os.path.basename(sys.argv[0])</span></code> (or to <code class=\"docutils literal notranslate\"><span class=\"pre\">prog</span></code> if you\npassed that keyword argument).  To suppress a usage message, pass the\nspecial value <code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">optparse.SUPPRESS_USAGE</span></code>.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">option_list</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">[]</span></code>)</dt><dd><p>A list of Option objects to populate the parser with.  The options in\n<code class=\"docutils literal notranslate\"><span class=\"pre\">option_list</span></code> are added after any options in <code class=\"docutils literal notranslate\"><span class=\"pre\">standard_option_list</span></code> (a\nclass attribute that may be set by OptionParser subclasses), but before\nany version or help options. Deprecated; use <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code></a> after\ncreating the parser instead.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">option_class</span></code> (default: optparse.Option)</dt><dd><p>Class to use when adding options to the parser in <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code></a>.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</dt><dd><p>A version string to print when the user supplies a version option. If you\nsupply a true value for <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code>, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> automatically adds a\nversion option with the single option string <code class=\"docutils literal notranslate\"><span class=\"pre\">--version</span></code>.  The\nsubstring <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> is expanded the same as for <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code>.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">conflict_handler</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;error&quot;</span></code>)</dt><dd><p>Specifies what to do when options with conflicting option strings are\nadded to the parser; see section\n<a class=\"reference internal\" href=\"#optparse-conflicts-between-options\"><span class=\"std std-ref\">Conflicts between options</span></a>.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">description</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</dt><dd><p>A paragraph of text giving a brief overview of your program.\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> reformats this paragraph to fit the current terminal width\nand prints it when the user requests help (after <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code>, but before the\nlist of options).</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">formatter</span></code> (default: a new <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">IndentedHelpFormatter</span></code>)</dt><dd><p>An instance of optparse.HelpFormatter that will be used for printing help\ntext.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> provides two concrete classes for this purpose:\nIndentedHelpFormatter and TitledHelpFormatter.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">add_help_option</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>)</dt><dd><p>If true, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will add a help option (with option strings <code class=\"docutils literal notranslate\"><span class=\"pre\">-h</span></code>\nand <code class=\"docutils literal notranslate\"><span class=\"pre\">--help</span></code>) to the parser.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">prog</span></code></dt><dd><p>The string to use when expanding <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> in <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code>\ninstead of <code class=\"docutils literal notranslate\"><span class=\"pre\">os.path.basename(sys.argv[0])</span></code>.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">epilog</span></code> (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>)</dt><dd><p>A paragraph of help text to print after the option help.</p>\n</dd>\n</dl>\n</dd></dl>\n\n</section>\n<section id=\"populating-the-parser\">\n<span id=\"optparse-populating-parser\"></span><h3>Populating the parser<a class=\"headerlink\" href=\"#populating-the-parser\" title=\"Link to this heading\">¶</a></h3>\n<p>There are several ways to populate the parser with options.  The preferred way\nis by using <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a>, as shown in section\n<a class=\"reference internal\" href=\"#optparse-tutorial\"><span class=\"std std-ref\">Tutorial</span></a>.  <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code> can be called in one of two ways:</p>\n<ul class=\"simple\">\n<li><p>pass it an Option instance (as returned by <code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_option()</span></code>)</p></li>\n<li><p>pass it any combination of positional and keyword arguments that are\nacceptable to <code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_option()</span></code> (i.e., to the Option constructor), and it\nwill create the Option instance for you</p></li>\n</ul>\n<p>The other alternative is to pass a list of pre-constructed Option instances to\nthe OptionParser constructor, as in:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">option_list</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">make_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--filename&quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;string&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">),</span>\n    <span class=\"n\">make_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--quiet&quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">),</span>\n    <span class=\"p\">]</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">option_list</span><span class=\"o\">=</span><span class=\"n\">option_list</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>(<code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_option()</span></code> is a factory function for creating Option instances;\ncurrently it is an alias for the Option constructor.  A future version of\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> may split Option into several classes, and <code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">make_option()</span></code>\nwill pick the right class to instantiate.  Do not instantiate Option directly.)</p>\n</section>\n<section id=\"defining-options\">\n<span id=\"optparse-defining-options\"></span><h3>Defining options<a class=\"headerlink\" href=\"#defining-options\" title=\"Link to this heading\">¶</a></h3>\n<p>Each Option instance represents a set of synonymous command-line option strings,\ne.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">--file</span></code>.  You can specify any number of short or\nlong option strings, but you must specify at least one overall option string.</p>\n<p>The canonical way to create an <a class=\"reference internal\" href=\"#optparse.Option\" title=\"optparse.Option\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Option</span></code></a> instance is with the\n<code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code> method of <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>.</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.add_option\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">add_option</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">option</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.add_option\" title=\"Link to this definition\">¶</a></dt>\n<dt class=\"sig sig-object py\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">add_option</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">*opt_str</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">attr=value</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">...</span></span></em><span class=\"sig-paren\">)</span></dt>\n<dd><p>To define an option with only a short option string:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"n\">attr</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>And to define an option with only a long option string:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--foo&quot;</span><span class=\"p\">,</span> <span class=\"n\">attr</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The keyword arguments define attributes of the new Option object.  The most\nimportant option attribute is <a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a>, and it largely\ndetermines which other attributes are relevant or required.  If you pass\nirrelevant option attributes, or fail to pass required ones, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nraises an <a class=\"reference internal\" href=\"#optparse.OptionError\" title=\"optparse.OptionError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionError</span></code></a> exception explaining your mistake.</p>\n<p>An option’s <em>action</em> determines what <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> does when it encounters\nthis option on the command-line.  The standard option actions hard-coded into\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> are:</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code></dt><dd><p>store this option’s argument (default)</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code></dt><dd><p>store a constant value, pre-set via <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Option.const</span></code></a></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_true&quot;</span></code></dt><dd><p>store <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_false&quot;</span></code></dt><dd><p>store <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code></dt><dd><p>append this option’s argument to a list</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append_const&quot;</span></code></dt><dd><p>append a constant value to a list, pre-set via <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Option.const</span></code></a></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;count&quot;</span></code></dt><dd><p>increment a counter by one</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code></dt><dd><p>call a specified function</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;help&quot;</span></code></dt><dd><p>print a usage message including all options and the documentation for them</p>\n</dd>\n</dl>\n<p>(If you don’t supply an action, the default is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code>.  For this action,\nyou may also supply <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> and <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> option\nattributes; see <a class=\"reference internal\" href=\"#optparse-standard-option-actions\"><span class=\"std std-ref\">Standard option actions</span></a>.)</p>\n</dd></dl>\n\n<p>As you can see, most actions involve storing or updating a value somewhere.\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> always creates a special object for this, conventionally called\n<code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code>, which is an instance of <a class=\"reference internal\" href=\"#optparse.Values\" title=\"optparse.Values\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">optparse.Values</span></code></a>.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"optparse.Values\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Values</span></span><a class=\"headerlink\" href=\"#optparse.Values\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>An object holding parsed argument names and values as attributes.\nNormally created by calling when calling <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.parse_args()</span></code></a>,\nand can be overridden by a custom subclass passed to the <em>values</em> argument of\n<a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.parse_args()</span></code></a> (as described in <a class=\"reference internal\" href=\"#optparse-parsing-arguments\"><span class=\"std std-ref\">Parsing arguments</span></a>).</p>\n</dd></dl>\n\n<p>Option\narguments (and various other values) are stored as attributes of this object,\naccording to the <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> (destination) option attribute.</p>\n<p>For example, when you call</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>one of the first things <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> does is create the <code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code> object:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"n\">Values</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>If one of the options in this parser is defined with</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;string&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>and the command-line being parsed includes any of the following:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">-</span><span class=\"n\">ffoo</span>\n<span class=\"o\">-</span><span class=\"n\">f</span> <span class=\"n\">foo</span>\n<span class=\"o\">--</span><span class=\"n\">file</span><span class=\"o\">=</span><span class=\"n\">foo</span>\n<span class=\"o\">--</span><span class=\"n\">file</span> <span class=\"n\">foo</span>\n</pre></div>\n</div>\n<p>then <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>, on seeing this option, will do the equivalent of</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;foo&quot;</span>\n</pre></div>\n</div>\n<p>The <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> and <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> option attributes are almost\nas important as <a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a>, but <a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a> is the only\none that makes sense for <em>all</em> options.</p>\n</section>\n<section id=\"option-attributes\">\n<span id=\"optparse-option-attributes\"></span><h3>Option attributes<a class=\"headerlink\" href=\"#option-attributes\" title=\"Link to this heading\">¶</a></h3>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">class</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">Option</span></span><a class=\"headerlink\" href=\"#optparse.Option\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A single command line argument,\nwith various attributes passed by keyword to the constructor.\nNormally created with <a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a> rather than directly,\nand can be overridden by a custom class via the <em>option_class</em> argument\nto <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>.</p>\n</dd></dl>\n\n<p>The following option attributes may be passed as keyword arguments to\n<a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a>.  If you pass an option attribute that is not\nrelevant to a particular option, or fail to pass a required option attribute,\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> raises <a class=\"reference internal\" href=\"#optparse.OptionError\" title=\"optparse.OptionError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionError</span></code></a>.</p>\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.action\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">action</span></span><a class=\"headerlink\" href=\"#optparse.Option.action\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>(default: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code>)</p>\n<p>Determines <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s behaviour when this option is seen on the\ncommand line; the available options are documented <a class=\"reference internal\" href=\"#optparse-standard-option-actions\"><span class=\"std std-ref\">here</span></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.type\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">type</span></span><a class=\"headerlink\" href=\"#optparse.Option.type\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>(default: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code>)</p>\n<p>The argument type expected by this option (e.g., <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;int&quot;</span></code>);\nthe available option types are documented <a class=\"reference internal\" href=\"#optparse-standard-option-types\"><span class=\"std std-ref\">here</span></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.dest\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">dest</span></span><a class=\"headerlink\" href=\"#optparse.Option.dest\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>(default: derived from option strings)</p>\n<p>If the option’s action implies writing or modifying a value somewhere, this\ntells <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> where to write it: <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> names an\nattribute of the <code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code> object that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> builds as it parses\nthe command line.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.default\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">default</span></span><a class=\"headerlink\" href=\"#optparse.Option.default\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>The value to use for this option’s destination if the option is not seen on\nthe command line.  See also <a class=\"reference internal\" href=\"#optparse.OptionParser.set_defaults\" title=\"optparse.OptionParser.set_defaults\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.set_defaults()</span></code></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.nargs\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">nargs</span></span><a class=\"headerlink\" href=\"#optparse.Option.nargs\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>(default: 1)</p>\n<p>How many arguments of type <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> should be consumed when this\noption is seen.  If &gt; 1, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will store a tuple of values to\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.const\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">const</span></span><a class=\"headerlink\" href=\"#optparse.Option.const\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>For actions that store a constant value, the constant value to store.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.choices\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">choices</span></span><a class=\"headerlink\" href=\"#optparse.Option.choices\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>For options of type <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;choice&quot;</span></code>, the list of strings the user may choose\nfrom.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.callback\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">callback</span></span><a class=\"headerlink\" href=\"#optparse.Option.callback\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>For options with action <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code>, the callable to call when this option\nis seen.  See section <a class=\"reference internal\" href=\"#optparse-option-callbacks\"><span class=\"std std-ref\">Option Callbacks</span></a> for detail on the\narguments passed to the callable.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.callback_args\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">callback_args</span></span><a class=\"headerlink\" href=\"#optparse.Option.callback_args\" title=\"Link to this definition\">¶</a></dt>\n<dt class=\"sig sig-object py\" id=\"optparse.Option.callback_kwargs\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">callback_kwargs</span></span><a class=\"headerlink\" href=\"#optparse.Option.callback_kwargs\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Additional positional and keyword arguments to pass to <code class=\"docutils literal notranslate\"><span class=\"pre\">callback</span></code> after the\nfour standard callback arguments.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.help\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">help</span></span><a class=\"headerlink\" href=\"#optparse.Option.help\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Help text to print for this option when listing all available options after\nthe user supplies a <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> option (such as <code class=\"docutils literal notranslate\"><span class=\"pre\">--help</span></code>).  If\nno help text is supplied, the option will be listed without help text.  To\nhide this option, use the special value <code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">optparse.SUPPRESS_HELP</span></code>.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.metavar\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">metavar</span></span><a class=\"headerlink\" href=\"#optparse.Option.metavar\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>(default: derived from option strings)</p>\n<p>Stand-in for the option argument(s) to use when printing help text.  See\nsection <a class=\"reference internal\" href=\"#optparse-tutorial\"><span class=\"std std-ref\">Tutorial</span></a> for an example.</p>\n</dd></dl>\n\n</section>\n<section id=\"standard-option-actions\">\n<span id=\"optparse-standard-option-actions\"></span><h3>Standard option actions<a class=\"headerlink\" href=\"#standard-option-actions\" title=\"Link to this heading\">¶</a></h3>\n<p>The various option actions all have slightly different requirements and effects.\nMost actions have several relevant option attributes which you may specify to\nguide <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s behaviour; a few have required attributes, which you\nmust specify for any option using that action.</p>\n<ul>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code> [relevant: <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>,\n<a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.choices\" title=\"optparse.Option.choices\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">choices</span></code></a>]</p>\n<p>The option must be followed by an argument, which is converted to a value\naccording to <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> and stored in <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.  If\n<a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a> &gt; 1, multiple arguments will be consumed from the\ncommand line; all will be converted according to <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> and\nstored to <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> as a tuple.  See the\n<a class=\"reference internal\" href=\"#optparse-standard-option-types\"><span class=\"std std-ref\">Standard option types</span></a> section.</p>\n<p>If <a class=\"reference internal\" href=\"#optparse.Option.choices\" title=\"optparse.Option.choices\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">choices</span></code></a> is supplied (a list or tuple of strings), the type\ndefaults to <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;choice&quot;</span></code>.</p>\n<p>If <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> is not supplied, it defaults to <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code>.</p>\n<p>If <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> is not supplied, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> derives a destination\nfrom the first long option string (e.g., <code class=\"docutils literal notranslate\"><span class=\"pre\">--foo-bar</span></code> implies\n<code class=\"docutils literal notranslate\"><span class=\"pre\">foo_bar</span></code>). If there are no long option strings, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> derives a\ndestination from the first short option string (e.g., <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code> implies <code class=\"docutils literal notranslate\"><span class=\"pre\">f</span></code>).</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-f&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-p&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;float&quot;</span><span class=\"p\">,</span> <span class=\"n\">nargs</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;point&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>As it parses the command line</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">-</span><span class=\"n\">f</span> <span class=\"n\">foo</span><span class=\"o\">.</span><span class=\"n\">txt</span> <span class=\"o\">-</span><span class=\"n\">p</span> <span class=\"mi\">1</span> <span class=\"o\">-</span><span class=\"mf\">3.5</span> <span class=\"mi\">4</span> <span class=\"o\">-</span><span class=\"n\">fbar</span><span class=\"o\">.</span><span class=\"n\">txt</span>\n</pre></div>\n</div>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will set</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;foo.txt&quot;</span>\n<span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">point</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">3.5</span><span class=\"p\">,</span> <span class=\"mf\">4.0</span><span class=\"p\">)</span>\n<span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;bar.txt&quot;</span>\n</pre></div>\n</div>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code> [required: <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">const</span></code></a>; relevant:\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>]</p>\n<p>The value <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">const</span></code></a> is stored in <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-q&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--quiet&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--verbose&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--noisy&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">--noisy</span></code> is seen, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will set</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">verbose</span> <span class=\"o\">=</span> <span class=\"mi\">2</span>\n</pre></div>\n</div>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_true&quot;</span></code> [relevant: <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>]</p>\n<p>A special case of <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code> that stores <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> to\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.</p>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_false&quot;</span></code> [relevant: <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>]</p>\n<p>Like <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_true&quot;</span></code>, but stores <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>.</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--clobber&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;clobber&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--no-clobber&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_false&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;clobber&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code> [relevant: <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>,\n<a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.choices\" title=\"optparse.Option.choices\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">choices</span></code></a>]</p>\n<p>The option must be followed by an argument, which is appended to the list in\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.  If no default value for <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> is\nsupplied, an empty list is automatically created when <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> first\nencounters this option on the command-line.  If <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a> &gt; 1,\nmultiple arguments are consumed, and a tuple of length <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>\nis appended to <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.</p>\n<p>The defaults for <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> and <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> are the same as\nfor the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code> action.</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-t&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--tracks&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;append&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;int&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">-t3</span></code> is seen on the command-line, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> does the equivalent\nof:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">tracks</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">tracks</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"s2\">&quot;3&quot;</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>If, a little later on, <code class=\"docutils literal notranslate\"><span class=\"pre\">--tracks=4</span></code> is seen, it does:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">tracks</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"s2\">&quot;4&quot;</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">append</span></code> action calls the <code class=\"docutils literal notranslate\"><span class=\"pre\">append</span></code> method on the current value of the\noption.  This means that any default value specified must have an <code class=\"docutils literal notranslate\"><span class=\"pre\">append</span></code>\nmethod.  It also means that if the default value is non-empty, the default\nelements will be present in the parsed value for the option, with any values\nfrom the command line appended after those default values:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--files&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;append&quot;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">&#39;~/.mypkg/defaults&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">opts</span><span class=\"p\">,</span> <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">([</span><span class=\"s1\">&#39;--files&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;overrides.mypkg&#39;</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">files</span>\n<span class=\"go\">[&#39;~/.mypkg/defaults&#39;, &#39;overrides.mypkg&#39;]</span>\n</pre></div>\n</div>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append_const&quot;</span></code> [required: <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">const</span></code></a>; relevant:\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>]</p>\n<p>Like <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code>, but the value <a class=\"reference internal\" href=\"#optparse.Option.const\" title=\"optparse.Option.const\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">const</span></code></a> is appended to\n<a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>; as with <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code>, <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> defaults to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>, and an empty list is automatically created the first time the option\nis encountered.</p>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;count&quot;</span></code> [relevant: <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>]</p>\n<p>Increment the integer stored at <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>.  If no default value is\nsupplied, <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a> is set to zero before being incremented the\nfirst time.</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;count&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbosity&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The first time <code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> is seen on the command line, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> does the\nequivalent of:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">verbosity</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">verbosity</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n</pre></div>\n</div>\n<p>Every subsequent occurrence of <code class=\"docutils literal notranslate\"><span class=\"pre\">-v</span></code> results in</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">options</span><span class=\"o\">.</span><span class=\"n\">verbosity</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n</pre></div>\n</div>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code> [required: <a class=\"reference internal\" href=\"#optparse.Option.callback\" title=\"optparse.Option.callback\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback</span></code></a>; relevant:\n<a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>, <a class=\"reference internal\" href=\"#optparse.Option.callback_args\" title=\"optparse.Option.callback_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_args</span></code></a>,\n<a class=\"reference internal\" href=\"#optparse.Option.callback_kwargs\" title=\"optparse.Option.callback_kwargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_kwargs</span></code></a>]</p>\n<p>Call the function specified by <a class=\"reference internal\" href=\"#optparse.Option.callback\" title=\"optparse.Option.callback\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback</span></code></a>, which is called as</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>See section <a class=\"reference internal\" href=\"#optparse-option-callbacks\"><span class=\"std std-ref\">Option Callbacks</span></a> for more detail.</p>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;help&quot;</span></code></p>\n<p>Prints a complete help message for all the options in the current option\nparser.  The help message is constructed from the <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code> string passed to\nOptionParser’s constructor and the <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> string passed to every\noption.</p>\n<p>If no <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> string is supplied for an option, it will still be\nlisted in the help message.  To omit an option entirely, use the special value\n<code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">optparse.SUPPRESS_HELP</span></code>.</p>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> automatically adds a <a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> option to all\nOptionParsers, so you do not normally need to create one.</p>\n<p>Example:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">optparse</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">OptionParser</span><span class=\"p\">,</span> <span class=\"n\">SUPPRESS_HELP</span>\n\n<span class=\"c1\"># usually, a help option is added automatically, but that can</span>\n<span class=\"c1\"># be suppressed using the add_help_option argument</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">add_help_option</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-h&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--help&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;help&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-v&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;verbose&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Be moderately verbose&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--file&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;filename&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;Input file to read data from&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--secret&quot;</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"n\">SUPPRESS_HELP</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> sees either <code class=\"docutils literal notranslate\"><span class=\"pre\">-h</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--help</span></code> on the command line,\nit will print something like the following help message to stdout (assuming\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[0]</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;foo.py&quot;</span></code>):</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>Usage: foo.py [options]\n\nOptions:\n  -h, --help        Show this help message and exit\n  -v                Be moderately verbose\n  --file=FILENAME   Input file to read data from\n</pre></div>\n</div>\n<p>After printing the help message, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> terminates your process with\n<code class=\"docutils literal notranslate\"><span class=\"pre\">sys.exit(0)</span></code>.</p>\n</li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;version&quot;</span></code></p>\n<p>Prints the version number supplied to the OptionParser to stdout and exits.\nThe version number is actually formatted and printed by the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">print_version()</span></code> method of OptionParser.  Generally only relevant if the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> argument is supplied to the OptionParser constructor.  As with\n<a class=\"reference internal\" href=\"#optparse.Option.help\" title=\"optparse.Option.help\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">help</span></code></a> options, you will rarely create <code class=\"docutils literal notranslate\"><span class=\"pre\">version</span></code> options,\nsince <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> automatically adds them when needed.</p>\n</li>\n</ul>\n</section>\n<section id=\"standard-option-types\">\n<span id=\"optparse-standard-option-types\"></span><h3>Standard option types<a class=\"headerlink\" href=\"#standard-option-types\" title=\"Link to this heading\">¶</a></h3>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> has five built-in option types: <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;int&quot;</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;choice&quot;</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;float&quot;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;complex&quot;</span></code>.  If you need to add new\noption types, see section <a class=\"reference internal\" href=\"#optparse-extending-optparse\"><span class=\"std std-ref\">Extending optparse</span></a>.</p>\n<p>Arguments to string options are not checked or converted in any way: the text on\nthe command line is stored in the destination (or passed to the callback) as-is.</p>\n<p>Integer arguments (type <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;int&quot;</span></code>) are parsed as follows:</p>\n<ul class=\"simple\">\n<li><p>if the number starts with <code class=\"docutils literal notranslate\"><span class=\"pre\">0x</span></code>, it is parsed as a hexadecimal number</p></li>\n<li><p>if the number starts with <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code>, it is parsed as an octal number</p></li>\n<li><p>if the number starts with <code class=\"docutils literal notranslate\"><span class=\"pre\">0b</span></code>, it is parsed as a binary number</p></li>\n<li><p>otherwise, the number is parsed as a decimal number</p></li>\n</ul>\n<p>The conversion is done by calling <a class=\"reference internal\" href=\"functions.html#int\" title=\"int\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">int()</span></code></a> with the appropriate base (2, 8,\n10, or 16).  If this fails, so will <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>, although with a more useful\nerror message.</p>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;float&quot;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;complex&quot;</span></code> option arguments are converted directly with\n<a class=\"reference internal\" href=\"functions.html#float\" title=\"float\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">float()</span></code></a> and <a class=\"reference internal\" href=\"functions.html#complex\" title=\"complex\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">complex()</span></code></a>, with similar error-handling.</p>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;choice&quot;</span></code> options are a subtype of <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code> options.  The\n<a class=\"reference internal\" href=\"#optparse.Option.choices\" title=\"optparse.Option.choices\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">choices</span></code></a> option attribute (a sequence of strings) defines the\nset of allowed option arguments.  <code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">optparse.check_choice()</span></code> compares\nuser-supplied option arguments against this master list and raises\n<a class=\"reference internal\" href=\"#optparse.OptionValueError\" title=\"optparse.OptionValueError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionValueError</span></code></a> if an invalid string is given.</p>\n</section>\n<section id=\"parsing-arguments\">\n<span id=\"optparse-parsing-arguments\"></span><h3>Parsing arguments<a class=\"headerlink\" href=\"#parsing-arguments\" title=\"Link to this heading\">¶</a></h3>\n<p>The whole point of creating and populating an OptionParser is to call its\n<a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a> method.</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.parse_args\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">parse_args</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">args</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">values</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.parse_args\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Parse the command-line options found in <em>args</em>.</p>\n<p>The input parameters are</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code></dt><dd><p>the list of arguments to process (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">sys.argv[1:]</span></code>)</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">values</span></code></dt><dd><p>a <a class=\"reference internal\" href=\"#optparse.Values\" title=\"optparse.Values\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Values</span></code></a> object to store option arguments in (default: a\nnew instance of <a class=\"reference internal\" href=\"#optparse.Values\" title=\"optparse.Values\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Values</span></code></a>) – if you give an existing object, the\noption defaults will not be initialized on it</p>\n</dd>\n</dl>\n<p>and the return value is a pair <code class=\"docutils literal notranslate\"><span class=\"pre\">(options,</span> <span class=\"pre\">args)</span></code> where</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code></dt><dd><p>the same object that was passed in as <em>values</em>, or the <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse.Values</span></code>\ninstance created by <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code></dt><dd><p>the leftover positional arguments after all options have been processed</p>\n</dd>\n</dl>\n</dd></dl>\n\n<p>The most common usage is to supply neither keyword argument.  If you supply\n<code class=\"docutils literal notranslate\"><span class=\"pre\">values</span></code>, it will be modified with repeated <a class=\"reference internal\" href=\"functions.html#setattr\" title=\"setattr\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">setattr()</span></code></a> calls (roughly one\nfor every option argument stored to an option destination) and returned by\n<a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a>.</p>\n<p>If <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a> encounters any errors in the argument list, it calls the\nOptionParser’s <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">error()</span></code> method with an appropriate end-user error message.\nThis ultimately terminates your process with an exit status of 2 (the\ntraditional Unix exit status for command-line errors).</p>\n</section>\n<section id=\"querying-and-manipulating-your-option-parser\">\n<span id=\"optparse-querying-manipulating-option-parser\"></span><h3>Querying and manipulating your option parser<a class=\"headerlink\" href=\"#querying-and-manipulating-your-option-parser\" title=\"Link to this heading\">¶</a></h3>\n<p>The default behavior of the option parser can be customized slightly, and you\ncan also poke around your option parser and see what’s there.  OptionParser\nprovides several methods to help you out:</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.disable_interspersed_args\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">disable_interspersed_args</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.disable_interspersed_args\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set parsing to stop on the first non-option.  For example, if <code class=\"docutils literal notranslate\"><span class=\"pre\">-a</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">-b</span></code> are both simple options that take no arguments, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nnormally accepts this syntax:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">prog</span> <span class=\"o\">-</span><span class=\"n\">a</span> <span class=\"n\">arg1</span> <span class=\"o\">-</span><span class=\"n\">b</span> <span class=\"n\">arg2</span>\n</pre></div>\n</div>\n<p>and treats it as equivalent to</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">prog</span> <span class=\"o\">-</span><span class=\"n\">a</span> <span class=\"o\">-</span><span class=\"n\">b</span> <span class=\"n\">arg1</span> <span class=\"n\">arg2</span>\n</pre></div>\n</div>\n<p>To disable this feature, call <a class=\"reference internal\" href=\"#optparse.OptionParser.disable_interspersed_args\" title=\"optparse.OptionParser.disable_interspersed_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">disable_interspersed_args()</span></code></a>.  This\nrestores traditional Unix syntax, where option parsing stops with the first\nnon-option argument.</p>\n<p>Use this if you have a command processor which runs another command which has\noptions of its own and you want to make sure these options don’t get\nconfused.  For example, each command might have a different set of options.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.enable_interspersed_args\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">enable_interspersed_args</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.enable_interspersed_args\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set parsing to not stop on the first non-option, allowing interspersing\nswitches with command arguments.  This is the default behavior.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.get_option\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">get_option</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">opt_str</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.get_option\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Returns the Option instance with the option string <em>opt_str</em>, or <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> if\nno options have that option string.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.has_option\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">has_option</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">opt_str</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.has_option\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Return <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> if the OptionParser has an option with option string <em>opt_str</em>\n(e.g., <code class=\"docutils literal notranslate\"><span class=\"pre\">-q</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--verbose</span></code>).</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.remove_option\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">remove_option</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">opt_str</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.remove_option\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>If the <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a> has an option corresponding to <em>opt_str</em>, that\noption is removed.  If that option provided any other option strings, all of\nthose option strings become invalid. If <em>opt_str</em> does not occur in any\noption belonging to this <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>, raises <a class=\"reference internal\" href=\"exceptions.html#ValueError\" title=\"ValueError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">ValueError</span></code></a>.</p>\n</dd></dl>\n\n</section>\n<section id=\"conflicts-between-options\">\n<span id=\"optparse-conflicts-between-options\"></span><h3>Conflicts between options<a class=\"headerlink\" href=\"#conflicts-between-options\" title=\"Link to this heading\">¶</a></h3>\n<p>If you’re not careful, it’s easy to define options with conflicting option\nstrings:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-n&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--dry-run&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-n&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--noisy&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>(This is particularly true if you’ve defined your own OptionParser subclass with\nsome standard options.)</p>\n<p>Every time you add an option, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> checks for conflicts with existing\noptions.  If it finds any, it invokes the current conflict-handling mechanism.\nYou can set the conflict-handling mechanism either in the constructor:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"o\">...</span><span class=\"p\">,</span> <span class=\"n\">conflict_handler</span><span class=\"o\">=</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>or with a separate call:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">set_conflict_handler</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The available conflict handlers are:</p>\n<blockquote>\n<div><dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;error&quot;</span></code> (default)</dt><dd><p>assume option conflicts are a programming error and raise\n<a class=\"reference internal\" href=\"#optparse.OptionConflictError\" title=\"optparse.OptionConflictError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionConflictError</span></code></a></p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;resolve&quot;</span></code></dt><dd><p>resolve option conflicts intelligently (see below)</p>\n</dd>\n</dl>\n</div></blockquote>\n<p>As an example, let’s define an <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a> that resolves conflicts\nintelligently and add conflicting options to it:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">conflict_handler</span><span class=\"o\">=</span><span class=\"s2\">&quot;resolve&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-n&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--dry-run&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;do no harm&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-n&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--noisy&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;be noisy&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>At this point, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> detects that a previously added option is already\nusing the <code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code> option string.  Since <code class=\"docutils literal notranslate\"><span class=\"pre\">conflict_handler</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;resolve&quot;</span></code>,\nit resolves the situation by removing <code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code> from the earlier option’s list of\noption strings.  Now <code class=\"docutils literal notranslate\"><span class=\"pre\">--dry-run</span></code> is the only way for the user to activate\nthat option.  If the user asks for help, the help message will reflect that:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">Options</span><span class=\"p\">:</span>\n  <span class=\"o\">--</span><span class=\"n\">dry</span><span class=\"o\">-</span><span class=\"n\">run</span>     <span class=\"n\">do</span> <span class=\"n\">no</span> <span class=\"n\">harm</span>\n  <span class=\"o\">...</span>\n  <span class=\"o\">-</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"o\">--</span><span class=\"n\">noisy</span>   <span class=\"n\">be</span> <span class=\"n\">noisy</span>\n</pre></div>\n</div>\n<p>It’s possible to whittle away the option strings for a previously added option\nuntil there are none left, and the user has no way of invoking that option from\nthe command-line.  In that case, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> removes that option completely,\nso it doesn’t show up in help text or anywhere else. Carrying on with our\nexisting OptionParser:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--dry-run&quot;</span><span class=\"p\">,</span> <span class=\"o\">...</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s2\">&quot;new dry-run option&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>At this point, the original <code class=\"docutils literal notranslate\"><span class=\"pre\">-n</span></code>/<code class=\"docutils literal notranslate\"><span class=\"pre\">--dry-run</span></code> option is no longer\naccessible, so <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> removes it, leaving this help text:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">Options</span><span class=\"p\">:</span>\n  <span class=\"o\">...</span>\n  <span class=\"o\">-</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"o\">--</span><span class=\"n\">noisy</span>   <span class=\"n\">be</span> <span class=\"n\">noisy</span>\n  <span class=\"o\">--</span><span class=\"n\">dry</span><span class=\"o\">-</span><span class=\"n\">run</span>     <span class=\"n\">new</span> <span class=\"n\">dry</span><span class=\"o\">-</span><span class=\"n\">run</span> <span class=\"n\">option</span>\n</pre></div>\n</div>\n</section>\n<section id=\"cleanup\">\n<span id=\"optparse-cleanup\"></span><h3>Cleanup<a class=\"headerlink\" href=\"#cleanup\" title=\"Link to this heading\">¶</a></h3>\n<p>OptionParser instances have several cyclic references.  This should not be a\nproblem for Python’s garbage collector, but you may wish to break the cyclic\nreferences explicitly by calling <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">destroy()</span></code> on your\nOptionParser once you are done with it.  This is particularly useful in\nlong-running applications where large object graphs are reachable from your\nOptionParser.</p>\n</section>\n<section id=\"other-methods\">\n<span id=\"optparse-other-methods\"></span><h3>Other methods<a class=\"headerlink\" href=\"#other-methods\" title=\"Link to this heading\">¶</a></h3>\n<p>OptionParser supports several other public methods:</p>\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.set_usage\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">set_usage</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">usage</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.set_usage\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set the usage string according to the rules described above for the <code class=\"docutils literal notranslate\"><span class=\"pre\">usage</span></code>\nconstructor keyword argument.  Passing <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> sets the default usage\nstring; use <code class=\"xref py py-const docutils literal notranslate\"><span class=\"pre\">optparse.SUPPRESS_USAGE</span></code> to suppress a usage message.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.print_usage\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">print_usage</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">file</span></span><span class=\"o\"><span class=\"pre\">=</span></span><span class=\"default_value\"><span class=\"pre\">None</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.print_usage\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Print the usage message for the current program (<code class=\"docutils literal notranslate\"><span class=\"pre\">self.usage</span></code>) to <em>file</em>\n(default stdout).  Any occurrence of the string <code class=\"docutils literal notranslate\"><span class=\"pre\">%prog</span></code> in <code class=\"docutils literal notranslate\"><span class=\"pre\">self.usage</span></code>\nis replaced with the name of the current program.  Does nothing if\n<code class=\"docutils literal notranslate\"><span class=\"pre\">self.usage</span></code> is empty or not defined.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.get_usage\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">get_usage</span></span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.get_usage\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Same as <a class=\"reference internal\" href=\"#optparse.OptionParser.print_usage\" title=\"optparse.OptionParser.print_usage\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">print_usage()</span></code></a> but returns the usage string instead of\nprinting it.</p>\n</dd></dl>\n\n<dl class=\"py method\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionParser.set_defaults\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">OptionParser.</span></span><span class=\"sig-name descname\"><span class=\"pre\">set_defaults</span></span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">dest=value</span></span></em>, <em class=\"sig-param\"><span class=\"n\"><span class=\"pre\">...</span></span></em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#optparse.OptionParser.set_defaults\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Set default values for several option destinations at once.  Using\n<a class=\"reference internal\" href=\"#optparse.OptionParser.set_defaults\" title=\"optparse.OptionParser.set_defaults\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">set_defaults()</span></code></a> is the preferred way to set default values for options,\nsince multiple options can share the same destination.  For example, if\nseveral “mode” options all set the same destination, any one of them can set\nthe default, and the last one wins:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--advanced&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"s2\">&quot;advanced&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s2\">&quot;novice&quot;</span><span class=\"p\">)</span>    <span class=\"c1\"># overridden below</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--novice&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"s2\">&quot;novice&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"s2\">&quot;advanced&quot;</span><span class=\"p\">)</span>  <span class=\"c1\"># overrides above setting</span>\n</pre></div>\n</div>\n<p>To avoid this confusion, use <a class=\"reference internal\" href=\"#optparse.OptionParser.set_defaults\" title=\"optparse.OptionParser.set_defaults\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">set_defaults()</span></code></a>:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">set_defaults</span><span class=\"p\">(</span><span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"s2\">&quot;advanced&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--advanced&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"s2\">&quot;advanced&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--novice&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_const&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;mode&quot;</span><span class=\"p\">,</span> <span class=\"n\">const</span><span class=\"o\">=</span><span class=\"s2\">&quot;novice&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</section>\n</section>\n<section id=\"option-callbacks\">\n<span id=\"optparse-option-callbacks\"></span><h2>Option Callbacks<a class=\"headerlink\" href=\"#option-callbacks\" title=\"Link to this heading\">¶</a></h2>\n<p>When <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s built-in actions and types aren’t quite enough for your\nneeds, you have two choices: extend <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> or define a callback option.\nExtending <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> is more general, but overkill for a lot of simple\ncases.  Quite often a simple callback is all you need.</p>\n<p>There are two steps to defining a callback option:</p>\n<ul class=\"simple\">\n<li><p>define the option itself using the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code> action</p></li>\n<li><p>write the callback; this is a function (or method) that takes at least four\narguments, as described below</p></li>\n</ul>\n<section id=\"defining-a-callback-option\">\n<span id=\"optparse-defining-callback-option\"></span><h3>Defining a callback option<a class=\"headerlink\" href=\"#defining-a-callback-option\" title=\"Link to this heading\">¶</a></h3>\n<p>As always, the easiest way to define a callback option is by using the\n<a class=\"reference internal\" href=\"#optparse.OptionParser.add_option\" title=\"optparse.OptionParser.add_option\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.add_option()</span></code></a> method.  Apart from <a class=\"reference internal\" href=\"#optparse.Option.action\" title=\"optparse.Option.action\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">action</span></code></a>, the\nonly option attribute you must specify is <code class=\"docutils literal notranslate\"><span class=\"pre\">callback</span></code>, the function to call:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-c&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">my_callback</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">callback</span></code> is a function (or other callable object), so you must have already\ndefined <code class=\"docutils literal notranslate\"><span class=\"pre\">my_callback()</span></code> when you create this callback option. In this simple\ncase, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> doesn’t even know if <code class=\"docutils literal notranslate\"><span class=\"pre\">-c</span></code> takes any arguments,\nwhich usually means that the option takes no arguments—the mere presence of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">-c</span></code> on the command-line is all it needs to know.  In some\ncircumstances, though, you might want your callback to consume an arbitrary\nnumber of command-line arguments.  This is where writing callbacks gets tricky;\nit’s covered later in this section.</p>\n<p><a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> always passes four particular arguments to your callback, and it\nwill only pass additional arguments if you specify them via\n<a class=\"reference internal\" href=\"#optparse.Option.callback_args\" title=\"optparse.Option.callback_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_args</span></code></a> and <a class=\"reference internal\" href=\"#optparse.Option.callback_kwargs\" title=\"optparse.Option.callback_kwargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_kwargs</span></code></a>.  Thus, the\nminimal callback function signature is:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">my_callback</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n</pre></div>\n</div>\n<p>The four arguments to a callback are described below.</p>\n<p>There are several other option attributes that you can supply when you define a\ncallback option:</p>\n<dl class=\"simple\">\n<dt><a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a></dt><dd><p>has its usual meaning: as with the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code> actions, it\ninstructs <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> to consume one argument and convert it to\n<a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>.  Rather than storing the converted value(s) anywhere,\nthough, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> passes it to your callback function.</p>\n</dd>\n<dt><a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a></dt><dd><p>also has its usual meaning: if it is supplied and &gt; 1, <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will\nconsume <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a> arguments, each of which must be convertible to\n<a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>.  It then passes a tuple of converted values to your\ncallback.</p>\n</dd>\n<dt><a class=\"reference internal\" href=\"#optparse.Option.callback_args\" title=\"optparse.Option.callback_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_args</span></code></a></dt><dd><p>a tuple of extra positional arguments to pass to the callback</p>\n</dd>\n<dt><a class=\"reference internal\" href=\"#optparse.Option.callback_kwargs\" title=\"optparse.Option.callback_kwargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_kwargs</span></code></a></dt><dd><p>a dictionary of extra keyword arguments to pass to the callback</p>\n</dd>\n</dl>\n</section>\n<section id=\"how-callbacks-are-called\">\n<span id=\"optparse-how-callbacks-called\"></span><h3>How callbacks are called<a class=\"headerlink\" href=\"#how-callbacks-are-called\" title=\"Link to this heading\">¶</a></h3>\n<p>All callbacks are called as follows:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>where</p>\n<dl>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">option</span></code></dt><dd><p>is the Option instance that’s calling the callback</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">opt_str</span></code></dt><dd><p>is the option string seen on the command-line that’s triggering the callback.\n(If an abbreviated long option was used, <code class=\"docutils literal notranslate\"><span class=\"pre\">opt_str</span></code> will be the full,\ncanonical option string—e.g. if the user puts <code class=\"docutils literal notranslate\"><span class=\"pre\">--foo</span></code> on the\ncommand-line as an abbreviation for <code class=\"docutils literal notranslate\"><span class=\"pre\">--foobar</span></code>, then <code class=\"docutils literal notranslate\"><span class=\"pre\">opt_str</span></code> will be\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;--foobar&quot;</span></code>.)</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code></dt><dd><p>is the argument to this option seen on the command-line.  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> will\nonly expect an argument if <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> is set; the type of <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> will be\nthe type implied by the option’s type.  If <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> for this option is\n<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> (no argument expected), then <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> will be <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>.  If <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>\n&gt; 1, <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> will be a tuple of values of the appropriate type.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">parser</span></code></dt><dd><p>is the OptionParser instance driving the whole thing, mainly useful because\nyou can access some other interesting data through its instance attributes:</p>\n<dl class=\"simple\">\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">parser.largs</span></code></dt><dd><p>the current list of leftover arguments, ie. arguments that have been\nconsumed but are neither options nor option arguments. Feel free to modify\n<code class=\"docutils literal notranslate\"><span class=\"pre\">parser.largs</span></code>, e.g. by adding more arguments to it.  (This list will\nbecome <code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code>, the second return value of <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">parse_args()</span></code></a>.)</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">parser.rargs</span></code></dt><dd><p>the current list of remaining arguments, ie. with <code class=\"docutils literal notranslate\"><span class=\"pre\">opt_str</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> (if applicable) removed, and only the arguments following them\nstill there.  Feel free to modify <code class=\"docutils literal notranslate\"><span class=\"pre\">parser.rargs</span></code>, e.g. by consuming more\narguments.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">parser.values</span></code></dt><dd><p>the object where option values are by default stored (an instance of\noptparse.OptionValues).  This lets callbacks use the same mechanism as the\nrest of <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> for storing option values; you don’t need to mess\naround with globals or closures.  You can also access or modify the\nvalue(s) of any options already encountered on the command-line.</p>\n</dd>\n</dl>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">args</span></code></dt><dd><p>is a tuple of arbitrary positional arguments supplied via the\n<a class=\"reference internal\" href=\"#optparse.Option.callback_args\" title=\"optparse.Option.callback_args\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_args</span></code></a> option attribute.</p>\n</dd>\n<dt><code class=\"docutils literal notranslate\"><span class=\"pre\">kwargs</span></code></dt><dd><p>is a dictionary of arbitrary keyword arguments supplied via\n<a class=\"reference internal\" href=\"#optparse.Option.callback_kwargs\" title=\"optparse.Option.callback_kwargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">callback_kwargs</span></code></a>.</p>\n</dd>\n</dl>\n</section>\n<section id=\"raising-errors-in-a-callback\">\n<span id=\"optparse-raising-errors-in-callback\"></span><h3>Raising errors in a callback<a class=\"headerlink\" href=\"#raising-errors-in-a-callback\" title=\"Link to this heading\">¶</a></h3>\n<p>The callback function should raise <a class=\"reference internal\" href=\"#optparse.OptionValueError\" title=\"optparse.OptionValueError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionValueError</span></code></a> if there are any\nproblems with the option or its argument(s).  <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> catches this and\nterminates the program, printing the error message you supply to stderr.  Your\nmessage should be clear, concise, accurate, and mention the option at fault.\nOtherwise, the user will have a hard time figuring out what they did wrong.</p>\n</section>\n<section id=\"callback-example-1-trivial-callback\">\n<span id=\"optparse-callback-example-1\"></span><h3>Callback example 1: trivial callback<a class=\"headerlink\" href=\"#callback-example-1-trivial-callback\" title=\"Link to this heading\">¶</a></h3>\n<p>Here’s an example of a callback option that takes no arguments, and simply\nrecords that the option was seen:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">record_foo_seen</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">saw_foo</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--foo&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">record_foo_seen</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Of course, you could do that with the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_true&quot;</span></code> action.</p>\n</section>\n<section id=\"callback-example-2-check-option-order\">\n<span id=\"optparse-callback-example-2\"></span><h3>Callback example 2: check option order<a class=\"headerlink\" href=\"#callback-example-2-check-option-order\" title=\"Link to this heading\">¶</a></h3>\n<p>Here’s a slightly more interesting example: record the fact that <code class=\"docutils literal notranslate\"><span class=\"pre\">-a</span></code> is\nseen, but blow up if it comes after <code class=\"docutils literal notranslate\"><span class=\"pre\">-b</span></code> in the command-line.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">check_order</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">b</span><span class=\"p\">:</span>\n        <span class=\"k\">raise</span> <span class=\"n\">OptionValueError</span><span class=\"p\">(</span><span class=\"s2\">&quot;can&#39;t use -a after -b&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-a&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">check_order</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-b&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;b&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"callback-example-3-check-option-order-generalized\">\n<span id=\"optparse-callback-example-3\"></span><h3>Callback example 3: check option order (generalized)<a class=\"headerlink\" href=\"#callback-example-3-check-option-order-generalized\" title=\"Link to this heading\">¶</a></h3>\n<p>If you want to reuse this callback for several similar options (set a flag, but\nblow up if <code class=\"docutils literal notranslate\"><span class=\"pre\">-b</span></code> has already been seen), it needs a bit of work: the error\nmessage and the flag that it sets must be generalized.</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">check_order</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">b</span><span class=\"p\">:</span>\n        <span class=\"k\">raise</span> <span class=\"n\">OptionValueError</span><span class=\"p\">(</span><span class=\"s2\">&quot;can&#39;t use </span><span class=\"si\">%s</span><span class=\"s2\"> after -b&quot;</span> <span class=\"o\">%</span> <span class=\"n\">opt_str</span><span class=\"p\">)</span>\n    <span class=\"nb\">setattr</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">option</span><span class=\"o\">.</span><span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-a&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">check_order</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-b&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store_true&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;b&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-c&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">check_order</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s1\">&#39;c&#39;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"callback-example-4-check-arbitrary-condition\">\n<span id=\"optparse-callback-example-4\"></span><h3>Callback example 4: check arbitrary condition<a class=\"headerlink\" href=\"#callback-example-4-check-arbitrary-condition\" title=\"Link to this heading\">¶</a></h3>\n<p>Of course, you could put any condition in there—you’re not limited to checking\nthe values of already-defined options.  For example, if you have options that\nshould not be called when the moon is full, all you have to do is this:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">check_moon</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">is_moon_full</span><span class=\"p\">():</span>\n        <span class=\"k\">raise</span> <span class=\"n\">OptionValueError</span><span class=\"p\">(</span><span class=\"s2\">&quot;</span><span class=\"si\">%s</span><span class=\"s2\"> option invalid when moon is full&quot;</span>\n                               <span class=\"o\">%</span> <span class=\"n\">opt_str</span><span class=\"p\">)</span>\n    <span class=\"nb\">setattr</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">option</span><span class=\"o\">.</span><span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--foo&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">check_moon</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>(The definition of <code class=\"docutils literal notranslate\"><span class=\"pre\">is_moon_full()</span></code> is left as an exercise for the reader.)</p>\n</section>\n<section id=\"callback-example-5-fixed-arguments\">\n<span id=\"optparse-callback-example-5\"></span><h3>Callback example 5: fixed arguments<a class=\"headerlink\" href=\"#callback-example-5-fixed-arguments\" title=\"Link to this heading\">¶</a></h3>\n<p>Things get slightly more interesting when you define callback options that take\na fixed number of arguments.  Specifying that a callback option takes arguments\nis similar to defining a <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code> option: if you define\n<a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a>, then the option takes one argument that must be\nconvertible to that type; if you further define <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a>, then the\noption takes <a class=\"reference internal\" href=\"#optparse.Option.nargs\" title=\"optparse.Option.nargs\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">nargs</span></code></a> arguments.</p>\n<p>Here’s an example that just emulates the standard <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code> action:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">store_value</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"nb\">setattr</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">option</span><span class=\"o\">.</span><span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;--foo&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">store_value</span><span class=\"p\">,</span>\n                  <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;int&quot;</span><span class=\"p\">,</span> <span class=\"n\">nargs</span><span class=\"o\">=</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Note that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> takes care of consuming 3 arguments and converting\nthem to integers for you; all you have to do is store them.  (Or whatever;\nobviously you don’t need a callback for this example.)</p>\n</section>\n<section id=\"callback-example-6-variable-arguments\">\n<span id=\"optparse-callback-example-6\"></span><h3>Callback example 6: variable arguments<a class=\"headerlink\" href=\"#callback-example-6-variable-arguments\" title=\"Link to this heading\">¶</a></h3>\n<p>Things get hairy when you want an option to take a variable number of arguments.\nFor this case, you must write a callback, as <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> doesn’t provide any\nbuilt-in capabilities for it.  And you have to deal with certain intricacies of\nconventional Unix command-line parsing that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> normally handles for\nyou.  In particular, callbacks should implement the conventional rules for bare\n<code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">-</span></code> arguments:</p>\n<ul class=\"simple\">\n<li><p>either <code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">-</span></code> can be option arguments</p></li>\n<li><p>bare <code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code> (if not the argument to some option): halt command-line\nprocessing and discard the <code class=\"docutils literal notranslate\"><span class=\"pre\">--</span></code></p></li>\n<li><p>bare <code class=\"docutils literal notranslate\"><span class=\"pre\">-</span></code> (if not the argument to some option): halt command-line\nprocessing but keep the <code class=\"docutils literal notranslate\"><span class=\"pre\">-</span></code> (append it to <code class=\"docutils literal notranslate\"><span class=\"pre\">parser.largs</span></code>)</p></li>\n</ul>\n<p>If you want an option that takes a variable number of arguments, there are\nseveral subtle, tricky issues to worry about.  The exact implementation you\nchoose will be based on which trade-offs you’re willing to make for your\napplication (which is why <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> doesn’t support this sort of thing\ndirectly).</p>\n<p>Nevertheless, here’s a stab at a callback for an option with variable\narguments:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">vararg_callback</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt_str</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n    <span class=\"k\">assert</span> <span class=\"n\">value</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span>\n    <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">floatable</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"nb\">float</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"kc\">True</span>\n        <span class=\"k\">except</span> <span class=\"ne\">ValueError</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"kc\">False</span>\n\n    <span class=\"k\">for</span> <span class=\"n\">arg</span> <span class=\"ow\">in</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">rargs</span><span class=\"p\">:</span>\n        <span class=\"c1\"># stop on --foo like options</span>\n        <span class=\"k\">if</span> <span class=\"n\">arg</span><span class=\"p\">[:</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;--&quot;</span> <span class=\"ow\">and</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">2</span><span class=\"p\">:</span>\n            <span class=\"k\">break</span>\n        <span class=\"c1\"># stop on -a, but not on -3 or -3.0</span>\n        <span class=\"k\">if</span> <span class=\"n\">arg</span><span class=\"p\">[:</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;-&quot;</span> <span class=\"ow\">and</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">floatable</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"p\">):</span>\n            <span class=\"k\">break</span>\n        <span class=\"n\">value</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">arg</span><span class=\"p\">)</span>\n\n    <span class=\"k\">del</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">rargs</span><span class=\"p\">[:</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)]</span>\n    <span class=\"nb\">setattr</span><span class=\"p\">(</span><span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">option</span><span class=\"o\">.</span><span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n\n<span class=\"o\">...</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-c&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;--callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;vararg_attr&quot;</span><span class=\"p\">,</span>\n                  <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;callback&quot;</span><span class=\"p\">,</span> <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">vararg_callback</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n</section>\n<section id=\"extending-optparse\">\n<span id=\"optparse-extending-optparse\"></span><h2>Extending <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a><a class=\"headerlink\" href=\"#extending-optparse\" title=\"Link to this heading\">¶</a></h2>\n<p>Since the two major controlling factors in how <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> interprets\ncommand-line options are the action and type of each option, the most likely\ndirection of extension is to add new actions and new types.</p>\n<section id=\"adding-new-types\">\n<span id=\"optparse-adding-new-types\"></span><h3>Adding new types<a class=\"headerlink\" href=\"#adding-new-types\" title=\"Link to this heading\">¶</a></h3>\n<p>To add new types, you need to define your own subclass of <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s\n<a class=\"reference internal\" href=\"#optparse.Option\" title=\"optparse.Option\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Option</span></code></a> class.  This class has a couple of attributes that define\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s types: <a class=\"reference internal\" href=\"#optparse.Option.TYPES\" title=\"optparse.Option.TYPES\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPES</span></code></a> and <a class=\"reference internal\" href=\"#optparse.Option.TYPE_CHECKER\" title=\"optparse.Option.TYPE_CHECKER\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPE_CHECKER</span></code></a>.</p>\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.TYPES\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">TYPES</span></span><a class=\"headerlink\" href=\"#optparse.Option.TYPES\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A tuple of type names; in your subclass, simply define a new tuple\n<a class=\"reference internal\" href=\"#optparse.Option.TYPES\" title=\"optparse.Option.TYPES\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPES</span></code></a> that builds on the standard one.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.TYPE_CHECKER\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">TYPE_CHECKER</span></span><a class=\"headerlink\" href=\"#optparse.Option.TYPE_CHECKER\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>A dictionary mapping type names to type-checking functions.  A type-checking\nfunction has the following signature:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">check_mytype</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>where <code class=\"docutils literal notranslate\"><span class=\"pre\">option</span></code> is an <a class=\"reference internal\" href=\"#optparse.Option\" title=\"optparse.Option\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Option</span></code></a> instance, <code class=\"docutils literal notranslate\"><span class=\"pre\">opt</span></code> is an option string\n(e.g., <code class=\"docutils literal notranslate\"><span class=\"pre\">-f</span></code>), and <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> is the string from the command line that must\nbe checked and converted to your desired type.  <code class=\"docutils literal notranslate\"><span class=\"pre\">check_mytype()</span></code> should\nreturn an object of the hypothetical type <code class=\"docutils literal notranslate\"><span class=\"pre\">mytype</span></code>.  The value returned by\na type-checking function will wind up in the OptionValues instance returned\nby <a class=\"reference internal\" href=\"#optparse.OptionParser.parse_args\" title=\"optparse.OptionParser.parse_args\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">OptionParser.parse_args()</span></code></a>, or be passed to a callback as the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code> parameter.</p>\n<p>Your type-checking function should raise <a class=\"reference internal\" href=\"#optparse.OptionValueError\" title=\"optparse.OptionValueError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionValueError</span></code></a> if it\nencounters any problems.  <a class=\"reference internal\" href=\"#optparse.OptionValueError\" title=\"optparse.OptionValueError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">OptionValueError</span></code></a> takes a single string\nargument, which is passed as-is to <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>’s <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">error()</span></code>\nmethod, which in turn prepends the program name and the string <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;error:&quot;</span></code>\nand prints everything to stderr before terminating the process.</p>\n</dd></dl>\n\n<p>Here’s a silly example that demonstrates adding a <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;complex&quot;</span></code> option type to\nparse Python-style complex numbers on the command line.  (This is even sillier\nthan it used to be, because <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> 1.3 added built-in support for\ncomplex numbers, but never mind.)</p>\n<p>First, the necessary imports:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">copy</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">copy</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">optparse</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Option</span><span class=\"p\">,</span> <span class=\"n\">OptionValueError</span>\n</pre></div>\n</div>\n<p>You need to define your type-checker first, since it’s referred to later (in the\n<a class=\"reference internal\" href=\"#optparse.Option.TYPE_CHECKER\" title=\"optparse.Option.TYPE_CHECKER\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPE_CHECKER</span></code></a> class attribute of your Option subclass):</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">check_complex</span><span class=\"p\">(</span><span class=\"n\">option</span><span class=\"p\">,</span> <span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"nb\">complex</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n    <span class=\"k\">except</span> <span class=\"ne\">ValueError</span><span class=\"p\">:</span>\n        <span class=\"k\">raise</span> <span class=\"n\">OptionValueError</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;option </span><span class=\"si\">%s</span><span class=\"s2\">: invalid complex value: </span><span class=\"si\">%r</span><span class=\"s2\">&quot;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>Finally, the Option subclass:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyOption</span> <span class=\"p\">(</span><span class=\"n\">Option</span><span class=\"p\">):</span>\n    <span class=\"n\">TYPES</span> <span class=\"o\">=</span> <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">TYPES</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;complex&quot;</span><span class=\"p\">,)</span>\n    <span class=\"n\">TYPE_CHECKER</span> <span class=\"o\">=</span> <span class=\"n\">copy</span><span class=\"p\">(</span><span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">TYPE_CHECKER</span><span class=\"p\">)</span>\n    <span class=\"n\">TYPE_CHECKER</span><span class=\"p\">[</span><span class=\"s2\">&quot;complex&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">check_complex</span>\n</pre></div>\n</div>\n<p>(If we didn’t make a <a class=\"reference internal\" href=\"copy.html#module-copy\" title=\"copy: Shallow and deep copy operations.\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">copy()</span></code></a> of <a class=\"reference internal\" href=\"#optparse.Option.TYPE_CHECKER\" title=\"optparse.Option.TYPE_CHECKER\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Option.TYPE_CHECKER</span></code></a>, we would end\nup modifying the <a class=\"reference internal\" href=\"#optparse.Option.TYPE_CHECKER\" title=\"optparse.Option.TYPE_CHECKER\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPE_CHECKER</span></code></a> attribute of <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>’s\nOption class.  This being Python, nothing stops you from doing that except good\nmanners and common sense.)</p>\n<p>That’s it!  Now you can write a script that uses the new option type just like\nany other <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>-based script, except you have to instruct your\nOptionParser to use MyOption instead of Option:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">option_class</span><span class=\"o\">=</span><span class=\"n\">MyOption</span><span class=\"p\">)</span>\n<span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_option</span><span class=\"p\">(</span><span class=\"s2\">&quot;-c&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;complex&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Alternately, you can build your own option list and pass it to OptionParser; if\nyou don’t use <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">add_option()</span></code> in the above way, you don’t need to tell\nOptionParser which option class to use:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">option_list</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">MyOption</span><span class=\"p\">(</span><span class=\"s2\">&quot;-c&quot;</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"o\">=</span><span class=\"s2\">&quot;store&quot;</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;complex&quot;</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"o\">=</span><span class=\"s2\">&quot;c&quot;</span><span class=\"p\">)]</span>\n<span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">OptionParser</span><span class=\"p\">(</span><span class=\"n\">option_list</span><span class=\"o\">=</span><span class=\"n\">option_list</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"adding-new-actions\">\n<span id=\"optparse-adding-new-actions\"></span><h3>Adding new actions<a class=\"headerlink\" href=\"#adding-new-actions\" title=\"Link to this heading\">¶</a></h3>\n<p>Adding new actions is a bit trickier, because you have to understand that\n<a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> has a couple of classifications for actions:</p>\n<dl class=\"simple\">\n<dt>“store” actions</dt><dd><p>actions that result in <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> storing a value to an attribute of the\ncurrent OptionValues instance; these options require a <a class=\"reference internal\" href=\"#optparse.Option.dest\" title=\"optparse.Option.dest\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">dest</span></code></a>\nattribute to be supplied to the Option constructor.</p>\n</dd>\n<dt>“typed” actions</dt><dd><p>actions that take a value from the command line and expect it to be of a\ncertain type; or rather, a string that can be converted to a certain type.\nThese options require a <a class=\"reference internal\" href=\"#optparse.Option.type\" title=\"optparse.Option.type\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">type</span></code></a> attribute to the Option\nconstructor.</p>\n</dd>\n</dl>\n<p>These are overlapping sets: some default “store” actions are <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store_const&quot;</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;count&quot;</span></code>, while the default “typed”\nactions are <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;store&quot;</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;callback&quot;</span></code>.</p>\n<p>When you add an action, you need to categorize it by listing it in at least one\nof the following class attributes of Option (all are lists of strings):</p>\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.ACTIONS\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">ACTIONS</span></span><a class=\"headerlink\" href=\"#optparse.Option.ACTIONS\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>All actions must be listed in ACTIONS.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.STORE_ACTIONS\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">STORE_ACTIONS</span></span><a class=\"headerlink\" href=\"#optparse.Option.STORE_ACTIONS\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>“store” actions are additionally listed here.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.TYPED_ACTIONS\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">TYPED_ACTIONS</span></span><a class=\"headerlink\" href=\"#optparse.Option.TYPED_ACTIONS\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>“typed” actions are additionally listed here.</p>\n</dd></dl>\n\n<dl class=\"py attribute\">\n<dt class=\"sig sig-object py\" id=\"optparse.Option.ALWAYS_TYPED_ACTIONS\">\n<span class=\"sig-prename descclassname\"><span class=\"pre\">Option.</span></span><span class=\"sig-name descname\"><span class=\"pre\">ALWAYS_TYPED_ACTIONS</span></span><a class=\"headerlink\" href=\"#optparse.Option.ALWAYS_TYPED_ACTIONS\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Actions that always take a type (i.e. whose options always take a value) are\nadditionally listed here.  The only effect of this is that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nassigns the default type, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code>, to options with no explicit type\nwhose action is listed in <a class=\"reference internal\" href=\"#optparse.Option.ALWAYS_TYPED_ACTIONS\" title=\"optparse.Option.ALWAYS_TYPED_ACTIONS\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ALWAYS_TYPED_ACTIONS</span></code></a>.</p>\n</dd></dl>\n\n<p>In order to actually implement your new action, you must override Option’s\n<code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">take_action()</span></code> method and add a case that recognizes your action.</p>\n<p>For example, let’s add an <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> action.  This is similar to the standard\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code> action, but instead of taking a single value from the command-line\nand appending it to an existing list, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> will take multiple values in\na single comma-delimited string, and extend an existing list with them.  That\nis, if <code class=\"docutils literal notranslate\"><span class=\"pre\">--names</span></code> is an <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> option of type <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code>, the command\nline</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">--</span><span class=\"n\">names</span><span class=\"o\">=</span><span class=\"n\">foo</span><span class=\"p\">,</span><span class=\"n\">bar</span> <span class=\"o\">--</span><span class=\"n\">names</span> <span class=\"n\">blah</span> <span class=\"o\">--</span><span class=\"n\">names</span> <span class=\"n\">ding</span><span class=\"p\">,</span><span class=\"n\">dong</span>\n</pre></div>\n</div>\n<p>would result in a list</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">[</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;bar&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;blah&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;ding&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;dong&quot;</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Again we define a subclass of Option:</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyOption</span><span class=\"p\">(</span><span class=\"n\">Option</span><span class=\"p\">):</span>\n\n    <span class=\"n\">ACTIONS</span> <span class=\"o\">=</span> <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">ACTIONS</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;extend&quot;</span><span class=\"p\">,)</span>\n    <span class=\"n\">STORE_ACTIONS</span> <span class=\"o\">=</span> <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">STORE_ACTIONS</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;extend&quot;</span><span class=\"p\">,)</span>\n    <span class=\"n\">TYPED_ACTIONS</span> <span class=\"o\">=</span> <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">TYPED_ACTIONS</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;extend&quot;</span><span class=\"p\">,)</span>\n    <span class=\"n\">ALWAYS_TYPED_ACTIONS</span> <span class=\"o\">=</span> <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">ALWAYS_TYPED_ACTIONS</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;extend&quot;</span><span class=\"p\">,)</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">take_action</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">action</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;extend&quot;</span><span class=\"p\">:</span>\n            <span class=\"n\">lvalue</span> <span class=\"o\">=</span> <span class=\"n\">value</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s2\">&quot;,&quot;</span><span class=\"p\">)</span>\n            <span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">ensure_value</span><span class=\"p\">(</span><span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"p\">[])</span><span class=\"o\">.</span><span class=\"n\">extend</span><span class=\"p\">(</span><span class=\"n\">lvalue</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">Option</span><span class=\"o\">.</span><span class=\"n\">take_action</span><span class=\"p\">(</span>\n                <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"p\">,</span> <span class=\"n\">dest</span><span class=\"p\">,</span> <span class=\"n\">opt</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">,</span> <span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">parser</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Features of note:</p>\n<ul>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> both expects a value on the command-line and stores that value\nsomewhere, so it goes in both <a class=\"reference internal\" href=\"#optparse.Option.STORE_ACTIONS\" title=\"optparse.Option.STORE_ACTIONS\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">STORE_ACTIONS</span></code></a> and\n<a class=\"reference internal\" href=\"#optparse.Option.TYPED_ACTIONS\" title=\"optparse.Option.TYPED_ACTIONS\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">TYPED_ACTIONS</span></code></a>.</p></li>\n<li><p>to ensure that <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a> assigns the default type of <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;string&quot;</span></code> to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> actions, we put the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code> action in\n<a class=\"reference internal\" href=\"#optparse.Option.ALWAYS_TYPED_ACTIONS\" title=\"optparse.Option.ALWAYS_TYPED_ACTIONS\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ALWAYS_TYPED_ACTIONS</span></code></a> as well.</p></li>\n<li><p><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">MyOption.take_action()</span></code> implements just this one new action, and passes\ncontrol back to <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">Option.take_action()</span></code> for the standard <a class=\"reference internal\" href=\"#module-optparse\" title=\"optparse: Command-line option parsing library.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a>\nactions.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">values</span></code> is an instance of the optparse_parser.Values class, which provides\nthe very useful <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ensure_value()</span></code> method. <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ensure_value()</span></code> is\nessentially <a class=\"reference internal\" href=\"functions.html#getattr\" title=\"getattr\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">getattr()</span></code></a> with a safety valve; it is called as</p>\n<div class=\"highlight-python3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">ensure_value</span><span class=\"p\">(</span><span class=\"n\">attr</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If the <code class=\"docutils literal notranslate\"><span class=\"pre\">attr</span></code> attribute of <code class=\"docutils literal notranslate\"><span class=\"pre\">values</span></code> doesn’t exist or is <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>, then\nensure_value() first sets it to <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code>, and then returns <code class=\"docutils literal notranslate\"><span class=\"pre\">value</span></code>. This is\nvery handy for actions like <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;extend&quot;</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;append&quot;</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;count&quot;</span></code>, all\nof which accumulate data in a variable and expect that variable to be of a\ncertain type (a list for the first two, an integer for the latter).  Using\n<code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ensure_value()</span></code> means that scripts using your action don’t have to worry\nabout setting a default value for the option destinations in question; they\ncan just leave the default as <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> and <code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ensure_value()</span></code> will take care of\ngetting it right when it’s needed.</p>\n</li>\n</ul>\n</section>\n</section>\n<section id=\"exceptions\">\n<h2>Exceptions<a class=\"headerlink\" href=\"#exceptions\" title=\"Link to this heading\">¶</a></h2>\n<dl class=\"py exception\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionError\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">exception</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OptionError</span></span><a class=\"headerlink\" href=\"#optparse.OptionError\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Raised if an <a class=\"reference internal\" href=\"#optparse.Option\" title=\"optparse.Option\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Option</span></code></a> instance is created with invalid or\ninconsistent arguments.</p>\n</dd></dl>\n\n<dl class=\"py exception\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionConflictError\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">exception</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OptionConflictError</span></span><a class=\"headerlink\" href=\"#optparse.OptionConflictError\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Raised if conflicting options are added to an <a class=\"reference internal\" href=\"#optparse.OptionParser\" title=\"optparse.OptionParser\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OptionParser</span></code></a>.</p>\n</dd></dl>\n\n<dl class=\"py exception\">\n<dt class=\"sig sig-object py\" id=\"optparse.OptionValueError\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">exception</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">OptionValueError</span></span><a class=\"headerlink\" href=\"#optparse.OptionValueError\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Raised if an invalid option value is encountered on the command line.</p>\n</dd></dl>\n\n<dl class=\"py exception\">\n<dt class=\"sig sig-object py\" id=\"optparse.BadOptionError\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">exception</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">BadOptionError</span></span><a class=\"headerlink\" href=\"#optparse.BadOptionError\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Raised if an invalid option is passed on the command line.</p>\n</dd></dl>\n\n<dl class=\"py exception\">\n<dt class=\"sig sig-object py\" id=\"optparse.AmbiguousOptionError\">\n<em class=\"property\"><span class=\"k\"><span class=\"pre\">exception</span></span><span class=\"w\"> </span></em><span class=\"sig-prename descclassname\"><span class=\"pre\">optparse.</span></span><span class=\"sig-name descname\"><span class=\"pre\">AmbiguousOptionError</span></span><a class=\"headerlink\" href=\"#optparse.AmbiguousOptionError\" title=\"Link to this definition\">¶</a></dt>\n<dd><p>Raised if an ambiguous option is passed on the command line.</p>\n</dd></dl>\n\n</section>\n</section>\n\n\n            <div class=\"clearer\"></div>\n          </div>\n        </div>\n      </div>\n      <div class=\"sphinxsidebar\" role=\"navigation\" aria-label=\"Main\">\n        <div class=\"sphinxsidebarwrapper\">\n  <div>\n    <h3><a href=\"../contents.html\">Table of Contents</a></h3>\n    <ul>\n<li><a class=\"reference internal\" href=\"#\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> — Parser for command line options</a><ul>\n<li><a class=\"reference internal\" href=\"#choosing-an-argument-parsing-library\">Choosing an argument parsing library</a></li>\n<li><a class=\"reference internal\" href=\"#introduction\">Introduction</a></li>\n<li><a class=\"reference internal\" href=\"#background\">Background</a><ul>\n<li><a class=\"reference internal\" href=\"#terminology\">Terminology</a></li>\n<li><a class=\"reference internal\" href=\"#what-are-options-for\">What are options for?</a></li>\n<li><a class=\"reference internal\" href=\"#what-are-positional-arguments-for\">What are positional arguments for?</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#tutorial\">Tutorial</a><ul>\n<li><a class=\"reference internal\" href=\"#understanding-option-actions\">Understanding option actions</a></li>\n<li><a class=\"reference internal\" href=\"#the-store-action\">The store action</a></li>\n<li><a class=\"reference internal\" href=\"#handling-boolean-flag-options\">Handling boolean (flag) options</a></li>\n<li><a class=\"reference internal\" href=\"#other-actions\">Other actions</a></li>\n<li><a class=\"reference internal\" href=\"#default-values\">Default values</a></li>\n<li><a class=\"reference internal\" href=\"#generating-help\">Generating help</a><ul>\n<li><a class=\"reference internal\" href=\"#grouping-options\">Grouping Options</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#printing-a-version-string\">Printing a version string</a></li>\n<li><a class=\"reference internal\" href=\"#how-optparse-handles-errors\">How <code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> handles errors</a></li>\n<li><a class=\"reference internal\" href=\"#putting-it-all-together\">Putting it all together</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#reference-guide\">Reference Guide</a><ul>\n<li><a class=\"reference internal\" href=\"#creating-the-parser\">Creating the parser</a></li>\n<li><a class=\"reference internal\" href=\"#populating-the-parser\">Populating the parser</a></li>\n<li><a class=\"reference internal\" href=\"#defining-options\">Defining options</a></li>\n<li><a class=\"reference internal\" href=\"#option-attributes\">Option attributes</a></li>\n<li><a class=\"reference internal\" href=\"#standard-option-actions\">Standard option actions</a></li>\n<li><a class=\"reference internal\" href=\"#standard-option-types\">Standard option types</a></li>\n<li><a class=\"reference internal\" href=\"#parsing-arguments\">Parsing arguments</a></li>\n<li><a class=\"reference internal\" href=\"#querying-and-manipulating-your-option-parser\">Querying and manipulating your option parser</a></li>\n<li><a class=\"reference internal\" href=\"#conflicts-between-options\">Conflicts between options</a></li>\n<li><a class=\"reference internal\" href=\"#cleanup\">Cleanup</a></li>\n<li><a class=\"reference internal\" href=\"#other-methods\">Other methods</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#option-callbacks\">Option Callbacks</a><ul>\n<li><a class=\"reference internal\" href=\"#defining-a-callback-option\">Defining a callback option</a></li>\n<li><a class=\"reference internal\" href=\"#how-callbacks-are-called\">How callbacks are called</a></li>\n<li><a class=\"reference internal\" href=\"#raising-errors-in-a-callback\">Raising errors in a callback</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-1-trivial-callback\">Callback example 1: trivial callback</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-2-check-option-order\">Callback example 2: check option order</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-3-check-option-order-generalized\">Callback example 3: check option order (generalized)</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-4-check-arbitrary-condition\">Callback example 4: check arbitrary condition</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-5-fixed-arguments\">Callback example 5: fixed arguments</a></li>\n<li><a class=\"reference internal\" href=\"#callback-example-6-variable-arguments\">Callback example 6: variable arguments</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#extending-optparse\">Extending <code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#adding-new-types\">Adding new types</a></li>\n<li><a class=\"reference internal\" href=\"#adding-new-actions\">Adding new actions</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#exceptions\">Exceptions</a></li>\n</ul>\n</li>\n</ul>\n\n  </div>\n  <div>\n    <h4>Previous topic</h4>\n    <p class=\"topless\"><a href=\"../howto/argparse-optparse.html\"\n                          title=\"previous chapter\">Migrating <code class=\"docutils literal notranslate\"><span class=\"pre\">optparse</span></code> code to <code class=\"docutils literal notranslate\"><span class=\"pre\">argparse</span></code></a></p>\n  </div>\n  <div>\n    <h4>Next topic</h4>\n    <p class=\"topless\"><a href=\"getpass.html\"\n                          title=\"next chapter\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">getpass</span></code> — Portable password input</a></p>\n  </div>\n  <div role=\"note\" aria-label=\"source link\">\n    <h3>This page</h3>\n    <ul class=\"this-page-menu\">\n      <li><a href=\"../bugs.html\">Report a bug</a></li>\n      <li>\n        <a href=\"https://github.com/python/cpython/blob/main/Doc/library/optparse.rst?plain=1\"\n            rel=\"nofollow\">Show source\n        </a>\n      </li>\n    </ul>\n  </div>\n        </div>\n<div id=\"sidebarbutton\" title=\"Collapse sidebar\">\n<span>«</span>\n</div>\n\n      </div>\n      <div class=\"clearer\"></div>\n    </div>  \n    <div class=\"related\" role=\"navigation\" aria-label=\"Related\">\n      <h3>Navigation</h3>\n      <ul>\n        <li class=\"right\" style=\"margin-right: 10px\">\n          <a href=\"../genindex.html\" title=\"General Index\"\n             >index</a></li>\n        <li class=\"right\" >\n          <a href=\"../py-modindex.html\" title=\"Python Module Index\"\n             >modules</a> |</li>\n        <li class=\"right\" >\n          <a href=\"getpass.html\" title=\"getpass — Portable password input\"\n             >next</a> |</li>\n        <li class=\"right\" >\n          <a href=\"../howto/argparse-optparse.html\" title=\"Migrating optparse code to argparse\"\n             >previous</a> |</li>\n\n          <li><img src=\"../_static/py.svg\" alt=\"Python logo\" style=\"vertical-align: middle; margin-top: -1px\"></li>\n          <li><a href=\"https://www.python.org/\">Python</a> &#187;</li>\n          <li class=\"switchers\">\n            <div class=\"language_switcher_placeholder\"></div>\n            <div class=\"version_switcher_placeholder\"></div>\n          </li>\n          <li>\n              \n          </li>\n    <li id=\"cpython-language-and-version\">\n      <a href=\"../index.html\">3.14.0 Documentation</a> &#187;\n    </li>\n\n          <li class=\"nav-item nav-item-1\"><a href=\"index.html\" >The Python Standard Library</a> &#187;</li>\n          <li class=\"nav-item nav-item-2\"><a href=\"cmdlinelibs.html\" >Command-line interface libraries</a> &#187;</li>\n        <li class=\"nav-item nav-item-this\"><a href=\"\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">optparse</span></code> — Parser for command line options</a></li>\n                <li class=\"right\">\n                    \n\n    <div class=\"inline-search\" role=\"search\">\n        <form class=\"inline-search\" action=\"../search.html\" method=\"get\">\n          <input placeholder=\"Quick search\" aria-label=\"Quick search\" type=\"search\" name=\"q\" id=\"search-box\">\n          <input type=\"submit\" value=\"Go\">\n        </form>\n    </div>\n                     |\n                </li>\n            <li class=\"right\">\n<label class=\"theme-selector-label\">\n    Theme\n    <select class=\"theme-selector\" oninput=\"activateTheme(this.value)\">\n        <option value=\"auto\" selected>Auto</option>\n        <option value=\"light\">Light</option>\n        <option value=\"dark\">Dark</option>\n    </select>\n</label> |</li>\n            \n      </ul>\n    </div>  \n    <div class=\"footer\">\n    &copy; <a href=\"../copyright.html\">Copyright</a> 2001 Python Software Foundation.\n    <br>\n    This page is licensed under the Python Software Foundation License Version 2.\n    <br>\n    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.\n    <br>\n    \n      See <a href=\"/license.html\">History and License</a> for more information.<br>\n    \n    \n    <br>\n\n    The Python Software Foundation is a non-profit corporation.\n<a href=\"https://www.python.org/psf/donations/\">Please donate.</a>\n<br>\n    <br>\n      Last updated on Nov 25, 2025 (18:01 UTC).\n    \n      <a href=\"/bugs.html\">Found a bug</a>?\n    \n    <br>\n\n    Created using <a href=\"https://www.sphinx-doc.org/\">Sphinx</a> 8.2.3.\n    </div>\n\n    <script type=\"text/javascript\" src=\"../_static/switchers.js\"></script>\n  </body>\n</html>",
  "metadata": {
    "title": "optparse — Parser for command line options — Python 3.14.0 documentation",
    "meta_description": "Source code: Lib/optparse.py Choosing an argument parsing library: The standard library includes three argument parsing libraries: getopt: a module that closely mirrors the procedural C getopt API....",
    "h1": "— Parser for command line options"
  },
  "request_headers": {
    "Referer": "https://docs.python.org/3/library/",
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
    "Accept-Language": "en",
    "User-Agent": "DumbCrawler/1.0",
    "Accept-Encoding": "gzip, deflate"
  },
  "response_headers": {
    "Content-Length": "38595",
    "Server": "nginx",
    "Content-Type": "text/html",
    "Last-Modified": "Tue, 25 Nov 2025 18:03:26 GMT",
    "Etag": "\"6925ef6e-465c2\"",
    "X-Clacks-Overhead": "GNU Terry Pratchett",
    "Strict-Transport-Security": "max-age=315360000; includeSubDomains; preload",
    "Via": "1.1 varnish, 1.1 varnish",
    "Accept-Ranges": "bytes",
    "Age": "4654",
    "Date": "Wed, 26 Nov 2025 05:32:33 GMT",
    "X-Served-By": "cache-lga21941-LGA, cache-yul1970029-YUL",
    "X-Cache": "HIT, HIT",
    "X-Cache-Hits": "159, 0",
    "X-Timer": "S1764135154.569379,VS0,VE1",
    "Vary": "Accept-Encoding"
  },
  "crawled_at": "2025-11-26T05:32:34.229565+00:00",
  "crawler": {
    "name": "DumbCrawler",
    "version": "1.0",
    "mode": "crawl",
    "js_mode": "off",
    "scope": "subfolder"
  }
}